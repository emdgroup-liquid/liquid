import{r as t,c as s,h as i,g as e,H as n}from"./p-e8a734d8.js";import{i as h}from"./p-f13d3119.js";import{i as o}from"./p-44396e3f.js";import{c as a}from"./p-37422124.js";const l=":host{display:inline-flex}";const r=class{constructor(i){t(this,i);this.ldcontextmenuopen=s(this,"ldcontextmenuopen",7);this.ldcontextmenuclose=s(this,"ldcontextmenuclose",7);this.resetFocus=async()=>{const[t]=this.triggerSlotRef.assignedElements();if(o(t)){await t.focusInner();return}if(h(t)){t.focus()}};this.focusFirstMenuitem=async t=>{const s=await t.getFirstMenuItem();if(!s){return}await s.focusInner()};this.handleKeyDown=async t=>{switch(t.key){case"Escape":t.preventDefault();await this.tooltipRef.hideTooltip();break;case"Tab":t.preventDefault()}};this.handleMenuOpen=async()=>{const t=await this.tooltipRef.getTooltip();const s=t.querySelector("ld-menu");if(!this.initialized){s.addEventListener("keydown",this.handleKeyDown);this.initialized=true}this.focusFirstMenuitem(s);this.ldcontextmenuopen.emit()};this.handleMenuClose=()=>{this.resetFocus();this.ldcontextmenuclose.emit()};this.position="bottom left";this.rightClick=false;this.size=undefined;this.tetherOptions=undefined;this.initialized=false}async showContextMenu(){await this.tooltipRef.showTooltip()}async hideContextMenu(){await this.tooltipRef.hideTooltip()}updateSize(){if(this.size){this.menuRef.setAttribute("size",this.size)}else{this.menuRef.removeAttribute("size")}}componentDidLoad(){const t=this.el.getAttribute("style");this.updateSize();if(t){this.menuRef.setAttribute("style",t);this.el.removeAttribute("style")}this.triggerSlotRef.assignedElements().forEach((t=>t.ariaHasPopup="menu"))}render(){return i("ld-tooltip",{onLdtooltipclose:this.handleMenuClose,onLdtooltipopen:this.handleMenuOpen,ref:t=>this.tooltipRef=t,rightClick:this.rightClick,part:"tooltip",position:this.position,preventScreenreader:true,tag:"span",tetherOptions:this.tetherOptions,triggerType:"click",unstyled:true},i("slot",{name:"trigger",ref:t=>this.triggerSlotRef=t,slot:"trigger"}),i("ld-menu",{part:"menu",ref:t=>this.menuRef=t},i("slot",null)))}get el(){return e(this)}static get watchers(){return{size:["updateSize"]}}};r.style=l;const d=":host{display:block}.ld-menuitem .ld-menuitem__button{display:grid;width:100%}";const u=new Map([["danger","danger-ghost"],["highlight","ghost"],["neutral","neutral-ghost"]]);const c=class{constructor(i){t(this,i);this.ldclosetooltip=s(this,"ldclosetooltip",7);this.handleClick=t=>{if(this.preventClose)return;this.ldclosetooltip.emit(t)};this.disabled=undefined;this.href=undefined;this.ldTabindex=undefined;this.preventClose=undefined;this.mode="neutral";this.size=undefined;this.target=undefined;this.clonedAttributes=undefined}async focusInner(){var t;(t=this.buttonRef)===null||t===void 0?void 0:t.focusInner()}componentWillLoad(){this.attributesObserver=a.call(this,["ld-tabindex","mode","size"])}disconnectedCallback(){if(this.attributesObserver)this.attributesObserver.disconnect()}render(){return i(n,null,i("li",{class:"ld-menuitem",part:"listitem",role:"menuitem"},i("ld-button",Object.assign({},this.clonedAttributes,{class:"ld-menuitem__button",disabled:this.disabled,href:this.href,iconOnly:false,justifyContent:"start",ldTabindex:this.ldTabindex,mode:u.get(this.mode),onClick:this.handleClick,part:"focusable button",ref:t=>this.buttonRef=t,size:this.size,target:this.target,type:"button"}),i("slot",null))))}get el(){return e(this)}};c.style=d;export{r as ld_context_menu,c as ld_menuitem};
//# sourceMappingURL=p-12046ff6.entry.js.map