{"version":3,"names":["ldSidenavSubnavShadowCss","LdSidenavSubnav","this","toggleVisibilityOnHidableContent","visible","Array","from","el","children","forEach","includes","tagName","classList","toggle","scrollToTop","smoothly","scrollerRef","onActiveChange","active","_a","updateShadows","onActiveBeforeTransitionChange","activeBeforeTransition","updateBackground","setTimeout","bgRef","handleSidenavCollapsedChange","ev","target","sidenav","detail","collapsed","handleSidenavBreakpointChange","sidenavClosable","componentWillLoad","closest","hasParentSubnav","parentElement","render","cl","getClassNames","h","Host","class","ref","style","visibility","ancestor","part"],"sources":["../src/liquid/components/ld-sidenav/ld-sidenav-subnav/ld-sidenav-subnav.shadow.css?tag=ld-sidenav-subnav&encapsulation=shadow","../src/liquid/components/ld-sidenav/ld-sidenav-subnav/ld-sidenav-subnav.tsx"],"sourcesContent":[":host {\n  --ld-sidenav-accordion-bg-col-hover: var(--ld-col-neutral-100);\n\n  position: absolute;\n  top: 0;\n  height: 100%;\n  width: 100%;\n  transform: translateX(100%);\n  display: none;\n  z-index: 1; /* makes the scrollbar of the parent scroll-container disappear, */\n  background: var(\n    --ld-sidenav-bg-color\n  ); /* which only works with a background color */\n  visibility: hidden;\n\n  &(.ld-sidenav-subnav--active) {\n    display: block;\n  }\n\n  ::slotted(\n      :where(:not(ld-sidenav-separator, ld-sidenav-navitem, ld-sidenav-subnav))\n    ) {\n    margin-bottom: var(--ld-sidenav-padding-y);\n    transition: var(--ld-sidenav-collapse-content-transition);\n    will-change: opacity, transform; /* fixes flickering on slide */\n  }\n\n  ::slotted(.ld-sidenav-subnav__hidden) {\n    transition: opacity var(--ld-sidenav-transition-duration-collapse-expand)\n        linear,\n      visibility 0s var(--ld-sidenav-transition-duration-collapse-expand) linear,\n      transform var(--ld-sidenav-transition-duration-collapse-expand) ease;\n    opacity: 0;\n    visibility: hidden;\n    transform: translateX(var(--ld-sidenav-translate-x-delta));\n  }\n\n  ::slotted(.ld-sidenav-accordion) {\n    transform: none;\n  }\n}\n\n.ld-sidenav-subnav__background {\n  opacity: 0;\n  transition: opacity var(--ld-sidenav-transition-duration) linear;\n  position: absolute;\n  inset: 0;\n  background-color: var(--ld-sidenav-bg-color);\n\n  &::before {\n    content: '';\n    position: absolute;\n    inset: 0;\n    background-color: var(--ld-sidenav-subnav-bg-color);\n  }\n\n  &--active {\n    opacity: 1;\n  }\n}\n\n:host(.ld-sidenav-subnav--has-parent-subnav) {\n  .ld-sidenav-subnav__background {\n    opacity: 1;\n  }\n}\n","import {\n  Component,\n  Element,\n  h,\n  Host,\n  Listen,\n  Method,\n  Prop,\n  State,\n  Watch,\n} from '@stencil/core'\nimport { getClassNames } from '../../../utils/getClassNames'\nimport { closest } from '../../../utils/closest'\n\n/**\n * @virtualProp ref - reference to component\n * @virtualProp {string | number} key - for tracking the node's identity when working with lists\n */\n@Component({\n  tag: 'ld-sidenav-subnav',\n  styleUrl: 'ld-sidenav-subnav.shadow.css',\n  shadow: true,\n})\nexport class LdSidenavSubnav {\n  @Element() el: HTMLElement\n  private sidenav: HTMLLdSidenavElement\n  private scrollerRef: HTMLLdSidenavScrollerInternalElement\n  private bgRef: HTMLElement\n\n  /**\n   * @internal\n   * Internal prop indicating that the subnav is about to become active which\n   * may happen before a transition finishes after which it actually becomes active.\n   */\n  @Prop() activeBeforeTransition? = false\n\n  /**\n   * @internal\n   * Internal prop indicating that the subnav is either ancestor of the\n   * currently visible subnav or the currently visible subnav itself.\n   */\n  @Prop() active? = false\n\n  /**\n   * @internal\n   * Internal prop indicating that the subnav is ancestor of the\n   * currently visible subnav.\n   */\n  @Prop() ancestor? = false\n\n  /** Used in the ld-sidenav-back component to display parent nav label. */\n  @Prop() label!: string\n\n  @State() hasParentSubnav: boolean\n\n  /** Scrolls the subnav scroll container to the top. */\n  @Method()\n  async scrollToTop(smoothly = false) {\n    this.scrollerRef.scrollToTop(smoothly)\n  }\n\n  @Watch('active')\n  onActiveChange(active) {\n    if (active) {\n      this.scrollerRef?.updateShadows()\n    }\n  }\n\n  @Watch('activeBeforeTransition')\n  onActiveBeforeTransitionChange(activeBeforeTransition) {\n    this.updateBackground(activeBeforeTransition)\n  }\n\n  private updateBackground(activeBeforeTransition: boolean) {\n    // HACK: Timeout is required to make the transition work on nav item click\n    setTimeout(() => {\n      this.bgRef.classList.toggle(\n        'ld-sidenav-subnav__background--active',\n        activeBeforeTransition\n      )\n    }, 20)\n  }\n\n  private toggleVisibilityOnHidableContent = (visible: boolean) => {\n    Array.from(this.el.children).forEach((el) => {\n      // To also hide one of the following elements,\n      // it is possible to wrap it in a div with display contents.\n      if (\n        ![\n          'LD-SIDENAV-ACCORDION',\n          'LD-SIDENAV-NAVITEM',\n          'LD-SIDENAV-SEPARATOR',\n          'LD-SIDENAV-SUBNAV',\n        ].includes(el.tagName)\n      ) {\n        el.classList.toggle('ld-sidenav-subnav__hidden', !visible)\n      }\n    })\n  }\n\n  @Listen('ldSidenavCollapsedChange', { target: 'window', passive: true })\n  handleSidenavCollapsedChange(\n    ev: CustomEvent<{\n      collapsed: boolean\n      fully: boolean\n    }>\n  ) {\n    if (ev.target !== this.sidenav) return\n    if (ev.detail.collapsed) {\n      this.scrollToTop(true)\n      this.toggleVisibilityOnHidableContent(false)\n    } else {\n      this.toggleVisibilityOnHidableContent(true)\n    }\n  }\n\n  @Listen('ldSidenavBreakpointChange', { target: 'window', passive: true })\n  handleSidenavBreakpointChange(ev: CustomEvent<boolean>) {\n    if (ev.target !== this.sidenav) return\n    const sidenavClosable = ev.detail\n    if (sidenavClosable) {\n      this.toggleVisibilityOnHidableContent(true)\n    } else {\n      this.toggleVisibilityOnHidableContent(!this.sidenav.collapsed)\n    }\n  }\n\n  componentWillLoad() {\n    this.sidenav = closest('ld-sidenav', this.el)\n    this.hasParentSubnav = this.el.parentElement.tagName === 'LD-SIDENAV-SUBNAV'\n  }\n\n  render() {\n    const cl = getClassNames([\n      'ld-sidenav-subnav',\n      this.active && 'ld-sidenav-subnav--active',\n      this.hasParentSubnav && 'ld-sidenav-subnav--has-parent-subnav',\n    ])\n\n    return (\n      <Host class={cl}>\n        <div\n          ref={(el) => (this.bgRef = el)}\n          class=\"ld-sidenav-subnav__background\"\n        ></div>\n        <ld-sidenav-scroller-internal\n          style={{\n            visibility: !this.active || this.ancestor ? 'hidden' : 'visible',\n          }}\n          part=\"scroll-container\"\n          ref={(el) => (this.scrollerRef = el)}\n        >\n          <slot></slot>\n        </ld-sidenav-scroller-internal>\n      </Host>\n    )\n  }\n}\n"],"mappings":"iIAAA,MAAMA,EAA2B,s3C,MCuBpBC,EAAe,M,yBA4DlBC,KAAAC,iCAAoCC,IAC1CC,MAAMC,KAAKJ,KAAKK,GAAGC,UAAUC,SAASF,IAGpC,IACG,CACC,uBACA,qBACA,uBACA,qBACAG,SAASH,EAAGI,SACd,CACAJ,EAAGK,UAAUC,OAAO,6BAA8BT,E,IAEpD,E,4BA/D8B,M,YAOhB,M,cAOE,M,oDASpB,iBAAMU,CAAYC,EAAW,OAC3Bb,KAAKc,YAAYF,YAAYC,E,CAI/B,cAAAE,CAAeC,G,MACb,GAAIA,EAAQ,EACVC,EAAAjB,KAAKc,eAAW,MAAAG,SAAA,SAAAA,EAAEC,e,EAKtB,8BAAAC,CAA+BC,GAC7BpB,KAAKqB,iBAAiBD,E,CAGhB,gBAAAC,CAAiBD,GAEvBE,YAAW,KACTtB,KAAKuB,MAAMb,UAAUC,OACnB,wCACAS,EACD,GACA,G,CAqBL,4BAAAI,CACEC,GAKA,GAAIA,EAAGC,SAAW1B,KAAK2B,QAAS,OAChC,GAAIF,EAAGG,OAAOC,UAAW,CACvB7B,KAAKY,YAAY,MACjBZ,KAAKC,iCAAiC,M,KACjC,CACLD,KAAKC,iCAAiC,K,EAK1C,6BAAA6B,CAA8BL,GAC5B,GAAIA,EAAGC,SAAW1B,KAAK2B,QAAS,OAChC,MAAMI,EAAkBN,EAAGG,OAC3B,GAAIG,EAAiB,CACnB/B,KAAKC,iCAAiC,K,KACjC,CACLD,KAAKC,kCAAkCD,KAAK2B,QAAQE,U,EAIxD,iBAAAG,GACEhC,KAAK2B,QAAUM,EAAQ,aAAcjC,KAAKK,IAC1CL,KAAKkC,gBAAkBlC,KAAKK,GAAG8B,cAAc1B,UAAY,mB,CAG3D,MAAA2B,GACE,MAAMC,EAAKC,EAAc,CACvB,oBACAtC,KAAKgB,QAAU,4BACfhB,KAAKkC,iBAAmB,yCAG1B,OACEK,EAACC,EAAI,CAACC,MAAOJ,GACXE,EAAA,OACEG,IAAMrC,GAAQL,KAAKuB,MAAQlB,EAC3BoC,MAAM,kCAERF,EAAA,gCACEI,MAAO,CACLC,YAAa5C,KAAKgB,QAAUhB,KAAK6C,SAAW,SAAW,WAEzDC,KAAK,mBACLJ,IAAMrC,GAAQL,KAAKc,YAAcT,GAEjCkC,EAAA,c"}