{"version":3,"names":["isFalsy","value","undefined","cloneAttributes","attributesToIgnore","attributesToIgnoreSet","Set","attributesToClone","attr","this","el","attributes","has","name","valueToClone","clonedAttributes","callback","mutationsList","mutation","attributeName","attrValue","getAttribute","Object","assign","observer","MutationObserver","observe","subtree","childList"],"sources":["../src/liquid/utils/cloneAttributes.ts"],"sourcesContent":["function isFalsy(value: string | null | undefined) {\n  return value === undefined || value === null || value === 'false'\n}\n\nexport function cloneAttributes(attributesToIgnore: string[] = []) {\n  const attributesToIgnoreSet = new Set([\n    'style',\n    'id',\n    'class',\n    'slot',\n    'part',\n    ...attributesToIgnore,\n  ])\n\n  // Get attributes not in props.\n  const attributesToClone = {}\n  for (const attr of this.el.attributes) {\n    if (attributesToIgnoreSet.has(attr.name) || isFalsy(attr.value)) {\n      continue\n    }\n    const valueToClone = attr.value === '' ? true : attr.value\n    attributesToClone[attr.name] = valueToClone\n  }\n\n  // Update cloned attributes state.\n  this.clonedAttributes = attributesToClone\n\n  // Set up attributes observer.\n  const callback = (mutationsList) => {\n    // Update cloned attributes state.\n    for (const mutation of mutationsList) {\n      const { attributeName } = mutation\n      if (!attributesToIgnoreSet.has(attributeName)) {\n        const attrValue = this.el.getAttribute(attributeName)\n        if (isFalsy(attrValue)) {\n          delete this.clonedAttributes[attributeName]\n        } else {\n          this.clonedAttributes[attributeName] = attrValue\n        }\n      }\n    }\n\n    // Trigger state update.\n    this.clonedAttributes = { ...this.clonedAttributes }\n  }\n  const observer = new MutationObserver(callback)\n  observer.observe(this.el, {\n    subtree: false,\n    childList: false,\n    attributes: true,\n  })\n\n  return observer\n}\n"],"mappings":"AAAA,SAASA,EAAQC,GACf,OAAOA,IAAUC,WAAaD,IAAU,MAAQA,IAAU,OAC5D,C,SAEgBE,EAAgBC,EAA+B,IAC7D,MAAMC,EAAwB,IAAIC,IAAI,CACpC,QACA,KACA,QACA,OACA,UACGF,IAIL,MAAMG,EAAoB,GAC1B,IAAK,MAAMC,KAAQC,KAAKC,GAAGC,WAAY,CACrC,GAAIN,EAAsBO,IAAIJ,EAAKK,OAASb,EAAQQ,EAAKP,OAAQ,CAC/D,Q,CAEF,MAAMa,EAAeN,EAAKP,QAAU,GAAK,KAAOO,EAAKP,MACrDM,EAAkBC,EAAKK,MAAQC,C,CAIjCL,KAAKM,iBAAmBR,EAGxB,MAAMS,EAAYC,IAEhB,IAAK,MAAMC,KAAYD,EAAe,CACpC,MAAME,cAAEA,GAAkBD,EAC1B,IAAKb,EAAsBO,IAAIO,GAAgB,CAC7C,MAAMC,EAAYX,KAAKC,GAAGW,aAAaF,GACvC,GAAInB,EAAQoB,GAAY,QACfX,KAAKM,iBAAiBI,E,KACxB,CACLV,KAAKM,iBAAiBI,GAAiBC,C,GAM7CX,KAAKM,iBAAgBO,OAAAC,OAAA,GAAQd,KAAKM,iBAAkB,EAEtD,MAAMS,EAAW,IAAIC,iBAAiBT,GACtCQ,EAASE,QAAQjB,KAAKC,GAAI,CACxBiB,QAAS,MACTC,UAAW,MACXjB,WAAY,OAGd,OAAOa,CACT,Q"}