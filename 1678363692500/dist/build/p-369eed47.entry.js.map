{"version":3,"names":["ldTableCss","LdTable","constructor","hostRef","this","getCellValue","tr","columnIndex","children","textContent","trim","getComparer","sortOrder","tr1","tr2","str1","str2","num1","parseFloat","replaceAll","num2","isNaN","localeCompare","handleTableSort","ev","ldTableHeader","closest","target","Array","from","parentNode","forEach","th","index","detail","resetSort","defaultPrevented","ldTableBody","el","querySelector","querySelectorAll","sort","appendChild","handleTableSelectAll","selected","async","allRowsInTableBody","allSelected","every","noneSelected","ldTableHead","firstRowInHead","indeterminate","componentDidLoad","hasSelectionDisabled","some","selectionDisabled","render","cl","getClassNames","h","Host","class","role","style","border","name","part","ref","tableRef"],"sources":["../src/liquid/components/ld-table/ld-table.css?tag=ld-table&encapsulation=shadow","../src/liquid/components/ld-table/ld-table.tsx"],"sourcesContent":[":host,\n.ld-table {\n  /* colors */\n  --ld-table-bg-col: var(--ld-col-wht);\n  --ld-table-border-col: var(--ld-col-neutral-200);\n  --ld-table-toolbar-bg-col: var(--ld-col-neutral-050);\n\n  /* layout */\n  --ld-table-layout: auto;\n  --ld-table-row-outline-width: var(--ld-sp-1);\n  --ld-table-row-outline: var(--ld-table-row-outline-width)\n    var(--ld-table-border-col) solid;\n  --ld-table-row-outline-half: calc(0.5 * var(--ld-table-row-outline-width))\n    var(--ld-table-border-col) solid;\n  --ld-table-cell-padding-x: var(--ld-sp-16);\n  --ld-table-cell-padding-y: var(--ld-sp-12);\n  --ld-table-toolbar-padding-y: var(--ld-sp-16);\n  --ld-table-typo: var(--ld-typo-h6);\n  --ld-table-white-space: nowrap;\n\n  /* The table head gradient fixes the position sticky quirk with Safari by using background-image. */\n  /* Note that 0.75 is a special width that works well in all browsers. */\n  --ld-table-head-gradient: linear-gradient(\n    to top,\n    var(--ld-table-border-col),\n    var(--ld-table-border-col) calc(var(--ld-sp-1) * 0.75),\n    var(--ld-table-bg-col) calc(var(--ld-sp-1) * 0.75),\n    var(--ld-table-bg-col)\n  );\n\n  --ld-table-selection-wrapper-border-width-top: calc(var(--ld-sp-1) * 0.5);\n  --ld-table-selection-wrapper-border-width-bottom: calc(var(--ld-sp-1) * 0.5);\n\n  /* Fix for Safari overflow hidden with border radius quirk. */\n  -webkit-mask-image: -webkit-radial-gradient(white, black);\n\n  background-color: var(--ld-table-border-col);\n  border-radius: var(--ld-br-l);\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n  font: var(--ld-table-typo);\n  overflow: hidden;\n  position: relative;\n\n  table {\n    background-color: var(--ld-table-bg-col);\n    border-collapse: collapse;\n    table-layout: var(--ld-table-layout);\n    text-align: left;\n    width: 100%;\n    white-space: var(--ld-table-white-space);\n  }\n\n  tbody,\n  thead,\n  td,\n  th {\n    background-color: inherit;\n    font: inherit;\n  }\n\n  .ld-table__toolbar,\n  ::slotted(ld-table-toolbar) {\n    align-items: center;\n    background-color: var(--ld-table-toolbar-bg-col);\n    border-top-left-radius: calc(var(--ld-br-l) - 1.25 * var(--ld-sp-1));\n    border-top-right-radius: calc(var(--ld-br-l) - 1.25 * var(--ld-sp-1));\n    box-sizing: border-box;\n    display: flex;\n    gap: var(--ld-sp-12);\n    justify-content: flex-start;\n    min-height: var(--ld-sp-40);\n    overflow-x: auto;\n    overflow-y: hidden;\n    padding-inline: var(--ld-table-cell-padding-x);\n    position: relative;\n    white-space: nowrap;\n    z-index: 3;\n\n    > ld-pagination {\n      flex-shrink: 0;\n      padding-bottom: var(--ld-sp-8);\n      padding-top: var(--ld-sp-4);\n      overflow-x: hidden;\n      transform: translateY(var(--ld-sp-2));\n\n      &:first-child {\n        margin-left: calc(-1 * var(--ld-sp-8));\n      }\n      &:last-child {\n        margin-right: calc(-1 * var(--ld-sp-8));\n      }\n    }\n  }\n\n  .ld-table__toolbar,\n  ::slotted(ld-table-toolbar),\n  thead {\n    outline: var(--ld-table-row-outline);\n  }\n\n  tr {\n    outline: var(--ld-table-row-outline-half);\n  }\n\n  td,\n  th {\n    padding-block: var(--ld-table-cell-padding-y);\n    padding-inline: var(--ld-table-cell-padding-x);\n  }\n\n  thead {\n    background-image: var(--ld-table-head-gradient);\n    position: sticky;\n    top: 0;\n    z-index: 2;\n  }\n}\n\n/* Increase specificity to overwrite Tailwind's preflight reset. */\n.ld-table.ld-table {\n  border: solid var(--ld-sp-1) var(--ld-table-border-col);\n}\n\n.ld-table__scroll-container {\n  height: inherit;\n  max-height: inherit;\n  overflow: auto;\n}\n","import {\n  Component,\n  Element,\n  Event,\n  EventEmitter,\n  h,\n  Host,\n  Listen,\n} from '@stencil/core'\nimport { getClassNames } from '../../utils/getClassNames'\nimport { closest } from '../../utils/closest'\n\n/**\n * @part scroll-container - the scroll-container wrapping the table element\n * @part table - the table element\n * @virtualProp ref - reference to component\n * @virtualProp {string | number} key - for tracking the node's identity when working with lists\n */\n@Component({\n  tag: 'ld-table',\n  styleUrl: 'ld-table.css',\n  shadow: true,\n})\nexport class LdTable {\n  @Element() el: HTMLLdTableElement\n  tableRef: HTMLTableElement\n\n  // The following events is not used within the ld-table component itself.\n  // Their only purpose is to create type definitions on the ld-table component,\n  // in order to be able to add inline listeners in TSX, for listening\n  // on the events bubling up from ld-table-* sub-components.\n\n  /** Emitted from ld-table-header with culumn index and sort order. */\n  @Event() ldTableSort: EventEmitter<{\n    columnIndex: number\n    sortOrder: 'asc' | 'desc'\n  }>\n\n  /** Emitted from ld-table-row with row index and selected state. */\n  @Event() ldTableSelect: EventEmitter<{\n    rowIndex: number\n    selected: boolean\n  }>\n\n  /** Emitted from ld-table-row with selected state. */\n  @Event() ldTableSelectAll: EventEmitter<{\n    selected: boolean\n  }>\n\n  @Listen('ldTableSort')\n  handleTableSort(\n    ev: CustomEvent<{\n      columnIndex: number\n      sortOrder?: 'asc' | 'desc'\n    }>\n  ) {\n    const ldTableHeader = closest('ld-table-header', ev.target as HTMLElement)\n    Array.from(ldTableHeader.parentNode.children).forEach(\n      (th: HTMLLdTableHeaderElement, index) => {\n        if (index !== ev.detail.columnIndex) {\n          th.resetSort()\n        }\n      }\n    )\n\n    if (ev.defaultPrevented) return\n\n    const ldTableBody = this.el.querySelector('ld-table-body')\n    Array.from(ldTableBody.querySelectorAll('ld-table-row'))\n      .sort(this.getComparer(ev.detail.columnIndex, ev.detail.sortOrder))\n      .forEach((tr) => ldTableBody.appendChild(tr))\n  }\n\n  @Listen('ldTableSelectAll')\n  handleTableSelectAll(\n    ev: CustomEvent<{\n      selected: boolean\n    }>\n  ) {\n    if (ev.defaultPrevented) return\n\n    // Select or deselect all.\n    const ldTableBody = this.el.querySelector('ld-table-body')\n    Array.from(ldTableBody.querySelectorAll('ld-table-row')).forEach(\n      (tr) => (tr.selected = ev.detail.selected)\n    )\n  }\n\n  @Listen('ldTableSelect')\n  async handleTableSelect(\n    ev: CustomEvent<{\n      selected: boolean\n    }>\n  ) {\n    if (ev.defaultPrevented) return\n\n    // Check if all are selected and update select all checkbox.\n    const ldTableBody = this.el.querySelector('ld-table-body')\n    const allRowsInTableBody = ldTableBody.querySelectorAll('ld-table-row')\n    const allSelected = Array.from(allRowsInTableBody).every(\n      (tr) => tr.selected\n    )\n    const noneSelected = Array.from(allRowsInTableBody).every(\n      (tr) => !tr.selected\n    )\n    const ldTableHead = this.el.querySelector('ld-table-head')\n    const firstRowInHead = ldTableHead.querySelector('ld-table-row')\n    firstRowInHead.selected = allSelected\n    firstRowInHead.indeterminate = !allSelected && !noneSelected\n  }\n\n  getCellValue = (tr: HTMLLdTableRowElement, columnIndex: number) =>\n    tr.children[columnIndex].textContent.trim()\n\n  getComparer =\n    (columnIndex: number, sortOrder: 'asc' | 'desc') =>\n    (tr1: HTMLLdTableRowElement, tr2: HTMLLdTableRowElement) => {\n      const str1 = this.getCellValue(\n        sortOrder === 'asc' ? tr1 : tr2,\n        columnIndex\n      )\n      const str2 = this.getCellValue(\n        sortOrder === 'asc' ? tr2 : tr1,\n        columnIndex\n      )\n      const num1 = parseFloat(str1.replaceAll(/,/g, ''))\n      const num2 = parseFloat(str2.replaceAll(/,/g, ''))\n      if (!isNaN(num1) && !isNaN(num2)) {\n        return num1 - num2\n      }\n      return str1.localeCompare(str2)\n    }\n\n  componentDidLoad() {\n    const hasSelectionDisabled = Array.from(\n      this.el.querySelectorAll('ld-table-row')\n    ).some((tr) => tr.selectionDisabled)\n    if (hasSelectionDisabled) {\n      const firstRowInHead = this.el.querySelector<HTMLLdTableRowElement>(\n        'ld-table-head ld-table-row'\n      )\n      if (firstRowInHead) {\n        firstRowInHead.selectionDisabled = true\n      }\n    }\n  }\n\n  render() {\n    const cl = getClassNames(['ld-table'])\n\n    return (\n      <Host\n        class={cl}\n        role=\"figure\"\n        style={{\n          // Increase specificity to overwrite Tailwind's preflight reset.\n          border: 'solid var(--ld-sp-1) var(--ld-table-border-col)',\n        }}\n      >\n        <slot name=\"toolbar\" />\n        <div part=\"scroll-container\" class=\"ld-table__scroll-container\">\n          <table part=\"table\" ref={(el) => (this.tableRef = el)}>\n            <slot />\n          </table>\n        </div>\n      </Host>\n    )\n  }\n}\n"],"mappings":"wIAAA,MAAMA,EAAa,omH,MCuBNC,EAAO,MALpBC,YAAAC,G,mJA6FEC,KAAAC,aAAe,CAACC,EAA2BC,IACzCD,EAAGE,SAASD,GAAaE,YAAYC,OAEvCN,KAAAO,YACE,CAACJ,EAAqBK,IACtB,CAACC,EAA4BC,KAC3B,MAAMC,EAAOX,KAAKC,aAChBO,IAAc,MAAQC,EAAMC,EAC5BP,GAEF,MAAMS,EAAOZ,KAAKC,aAChBO,IAAc,MAAQE,EAAMD,EAC5BN,GAEF,MAAMU,EAAOC,WAAWH,EAAKI,WAAW,KAAM,KAC9C,MAAMC,EAAOF,WAAWF,EAAKG,WAAW,KAAM,KAC9C,IAAKE,MAAMJ,KAAUI,MAAMD,GAAO,CAChC,OAAOH,EAAOG,C,CAEhB,OAAOL,EAAKO,cAAcN,EAAK,C,CAhFnCO,gBACEC,GAKA,MAAMC,EAAgBC,EAAQ,kBAAmBF,EAAGG,QACpDC,MAAMC,KAAKJ,EAAcK,WAAWtB,UAAUuB,SAC5C,CAACC,EAA8BC,KAC7B,GAAIA,IAAUT,EAAGU,OAAO3B,YAAa,CACnCyB,EAAGG,W,KAKT,GAAIX,EAAGY,iBAAkB,OAEzB,MAAMC,EAAcjC,KAAKkC,GAAGC,cAAc,iBAC1CX,MAAMC,KAAKQ,EAAYG,iBAAiB,iBACrCC,KAAKrC,KAAKO,YAAYa,EAAGU,OAAO3B,YAAaiB,EAAGU,OAAOtB,YACvDmB,SAASzB,GAAO+B,EAAYK,YAAYpC,I,CAI7CqC,qBACEnB,GAIA,GAAIA,EAAGY,iBAAkB,OAGzB,MAAMC,EAAcjC,KAAKkC,GAAGC,cAAc,iBAC1CX,MAAMC,KAAKQ,EAAYG,iBAAiB,iBAAiBT,SACtDzB,GAAQA,EAAGsC,SAAWpB,EAAGU,OAAOU,U,CAKrCC,wBACErB,GAIA,GAAIA,EAAGY,iBAAkB,OAGzB,MAAMC,EAAcjC,KAAKkC,GAAGC,cAAc,iBAC1C,MAAMO,EAAqBT,EAAYG,iBAAiB,gBACxD,MAAMO,EAAcnB,MAAMC,KAAKiB,GAAoBE,OAChD1C,GAAOA,EAAGsC,WAEb,MAAMK,EAAerB,MAAMC,KAAKiB,GAAoBE,OACjD1C,IAAQA,EAAGsC,WAEd,MAAMM,EAAc9C,KAAKkC,GAAGC,cAAc,iBAC1C,MAAMY,EAAiBD,EAAYX,cAAc,gBACjDY,EAAeP,SAAWG,EAC1BI,EAAeC,eAAiBL,IAAgBE,C,CAyBlDI,mBACE,MAAMC,EAAuB1B,MAAMC,KACjCzB,KAAKkC,GAAGE,iBAAiB,iBACzBe,MAAMjD,GAAOA,EAAGkD,oBAClB,GAAIF,EAAsB,CACxB,MAAMH,EAAiB/C,KAAKkC,GAAGC,cAC7B,8BAEF,GAAIY,EAAgB,CAClBA,EAAeK,kBAAoB,I,GAKzCC,SACE,MAAMC,EAAKC,EAAc,CAAC,aAE1B,OACEC,EAACC,EAAI,CACHC,MAAOJ,EACPK,KAAK,SACLC,MAAO,CAELC,OAAQ,oDAGVL,EAAA,QAAMM,KAAK,YACXN,EAAA,OAAKO,KAAK,mBAAmBL,MAAM,8BACjCF,EAAA,SAAOO,KAAK,QAAQC,IAAM9B,GAAQlC,KAAKiE,SAAW/B,GAChDsB,EAAA,e"}