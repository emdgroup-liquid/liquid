{"version":3,"names":["docsTocCss","DocsToc","createObserver","links","options","rootMargin","threshold","callback","entries","this","handleObserver","IntersectionObserver","i","length","entry","target","isIntersecting","intersectionRatio","visibleId","getAttribute","updateLinks","includes","find","link","href","split","heading","document","getElementById","tagName","map","classList","remove","add","handleClick","ev","preventDefault","_a","el","querySelector","id","replace","headings","setAttribute","focus","window","scroll","top","offsetTop","componentDidLoad","setTimeout","Array","from","querySelectorAll","observer","observe","render","h","Host","class"],"sources":["../src/docs/components/docs-toc/docs-toc.css?tag=docs-toc","../src/docs/components/docs-toc/docs-toc.tsx"],"sourcesContent":["@define-mixin docs-toc-ui-light {\n  .docs-toc__content::before {\n    background-color: var(--ld-col-neutral-050);\n  }\n}\n@define-mixin docs-toc-ui-dark {\n  .docs-toc__content::before {\n    background-color: var(--ld-col-neutral-400);\n  }\n}\n\n@mixin docs-toc-ui-light;\n\n@media (prefers-color-scheme: dark) {\n  @mixin docs-toc-ui-dark;\n}\n.docs-ui-dark {\n  @mixin docs-toc-ui-dark;\n}\n.docs-ui-light {\n  @mixin docs-toc-ui-light;\n}\n\n.docs-toc {\n  --docs-toc-heading-height: 2rem;\n}\n\n.docs-toc__content {\n  overflow: hidden;\n  padding: var(--ld-sp-8) var(--ld-sp-24) var(--ld-sp-24) 0;\n\n  &::before {\n    content: '';\n    position: absolute;\n    left: 0;\n    top: calc(1.25rem + var(--docs-toc-heading-height));\n    bottom: 1.25rem;\n    width: 0.1875rem;\n    display: block;\n    transform: translateY(-0.4rem);\n    border-radius: var(--ld-br-full);\n  }\n}\n\n.docs-toc__nav {\n  max-height: calc(100vh - var(--docs-toc-top) - 4rem);\n  overflow: visible scroll;\n  position: relative;\n  padding-right: 3rem;\n  margin-right: -3rem;\n\n  ol {\n    list-style: none;\n    padding-left: var(--ld-sp-24);\n  }\n\n  li {\n    margin-top: var(--ld-sp-12);\n  }\n\n  a {\n    font: var(--ld-typo-label-s);\n    text-decoration: none;\n\n    &::before {\n      content: '';\n      position: absolute;\n      left: 0;\n      height: 2.2rem;\n      width: 0.1875rem;\n      display: block;\n      transform: translateY(-0.4rem);\n      border-radius: var(--ld-br-full);\n    }\n\n    &.docs-toc__link--is-active,\n    &.docs-toc__link--is-target {\n      color: var(--ld-thm-secondary);\n    }\n\n    &.docs-toc__link--is-active {\n      &::before {\n        background-color: var(--ld-thm-secondary);\n        z-index: 1;\n      }\n    }\n\n    &[href='#methods'] + ol a {\n      word-break: break-all;\n    }\n  }\n}\n\n[href='#overview'],\n[href='#graph'],\n[href='#shadow-parts'] {\n  display: none;\n\n  & + ol {\n    display: none;\n  }\n}\n\n.docs-toc__heading {\n  display: block;\n  font: var(--ld-typo-cap-m);\n  font-weight: 400;\n  height: var(--docs-toc-heading-height);\n  text-transform: uppercase;\n}\n","import { Component, h, Host, Element, Listen, State } from '@stencil/core'\n\n/** @internal **/\n@Component({\n  tag: 'docs-toc',\n  styleUrl: 'docs-toc.css',\n  shadow: false,\n})\nexport class DocsToc {\n  @Element() el: HTMLElement\n  @State() headings: HTMLElement[]\n\n  private createObserver(links) {\n    const options = {\n      rootMargin: '-60px 0px -70% 0px',\n      threshold: 1,\n    }\n    const callback = (entries) => this.handleObserver(entries, links)\n    return new IntersectionObserver(callback, options)\n  }\n\n  private handleObserver(entries, links) {\n    for (let i = entries.length; i--; ) {\n      const entry = entries[i]\n      const { target, isIntersecting, intersectionRatio } = entry\n      if (isIntersecting && intersectionRatio >= 1) {\n        const visibleId = target.getAttribute('id')\n        this.updateLinks(visibleId, links)\n        return\n      }\n    }\n  }\n\n  private updateLinks(visibleId, links) {\n    if (\n      ['overview', 'shadow-parts', 'graph'].includes(visibleId) ||\n      !links.find((link) => link.href.split('#')[1] === visibleId)\n    ) {\n      return\n    }\n\n    const heading = document.getElementById(visibleId)\n    if (heading && (heading as HTMLElement).tagName === 'H1') {\n      links.map((link) => {\n        link.classList.remove('docs-toc__link--is-active')\n      })\n      links[0].classList.add('docs-toc__link--is-active')\n      return\n    }\n\n    links.map((link) => {\n      const href = link.getAttribute('href')\n      link.classList.remove('docs-toc__link--is-active')\n      if (href === `#${visibleId}`) {\n        link.classList.add('docs-toc__link--is-active')\n      }\n    })\n  }\n\n  @Listen('click', { capture: true })\n  handleClick(ev) {\n    if ((ev.target as HTMLElement).tagName !== 'A') return\n\n    ev.preventDefault()\n    this.el\n      .querySelector('.docs-toc__link--is-active')\n      ?.classList.remove('docs-toc__link--is-active')\n    ev.target.classList.add('docs-toc__link--is-active')\n    const id = ev.target.getAttribute('href').replace('#', '')\n    const heading = this.headings.find(\n      (heading) => heading.getAttribute('id') === id\n    )\n    heading.setAttribute('tabindex', '-1')\n    heading.focus()\n\n    window.scroll({\n      top: heading.offsetTop - 80,\n    })\n  }\n\n  componentDidLoad() {\n    // Generating a list of heading links\n    setTimeout(() => {\n      this.headings = Array.from(\n        document.querySelectorAll('#main > h1, #main > h2, #main > h3')\n      )\n\n      // Adding an Intersection Observer\n      const links = Array.from(this.el.querySelectorAll('a'))\n      const observer = this.createObserver(links)\n      this.headings.map((heading) => observer.observe(heading))\n    })\n  }\n\n  render() {\n    return (\n      <Host class=\"docs-toc\">\n        <aside class=\"docs-toc__content\">\n          <h2 class=\"docs-toc__heading\" aria-label=\"Content\">\n            Content\n          </h2>\n          <slot></slot>\n        </aside>\n      </Host>\n    )\n  }\n}\n"],"mappings":"yDAAA,MAAMA,EAAa,uwD,MCQNC,EAAO,M,iDAIV,cAAAC,CAAeC,GACrB,MAAMC,EAAU,CACdC,WAAY,qBACZC,UAAW,GAEb,MAAMC,EAAYC,GAAYC,KAAKC,eAAeF,EAASL,GAC3D,OAAO,IAAIQ,qBAAqBJ,EAAUH,E,CAGpC,cAAAM,CAAeF,EAASL,GAC9B,IAAK,IAAIS,EAAIJ,EAAQK,OAAQD,KAAO,CAClC,MAAME,EAAQN,EAAQI,GACtB,MAAMG,OAAEA,EAAMC,eAAEA,EAAcC,kBAAEA,GAAsBH,EACtD,GAAIE,GAAkBC,GAAqB,EAAG,CAC5C,MAAMC,EAAYH,EAAOI,aAAa,MACtCV,KAAKW,YAAYF,EAAWf,GAC5B,M,GAKE,WAAAiB,CAAYF,EAAWf,GAC7B,GACE,CAAC,WAAY,eAAgB,SAASkB,SAASH,KAC9Cf,EAAMmB,MAAMC,GAASA,EAAKC,KAAKC,MAAM,KAAK,KAAOP,IAClD,CACA,M,CAGF,MAAMQ,EAAUC,SAASC,eAAeV,GACxC,GAAIQ,GAAYA,EAAwBG,UAAY,KAAM,CACxD1B,EAAM2B,KAAKP,IACTA,EAAKQ,UAAUC,OAAO,4BAA4B,IAEpD7B,EAAM,GAAG4B,UAAUE,IAAI,6BACvB,M,CAGF9B,EAAM2B,KAAKP,IACT,MAAMC,EAAOD,EAAKJ,aAAa,QAC/BI,EAAKQ,UAAUC,OAAO,6BACtB,GAAIR,IAAS,IAAIN,IAAa,CAC5BK,EAAKQ,UAAUE,IAAI,4B,KAMzB,WAAAC,CAAYC,G,MACV,GAAKA,EAAGpB,OAAuBc,UAAY,IAAK,OAEhDM,EAAGC,kBACHC,EAAA5B,KAAK6B,GACFC,cAAc,iCAA6B,MAAAF,SAAA,SAAAA,EAC1CN,UAAUC,OAAO,6BACrBG,EAAGpB,OAAOgB,UAAUE,IAAI,6BACxB,MAAMO,EAAKL,EAAGpB,OAAOI,aAAa,QAAQsB,QAAQ,IAAK,IACvD,MAAMf,EAAUjB,KAAKiC,SAASpB,MAC3BI,GAAYA,EAAQP,aAAa,QAAUqB,IAE9Cd,EAAQiB,aAAa,WAAY,MACjCjB,EAAQkB,QAERC,OAAOC,OAAO,CACZC,IAAKrB,EAAQsB,UAAY,I,CAI7B,gBAAAC,GAEEC,YAAW,KACTzC,KAAKiC,SAAWS,MAAMC,KACpBzB,SAAS0B,iBAAiB,uCAI5B,MAAMlD,EAAQgD,MAAMC,KAAK3C,KAAK6B,GAAGe,iBAAiB,MAClD,MAAMC,EAAW7C,KAAKP,eAAeC,GACrCM,KAAKiC,SAASZ,KAAKJ,GAAY4B,EAASC,QAAQ7B,IAAS,G,CAI7D,MAAA8B,GACE,OACEC,EAACC,EAAI,CAACC,MAAM,YACVF,EAAA,SAAOE,MAAM,qBACXF,EAAA,MAAIE,MAAM,oBAAmB,aAAY,WAAS,WAGlDF,EAAA,c"}