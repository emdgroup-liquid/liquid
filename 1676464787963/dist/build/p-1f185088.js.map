{"version":3,"names":["getAssetPath","path","assetBasePath","_a","document","head","querySelector","dataset","ldAssetPath","window","__LD_ASSET_PATH__","assetPath","startsWith","substring","endsWith","assetCache","requestCache","async","fetchPattern","patternName","fetchAsset","fetchIcon","iconName","fetch","then","resp","text","catch","err","console","error","content"],"sources":["./src/liquid/utils/assetPath.ts","./src/liquid/utils/fetchAsset.ts"],"sourcesContent":["import { Build } from '@stencil/core'\n\n/**\n * Reads components asset path config from meta tag or global variable.\n * This is a workaround until the following issues are resolved:\n * https://github.com/ionic-team/stencil/issues/3470\n * https://github.com/ionic-team/stencil-ds-output-targets/issues/186\n */\nexport const getAssetPath = (path: string) => {\n  const assetBasePath = Build.isTesting\n    ? '/dist/liquid'\n    : document.head.querySelector<HTMLMetaElement>('meta[data-ld-asset-path]')\n        ?.dataset.ldAssetPath ||\n      window.__LD_ASSET_PATH__ ||\n      '/'\n  let assetPath = path\n\n  if (path.startsWith('./')) {\n    assetPath = path.substring(2)\n  }\n\n  if (!assetBasePath.endsWith('/')) {\n    assetPath = '/' + assetPath\n  }\n\n  return assetBasePath + assetPath\n}\n","import { getAssetPath } from './assetPath'\n\nconst assetCache = {}\nconst requestCache = {}\n\nexport async function fetchPattern(patternName: string): Promise<string> {\n  return await fetchAsset(`${patternName}-cell.svg`)\n}\n\nexport async function fetchIcon(iconName: string): Promise<string> {\n  return await fetchAsset(`${iconName}.svg`)\n}\n\nexport async function fetchAsset(path: string): Promise<string> {\n  if (assetCache[path]) {\n    return assetCache[path]\n  }\n\n  if (!requestCache[path]) {\n    requestCache[path] = fetch(`${getAssetPath('./assets')}/${path}`)\n      .then((resp) => resp.text())\n      .catch((err) => {\n        console.error(`\"${path}\" could not be fetched`, err)\n        return ''\n      })\n  }\n\n  const content = await requestCache[path]\n  assetCache[path] = content\n\n  return content\n}\n"],"mappings":"AAQO,MAAMA,EAAgBC,I,MAC3B,MAAMC,IAEFC,EAAAC,SAASC,KAAKC,cAA+B,+BAA2B,MAAAH,SAAA,SAAAA,EACpEI,QAAQC,cACZC,OAAOC,mBACP,IACJ,IAAIC,EAAYV,EAEhB,GAAIA,EAAKW,WAAW,MAAO,CACzBD,EAAYV,EAAKY,UAAU,E,CAG7B,IAAKX,EAAcY,SAAS,KAAM,CAChCH,EAAY,IAAMA,C,CAGpB,OAAOT,EAAgBS,CAAS,ECvBlC,MAAMI,EAAa,GACnB,MAAMC,EAAe,GAEdC,eAAeC,EAAaC,GACjC,aAAaC,EAAW,GAAGD,aAC7B,CAEOF,eAAeI,EAAUC,GAC9B,aAAaF,EAAW,GAAGE,QAC7B,CAEOL,eAAeG,EAAWnB,GAC/B,GAAIc,EAAWd,GAAO,CACpB,OAAOc,EAAWd,E,CAGpB,IAAKe,EAAaf,GAAO,CACvBe,EAAaf,GAAQsB,MAAM,GAAGvB,EAAa,eAAeC,KACvDuB,MAAMC,GAASA,EAAKC,SACpBC,OAAOC,IACNC,QAAQC,MAAM,IAAI7B,0BAA8B2B,GAChD,MAAO,EAAE,G,CAIf,MAAMG,QAAgBf,EAAaf,GACnCc,EAAWd,GAAQ8B,EAEnB,OAAOA,CACT,Q"}