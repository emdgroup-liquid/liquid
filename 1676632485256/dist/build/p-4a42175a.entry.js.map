{"version":3,"names":["ldOptionShadowCss","LdOption","componentWillLoad","this","selected","el","setAttribute","render","h","Host","class","ldSelectCss","LdSelect","isObserverEnabled","updateTriggerMoreIndicator","refresh","multiple","maxRows","hasMore","requestAnimationFrame","selectionListRef","selectionListItems","Array","from","querySelectorAll","_a","querySelector","remove","forEach","classList","isOverflowing","moreItem","document","createElement","add","prepend","maxOffset","overflowingTotal","overflowing","offsetTop","hideLastVisibleIfMoreIndicatorOverflowing","innerText","notOverflowing","lastNotOverflowing","slice","isLdOption","includes","tagName","updatePopperWidth","listboxRef","style","setProperty","selectRef","getBoundingClientRect","width","updatePopperShadowHeight","ldPopper","updateShadowHeight","triggerRef","height","updatePopperTheme","themeEl","closest","setTimeout","theme","toString","split","find","cl","startsWith","substring","updatePopper","popper","initPopper","position","customTetherOptions","tetherOptions","JSON","parse","Object","assign","classPrefix","element","target","attachment","targetAttachment","offset","mode","constraints","to","pin","Tether","initOptions","initialized","children","internalOptionsContainerRef","length","TypeError","selectedChildren","filter","child","internalOptionsHTML","ldOption","classStr","size","preventDeselection","hidden","value","disabled","innerHTML","replaceAll","map","text","textContent","updateSelectedHiddenInputs","selectedValues","inputs","hiddenInput","index","indexOf","splice","appendHiddenInput","name","type","undefined","appendChild","handleSlotChange","mutationsList","some","record","oldValues","newValues","emitEventsAndUpdateHidden","initObserver","observer","MutationObserver","observe","subtree","childList","attributes","getFilterInput","shadowRoot","togglePopper","expanded","enable","disable","focusInner","clearSelection","option","expandAndFocus","toFocus","hasAttribute","focus","handleHome","ev","preventDefault","handleEnd","options","activeElement","focusOption","selectAndFocus","shiftKey","dispatchEvent","KeyboardEvent","key","typeAhead","clearTimeout","typeAheadTimeout","typeAheadQuery","handleFilterChange","query","detail","trim","toLowerCase","allFiltered","filterMatchesOption","optionTextLower","filtered","Boolean","allOptionsFiltered","handleFilterCreate","ldoptioncreate","emit","resetFilter","canCreate","creatable","filterInput","handleFocusEvent","relatedTarget","stopImmediatePropagation","handleTriggerClick","ariaDisabled","handleClearClick","handleClearSingleClick","optionValue","selection","async","focusVisible","newSelection","oldSelection","join","renderHiddenInput","InputEvent","bubbles","composed","ldchange","ldinput","handleTypeAhead","newQuery","values","findIndex","i","scrollHeight","clientHeight","updateHiddenInputs","hiddenInputs","outerForm","form","handleWindowResize","handleSelect","handleKeyDown","filterHasFocus","btnClearRef","metaKey","nextLdOption","current","nextElementSibling","prevLdOption","previousElementSibling","handleClickOutside","composedPath","at","isTrusted","handleTouchOutside","customIcon","hasCustomIcon","getAttribute","registerAutofocus","autofocus","componentDidLoad","componentDidUpdate","disconnectedCallback","destroy","_b","disconnect","_c","detached","inline","ghost","invalid","triggerCl","triggerIconCl","triggerText","placeholder","getClassNames","part","onBlur","onFocusout","zIndex","ref","role","tabindex","ldTabindex","onClick","maxHeight","order","title","call","fill","viewBox","stroke","d","createButtonLabel","createInputLabel","filterPlaceholder","onLdselectfilterchange","onLdselectfiltercreate","popperClass","ldSelectPopperShadowCss","LdSelectPopper","handleFilterInput","filterInputValue","ldselectfilterchange","handleCreate","ldselectfiltercreate","updateCanCreate","updatePinnedState","isPinned","contains","newValue","oldValue","updateFilter","newExpanded","shadowHeight","display","onInput"],"sources":["../src/liquid/components/ld-select/ld-option/ld-option.shadow.css?tag=ld-option&encapsulation=shadow","../src/liquid/components/ld-select/ld-option/ld-option.tsx","../src/liquid/components/ld-select/ld-select.css?tag=ld-select&encapsulation=shadow","../src/liquid/components/ld-select/ld-select.tsx","../src/liquid/components/ld-select/ld-select-popper/ld-select-popper.shadow.css?tag=ld-select-popper&encapsulation=shadow","../src/liquid/components/ld-select/ld-select-popper/ld-select-popper.tsx"],"sourcesContent":[null,"import { Component, h, Host, Prop, Element } from '@stencil/core'\n\n/**\n * @virtualProp ref - reference to component\n * @virtualProp {string | number} key - for tracking the node's identity when working with lists\n */\n@Component({\n  tag: 'ld-option',\n  styleUrl: 'ld-option.shadow.css',\n  shadow: true,\n})\nexport class LdOption {\n  @Element() el: HTMLElement\n\n  /**\n   * The content of this attribute represents the value to be submitted with the form,\n   * should this option be selected. If this attribute is omitted, the value is taken\n   * from the text content of the option element.\n   */\n  @Prop() value: string\n\n  /**\n   * If present, this boolean attribute indicates that the option is selected.\n   */\n  @Prop() selected: boolean\n\n  /**\n   * Disables the option.\n   */\n  @Prop() disabled: boolean\n\n  /**\n   * @internal\n   * Set to true on filtering via select input.\n   */\n  @Prop() filtered = false\n\n  componentWillLoad() {\n    // Setting selected via prop directly triggers the mutation observer to fire twice on attribute chage.\n    // This is indeed only true for the selected attribute. The disabled attribute works fine when assigned directly.\n    if (this.selected) {\n      this.el.setAttribute('selected', '')\n    }\n  }\n\n  render() {\n    return (\n      <Host class=\"ld-option\">\n        <slot></slot>\n      </Host>\n    )\n  }\n}\n",":host {\n  display: inline-flex;\n\n  .ld-select {\n    flex-grow: 1;\n    max-width: 100%;\n  }\n}\n\n:host,\n.ld-select {\n  /* layout */\n  --ld-select-min-width: 12.8125rem;\n  --ld-select-min-height-sm: 2rem;\n  --ld-select-min-height-md: 2.5rem;\n  --ld-select-min-height-lg: 3.125rem;\n  --ld-select-padding-x-sm: 0.625rem;\n  --ld-select-padding-x-md: 0.75rem;\n  --ld-select-padding-x-lg: 0.875rem;\n  --ld-select-padding-y-sm: 0.25rem;\n  --ld-select-padding-y-md: 0.5rem;\n  --ld-select-padding-y-lg: 0.5rem;\n  --ld-select-padding-right-sm: calc(2.5rem + 0.625rem);\n  --ld-select-padding-right-md: calc(2.5rem + 0.75rem);\n  --ld-select-padding-right-lg: calc(2.5rem + 0.875rem);\n  --ld-select-icon-size-sm: 1rem;\n  --ld-select-icon-size-md: 1.25rem;\n  --ld-select-icon-size-lg: 1.5rem;\n  --ld-select-trigger-line-height: 1.25;\n\n  /* colors */\n  --ld-select-col: var(--ld-col-neutral-900);\n  --ld-select-col-disabled: var(--ld-col-neutral-100);\n  --ld-select-col-border: var(--ld-col-neutral-100);\n  --ld-select-col-border-hover: var(--ld-col-neutral-300);\n  --ld-select-bg-col: var(--ld-col-wht);\n  --ld-select-selection-col: var(--ld-col-wht);\n\n  /* themable colors */\n  --ld-select-invalid-col: var(--ld-thm-error);\n  --ld-select-invalid-icon-col-hover: var(--ld-thm-error-hover);\n  --ld-select-invalid-icon-col-focus: var(--ld-thm-error-focus);\n  --ld-select-invalid-icon-col-active: var(--ld-thm-error-active);\n  --ld-select-invalid-disabled-bg-col: var(--ld-thm-error-disabled);\n  --ld-select-thm-col: var(--ld-thm-primary);\n  --ld-select-thm-col-hover: var(--ld-thm-primary-hover);\n  --ld-select-thm-col-focus: var(--ld-thm-primary-focus);\n  --ld-select-thm-col-active: var(--ld-thm-primary-active);\n  --ld-select-ghost-trigger-bg-col-hover: var(--ld-thm-primary-alpha-lowest);\n  --ld-select-ghost-trigger-bg-col-focus: var(--ld-thm-primary-alpha-low);\n\n  /* reset */\n  *,\n  *::before,\n  *::after {\n    box-sizing: border-box;\n  }\n  ul {\n    list-style: none;\n  }\n}\n\n.ld-select {\n  display: inline-flex;\n  position: relative;\n\n  select + .ld-icon,\n  ::slotted(ld-icon) {\n    width: var(--ld-select-icon-size-md);\n    height: var(--ld-select-icon-size-md);\n  }\n\n  ::slotted(ld-icon) {\n    display: contents !important;\n  }\n\n  select {\n    + .ld-icon,\n    + .ld-select__icon {\n      position: absolute;\n      right: var(--ld-select-padding-x-md);\n      top: 50%;\n      transform: translateY(-50%);\n    }\n\n    + .ld-icon {\n      width: var(--ld-select-icon-size-md);\n      height: var(--ld-select-icon-size-md);\n    }\n\n    &:where(:not[multiple]) {\n      padding-right: var(--ld-select-padding-right-md);\n    }\n  }\n\n  &.ld-select--sm {\n    select {\n      + .ld-icon,\n      + .ld-select__icon {\n        right: var(--ld-select-padding-x-sm);\n      }\n\n      + .ld-icon {\n        width: var(--ld-select-icon-size-sm);\n        height: var(--ld-select-icon-size-sm);\n      }\n\n      &:where(:not[multiple]) {\n        padding-right: var(--ld-select-padding-right-sm);\n      }\n    }\n  }\n  &.ld-select--lg {\n    select {\n      + .ld-icon,\n      + .ld-select__icon {\n        right: var(--ld-select-padding-x-lg);\n      }\n\n      + .ld-icon {\n        width: var(--ld-select-icon-size-lg);\n        height: var(--ld-select-icon-size-lg);\n      }\n\n      &:where(:not[multiple]) {\n        padding-right: var(--ld-select-padding-right-lg);\n      }\n    }\n  }\n}\n\n.ld-select--expanded {\n  .ld-tether-target-attached-bottom {\n    .ld-select__btn-trigger:not(.ld-select__btn-trigger--detached) {\n      border-bottom-left-radius: 0;\n      border-bottom-right-radius: 0;\n    }\n  }\n}\n\n:where(.ld-select:not(.ld-select--inline, .ld-select--ghost)) {\n  min-width: var(--ld-select-min-width);\n}\n\n.ld-select__select,\n.ld-select__btn-trigger {\n  width: 100%;\n}\n\n.ld-select > select,\n.ld-select__btn-trigger {\n  /* outline: none; */\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  font: var(--ld-typo-body-m);\n  line-height: var(--ld-select-trigger-line-height);\n  border: 0;\n  padding: var(--ld-select-padding-y-md) var(--ld-select-padding-x-md);\n  border-radius: var(--ld-br-m);\n  height: 100%;\n  user-select: none;\n  touch-action: manipulation;\n  color: var(--ld-select-col);\n  background-color: var(--ld-select-bg-col);\n  text-align: left;\n  appearance: none;\n  -webkit-touch-callout: none;\n\n  &:where(select) {\n    width: 100%;\n\n    &[multiple] {\n      optgroup {\n        padding: var(--ld-sp-8) 0;\n        font-style: normal;\n      }\n\n      option {\n        padding: var(--ld-sp-6) var(--ld-sp-6);\n        margin: 0 calc(-1 * var(--ld-sp-6));\n        border-radius: var(--ld-br-m);\n\n        &:not(:last-of-type) {\n          margin-bottom: var(--ld-sp-2);\n        }\n      }\n    }\n  }\n\n  &:where(select:not(:disabled, [aria-disabled='true'])),\n  &:where(.ld-select__btn-trigger:not([aria-disabled='true'])) {\n    cursor: pointer;\n  }\n\n  &:where([aria-expanded='true']) {\n    z-index: 2;\n\n    &:not(:focus:focus-visible, .ld-select__btn-trigger--detached) {\n      box-shadow: none;\n    }\n  }\n\n  &:disabled,\n  &:disabled + .ld-select__icon,\n  &:disabled + .ld-icon,\n  &:where([aria-disabled='true']),\n  &:where([aria-disabled='true']) + .ld-select__icon,\n  &:where([aria-disabled='true']) + .ld-icon {\n    color: var(--ld-select-col-disabled);\n  }\n}\n\n.ld-select__btn-trigger {\n  overflow: hidden;\n}\n\n:where(.ld-select),\n:where(.ld-select) > select {\n  min-height: var(--ld-select-min-height-md);\n}\n\n:where(.ld-select--sm),\n:where(.ld-select--sm) > select {\n  min-height: var(--ld-select-min-height-sm);\n}\n\n:where(.ld-select--lg),\n:where(.ld-select--lg) > select {\n  min-height: var(--ld-select-min-height-lg);\n}\n\n.ld-select--sm > select,\n.ld-select--sm .ld-select__btn-trigger {\n  padding: var(--ld-select-padding-y-sm) var(--ld-select-padding-x-sm);\n}\n\n.ld-select--lg > select,\n.ld-select--lg .ld-select__btn-trigger {\n  padding: var(--ld-select-padding-y-lg) var(--ld-select-padding-x-lg);\n}\n\n.ld-select--ghost {\n  &:not(ld-select),\n  select,\n  .ld-select__btn-trigger {\n    background-color: transparent;\n  }\n\n  select,\n  .ld-select__btn-trigger {\n    &:not(:focus) {\n      box-shadow: none;\n    }\n  }\n}\n\n.ld-select:where(:not(.ld-select--ghost)) {\n  &:where(.ld-select--detached),\n  &:where(:not(.ld-select--detached, .ld-select--expanded)) {\n    :where(select),\n    :where(.ld-select__btn-trigger) {\n      box-shadow: inset 0 0 0 var(--ld-sp-2) var(--ld-select-col-border);\n    }\n  }\n\n  &:where(:not(.ld-select--invalid)) {\n    select,\n    .ld-select__btn-trigger {\n      &:where(\n          .ld-select__btn-trigger--detached:not(\n              :disabled,\n              [aria-disabled='true']\n            )\n        ),\n      &:where(\n          :not(\n              :disabled,\n              [aria-disabled='true'],\n              .ld-select__btn-trigger--detached,\n              [aria-expanded='true']\n            )\n        ) {\n        @media (hover: hover) {\n          &:hover:not(:focus:focus-visible) {\n            box-shadow: inset 0 0 0 var(--ld-sp-2)\n              var(--ld-select-col-border-hover);\n          }\n        }\n      }\n    }\n  }\n}\n\n.ld-select--invalid > select,\n.ld-select--invalid .ld-select__btn-trigger--invalid {\n  &:where(:not(:disabled)) {\n    &:where(:focus:focus-visible) {\n      box-shadow: inset 0 0 0 var(--ld-sp-2) var(--ld-select-invalid-col);\n    }\n  }\n\n  &:where(:not(:disabled, [aria-disabled='true'])) {\n    &:where(:not(:focus:focus-visible)) {\n      background-color: var(--ld-select-invalid-disabled-bg-col);\n      color: var(--ld-select-invalid-col);\n    }\n\n    &:where(:not(.ld-select__btn-trigger--ghost)) {\n      box-shadow: inset 0 0 0 var(--ld-sp-2) var(--ld-select-invalid-col);\n    }\n\n    + .ld-icon,\n    + .ld-select__icon,\n    .ld-select__icon {\n      color: var(--ld-select-invalid-col);\n    }\n\n    @media (hover: hover) {\n      &:hover {\n        box-shadow: inset 0 0 0 var(--ld-sp-2) var(--ld-select-invalid-col);\n\n        + .ld-icon,\n        + .ld-select__icon,\n        .ld-select__icon,\n        ::slotted(ld-icon) {\n          color: var(--ld-select-invalid-icon-col-hover);\n        }\n      }\n    }\n    &:where(:focus:focus-visible) {\n      + .ld-icon,\n      + .ld-select__icon,\n      .ld-select__icon,\n      ::slotted(ld-icon) {\n        color: var(--ld-select-invalid-icon-col-focus);\n      }\n    }\n    &:where(:active),\n    &:where(:active:focus-visible) {\n      + .ld-icon,\n      + .ld-select__icon,\n      .ld-select__icon,\n      ::slotted(ld-icon) {\n        color: var(--ld-select-invalid-icon-col-active);\n      }\n    }\n  }\n}\n\n.ld-select__btn-trigger-text-wrapper,\n.ld-select__selection-list {\n  flex-grow: 1;\n}\n\n.ld-select__btn-trigger-text-wrapper {\n  font: var(--ld-typo-label-m);\n  line-height: var(--ld-select-trigger-line-height);\n  padding: var(--ld-sp-6) var(--ld-sp-8) var(--ld-sp-6) 0;\n  height: calc(100% + var(--ld-sp-12));\n  margin: calc(-1 * var(--ld-sp-6)) 0;\n  display: flex;\n  align-items: center;\n  overflow: hidden;\n}\n\n.ld-select--sm > select,\n.ld-select--sm .ld-select__btn-trigger-input,\n.ld-select--sm .ld-select__btn-trigger-text-wrapper {\n  font: var(--ld-typo-body-s);\n  line-height: var(--ld-select-trigger-line-height);\n}\n.ld-select--lg > select,\n.ld-select--lg .ld-select__btn-trigger-input,\n.ld-select--lg .ld-select__btn-trigger-text-wrapper {\n  font: var(--ld-typo-body-l);\n  line-height: var(--ld-select-trigger-line-height);\n}\n\n.ld-select > select,\n.ld-select__btn-trigger-text,\n.ld-select__selection-label-text {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.ld-select__selection-list-container {\n  display: flex;\n  flex-direction: column-reverse;\n  gap: var(--ld-sp-6);\n  margin-right: auto;\n}\n\n.ld-select__selection-list {\n  display: flex;\n  flex-wrap: wrap;\n  margin: calc(-1 * var(--ld-sp-1)) var(--ld-sp-4) calc(-1 * var(--ld-sp-4)) 0;\n  overflow: hidden;\n  padding: 0;\n}\n\n.ld-select__selection-list-item {\n  flex: 0 1;\n  margin-right: var(--ld-sp-4);\n  margin-bottom: var(--ld-sp-4);\n  width: 100%;\n}\n\n.ld-select__selection-list-item--overflowing {\n  display: none;\n}\n\n.ld-select__selection-list-more {\n  order: 2147483647; /* Highest possible */\n  display: inline-flex;\n  align-items: center;\n  font: var(--ld-typo-label-s);\n  font-weight: 700;\n  padding: var(--ld-sp-4) var(--ld-sp-6);\n  border-radius: var(--ld-br-m);\n  margin-right: var(--ld-sp-4);\n  margin-bottom: var(--ld-sp-4);\n}\n\n.ld-select__btn-clear-single,\n.ld-select__btn-clear {\n  /* outline: none; */\n  border: 0;\n  padding: 0;\n  border-radius: var(--ld-br-full);\n  user-select: none;\n  touch-action: manipulation;\n  background-color: transparent;\n  line-height: 0;\n  -webkit-touch-callout: none;\n\n  &:not(:disabled) {\n    cursor: pointer;\n  }\n}\n\n.ld-select__btn-clear {\n  margin-right: var(--ld-sp-6);\n  flex-shrink: 0;\n\n  &:disabled {\n    color: var(--ld-select-col-disabled);\n  }\n}\n\n.ld-select__btn-clear-single {\n  z-index: 1;\n  margin-left: var(--ld-sp-6);\n}\n\n.ld-select__selection-label {\n  position: relative;\n  width: 100%;\n  display: inline-flex;\n  align-items: center;\n  color: var(--ld-select-selection-col);\n  font: var(--ld-typo-label-s);\n  font-weight: 700;\n  padding: var(--ld-sp-4) var(--ld-sp-6);\n}\n\n.ld-select__selection-label-bg {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  border-radius: var(--ld-br-m);\n\n  :where(.ld-select__btn-trigger[aria-disabled='true']) & {\n    background-color: var(--ld-select-col-disabled);\n  }\n}\n\n.ld-select__selection-label-text {\n  z-index: 1;\n}\n\n.ld-select__btn-clear-single-icon {\n  --ld-select-btn-clear-single-size: 0.75rem;\n  width: var(--ld-select-btn-clear-single-size);\n  height: var(--ld-select-btn-clear-single-size);\n}\n\n.ld-select__btn-clear-icon {\n  --ld-select-btn-clear-size: 1.25rem;\n  width: var(--ld-select-btn-clear-size);\n  height: var(--ld-select-btn-clear-size);\n}\n\n.ld-select__icon {\n  fill: none;\n  width: var(--ld-sp-16);\n  height: var(--ld-sp-16);\n}\n\n.ld-select select + .ld-icon,\n.ld-select__icon,\n.ld-select ::slotted(ld-icon) {\n  flex-shrink: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  pointer-events: none;\n\n  :where(select[aria-disabled='true']) &,\n  :where(select:disabled) &,\n  :where(.ld-select__btn-trigger[aria-disabled='true']) & {\n    color: var(--ld-select-col-disabled);\n  }\n\n  .ld-icon,\n  svg {\n    width: 100%;\n    height: 100%;\n  }\n}\n\n.ld-select__icon--rotated {\n  transform-origin: center;\n  transform: rotate(180deg);\n}\n\n.ld-select__slot-container {\n  display: none;\n}\n\n:where(\n    .ld-select:not(.ld-select--disabled, [aria-disabled], .ld-select--invalid)\n  ) {\n  .ld-select__btn-trigger {\n    &:where(:focus:focus-visible) {\n      box-shadow: inset 0 0 0 var(--ld-sp-2) var(--ld-select-thm-col);\n    }\n  }\n\n  &.ld-select--ghost {\n    :where(select:not(:disabled)),\n    :where(.ld-select__btn-trigger) {\n      @media (hover: hover) {\n        &:hover:not(:focus) {\n          background-color: var(--ld-select-ghost-trigger-bg-col-hover);\n        }\n      }\n      &:active,\n      &:active:focus-visible {\n        background-color: var(--ld-select-ghost-trigger-bg-col-focus);\n      }\n    }\n  }\n\n  :where(select:not(:disabled)),\n  :where(.ld-select__btn-trigger) {\n    .ld-select__icon,\n    + .ld-icon,\n    + .ld-select__icon,\n    ::slotted(ld-icon) {\n      color: var(--ld-select-thm-col);\n    }\n\n    @media (hover: hover) {\n      &:where(:hover) {\n        .ld-select__icon,\n        + .ld-icon,\n        + .ld-select__icon,\n        ::slotted(ld-icon) {\n          color: var(--ld-select-thm-col-hover);\n        }\n      }\n    }\n    &:where(:focus:focus-visible) {\n      box-shadow: inset 0 0 0 var(--ld-sp-2) var(--ld-select-thm-col);\n\n      .ld-select__icon,\n      + .ld-select__icon,\n      ::slotted(ld-icon) {\n        color: var(--ld-select-thm-col-focus);\n      }\n    }\n    &:where(:active),\n    &:where(:active:focus-visible) {\n      .ld-select__icon,\n      + .ld-icon,\n      + .ld-select__icon,\n      ::slotted(ld-icon) {\n        color: var(--ld-select-thm-col-active);\n      }\n    }\n  }\n}\n\n:where(.ld-select:not(.ld-select--disabled)):not(.ld-select--invalid) {\n  :where(select:not(:disabled)),\n  :where(.ld-select__btn-trigger) {\n    &:where(:focus:focus-visible) {\n      box-shadow: inset 0 0 0 var(--ld-sp-2) var(--ld-select-thm-col);\n    }\n  }\n}\n\n:where(\n    .ld-select:not(\n        .ld-select--disabled,\n        [aria-disabled],\n        [aria-disabled='true']\n      )\n  ) {\n  .ld-select__selection-list-more {\n    color: var(--ld-select-thm-col);\n  }\n  .ld-select__selection-label-bg {\n    background-color: var(--ld-select-thm-col);\n  }\n\n  .ld-select__btn-clear-single {\n    &:where(:focus:focus-visible) + .ld-select__selection-label-bg {\n      background-color: var(--ld-select-thm-col-focus);\n    }\n\n    &:where(:active),\n    &:where(:active:focus-visible) {\n      + .ld-select__selection-label-bg {\n        background-color: var(--ld-select-thm-col-active);\n      }\n    }\n  }\n\n  .ld-select__btn-clear {\n    color: var(--ld-select-thm-col);\n\n    &:where(:focus:focus-visible) {\n      color: var(--ld-select-thm-col-focus);\n    }\n    @media (hover: hover) {\n      &:where(:hover) {\n        color: var(--ld-select-thm-col-hover);\n      }\n    }\n    &:where(:active),\n    &:where(:active:focus-visible) {\n      color: var(--ld-select-thm-col-active);\n    }\n  }\n}\n","import {\n  Component,\n  Element,\n  h,\n  Host,\n  Event,\n  Listen,\n  Prop,\n  State,\n  Watch,\n  EventEmitter,\n  Method,\n} from '@stencil/core'\nimport Tether from 'tether'\nimport { getClassNames } from '../../utils/getClassNames'\nimport { registerAutofocus } from '../../utils/focus'\nimport { closest } from '../../utils/closest'\n\ntype SelectOption = { value: string; text: string }\n\n/**\n * @slot - the default slot contains the select options\n * @slot icon - replaces caret with custom trigger button icon\n * @virtualProp ref - reference to component\n * @virtualProp {string | number} key - for tracking the node's identity when working with lists\n */\n@Component({\n  tag: 'ld-select',\n  styleUrl: 'ld-select.css',\n  shadow: true,\n})\nexport class LdSelect implements InnerFocusable {\n  @Element() el: HTMLLdSelectElement\n  private selectRef!: HTMLDivElement\n  private triggerRef!: HTMLDivElement\n  private selectionListRef!: HTMLUListElement\n  private internalOptionsContainerRef!: HTMLDivElement\n  private listboxRef!: HTMLLdSelectPopperElement\n  private btnClearRef: HTMLButtonElement\n  private popper: Tether\n  private observer: MutationObserver\n  private isObserverEnabled = true\n\n  /**\n   * This Boolean attribute lets you specify that a form control should have input focus when the page loads.\n   * Only one form element in a document can have the autofocus attribute.\n   */\n  @Prop({ reflect: true }) autofocus: boolean\n\n  /**\n   * Creatable mode can be enabled when the filter prop is set to true.\n   * This mode allows the user to create new options using the filter input field.\n   */\n  @Prop() creatable: boolean\n\n  /** The \"create\" input label (creatable mode). */\n  @Prop() createInputLabel = 'Press Enter to create option'\n\n  /** The \"create\" button label (creatable mode). */\n  @Prop() createButtonLabel = 'Create option'\n\n  /** Disabled state of the component. */\n  @Prop() disabled: boolean\n\n  /** The form element to associate the select with (its form owner). */\n  @Prop() form?: string\n\n  /** Set this property to `true` in order to enable an input field for filtering options. */\n  @Prop() filter: boolean\n\n  /** The filter input placeholder. */\n  @Prop() filterPlaceholder = 'Filter options'\n\n  /** Set this property to `true` in order to mark the select visually as invalid. */\n  @Prop() invalid: boolean\n\n  /** Tab index of the trigger button. */\n  @Prop() ldTabindex = 0\n\n  /** Constrains the height of the trigger button by replacing overflowing selection with a \"+X more\" indicator. */\n  @Prop({ mutable: true }) maxRows?: number\n\n  // prettier-ignore\n  /** Display mode. */\n  @Prop() mode?:\n    // default\n    | 'detached' // = default  + small gap between trigger button and popper\n    | 'inline' //   = detached + minumum trigger button width\n    | 'ghost' //    = inline   + transparent background and borders\n\n  /** Multiselect mode. */\n  @Prop() multiple: boolean\n\n  /** Used to specify the name of the control. */\n  @Prop() name: string\n\n  /** Used as trigger button label in multiselect mode and in single select mode if nothing is selected. */\n  @Prop() placeholder: string\n\n  /** Attached as CSS class to the select popper element. */\n  @Prop() popperClass?: string\n\n  /** Prevents a state with no options selected after initial selection in single select mode. */\n  @Prop() preventDeselection: boolean\n\n  /** A Boolean attribute indicating that an option with a non-empty string value must be selected. */\n  @Prop() required?: boolean\n\n  /** Currently selected option(s) (read only!) */\n  @Prop({ mutable: true }) selected: SelectOption[] = []\n\n  /** Size of the select trigger button. */\n  @Prop() size?: 'sm' | 'lg'\n\n  /** Tether options object to be merged with the default options (optionally stringified). */\n  @Prop() tetherOptions?: Partial<Tether.ITetherOptions> | string\n\n  @State() allOptionsFiltered = false\n  @State() filterMatchesOption = false\n  @State() ariaDisabled = false\n  @State() expanded = false\n  @State() hasCustomIcon = false\n  @State() hasMore = false\n  @State() initialized = false\n  @State() internalOptionsHTML: string\n  @State() renderHiddenInput = false\n  @State() theme: string\n  @State() typeAheadQuery: string\n  @State() typeAheadTimeout: NodeJS.Timeout | null\n\n  /**\n   * Emitted with an array of selected values\n   * when an alteration to the selection is committed.\n   */\n  @Event() ldchange: EventEmitter<string[]>\n\n  /**\n   * Emitted with an array of selected values\n   * when an alteration to the selection is committed.\n   */\n  @Event() ldinput: EventEmitter<string[]>\n\n  /**\n   * Emitted when an option is created in create mode\n   * with the filter input value.\n   */\n  @Event() ldoptioncreate: EventEmitter<string>\n\n  /** Sets focus on the trigger button. */\n  @Method()\n  async focusInner() {\n    if (!this.disabled) {\n      // Experimental feature that fixes a bug in Firefox only.\n      // See https://github.com/emdgroup-liquid/liquid/issues/486\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-expect-error\n      this.triggerRef.focus({ focusVisible: true })\n    }\n  }\n\n  @Watch('selected')\n  emitEventsAndUpdateHidden(\n    newSelection: SelectOption[],\n    oldSelection: SelectOption[]\n  ) {\n    if (!this.initialized) return\n\n    const newValues = newSelection.map((option) => option.value)\n    const oldValues = oldSelection.map((option) => option.value)\n    if (newValues.join() === oldValues.join()) return\n\n    this.updateTriggerMoreIndicator(true)\n\n    if (this.renderHiddenInput) {\n      this.updateSelectedHiddenInputs(newSelection)\n    }\n\n    // Synchronize options with internal options.\n    this.isObserverEnabled = false\n    this.el.querySelectorAll('ld-option').forEach((ldOption) => {\n      ldOption.selected = newValues.some((value) => value === ldOption.value)\n      if (!ldOption.selected && ldOption.hidden) {\n        this.listboxRef\n          .querySelector(`ld-option-internal[value=\"${ldOption.value}\"]`)\n          .remove()\n        ldOption.remove()\n      }\n    })\n    this.isObserverEnabled = true\n\n    this.el.dispatchEvent(new InputEvent('change', { bubbles: true }))\n    this.el.dispatchEvent(\n      new InputEvent('input', { bubbles: true, composed: true })\n    )\n    this.ldchange.emit(newValues)\n    this.ldinput.emit(newValues)\n  }\n\n  @Watch('typeAheadQuery')\n  handleTypeAhead(newQuery?: string) {\n    if (!newQuery) return\n\n    const options = Array.from(\n      this.listboxRef.querySelectorAll('ld-option-internal')\n    )\n    const values = options.map((option) => option.value)\n    let index = values.findIndex(\n      (value) => value.toLowerCase().indexOf(newQuery.toLowerCase()) === 0\n    )\n    if (index > -1) {\n      options[index].focusOption()\n      return\n    }\n\n    index = 0\n    for (let i = 0; i < values.length; i++) {\n      if (newQuery.toLowerCase() < values[i].toLowerCase()) {\n        index = i + 1\n        break\n      }\n    }\n\n    if (index > 0) {\n      options[index - 1].focusOption()\n    }\n  }\n\n  // This method must be a function declaration for testing purposes;\n  // otherwise Jest's mockImplementation won't work here.\n  private isOverflowing() {\n    /* istanbul ignore next */\n    return (\n      this.selectionListRef.scrollHeight >\n      this.selectionListRef.clientHeight + 2\n    )\n  }\n\n  private updateTriggerMoreIndicator = (refresh = false) => {\n    if (!this.multiple || !this.maxRows) return\n\n    if (refresh) this.hasMore = false\n\n    requestAnimationFrame(() => {\n      if (!this.selectionListRef) return\n\n      const selectionListItems = Array.from(\n        this.selectionListRef.querySelectorAll<HTMLLIElement>(\n          '.ld-select__selection-list-item'\n        )\n      )\n\n      if (!this.hasMore) {\n        // reset\n        this.selectionListRef\n          .querySelector('.ld-select__selection-list-more')\n          ?.remove()\n        selectionListItems.forEach((el) => {\n          el.classList.remove('ld-select__selection-list-item--overflowing')\n        })\n      }\n\n      // If overflowing, hide overflowing and show \"+X\" indicator\n      if (this.isOverflowing()) {\n        let moreItem\n        if (!this.hasMore) {\n          moreItem = document.createElement('li')\n          moreItem.classList.add('ld-select__selection-list-more')\n          this.selectionListRef.prepend(moreItem)\n        } else {\n          moreItem = this.selectionListRef.querySelector(\n            '.ld-select__selection-list-more'\n          )\n        }\n        this.hasMore = true\n\n        const maxOffset = this.maxRows * 1.75 * 16\n\n        let overflowingTotal = 0\n        selectionListItems.forEach((el) => {\n          const overflowing = overflowingTotal\n            ? true\n            : el.offsetTop >= maxOffset\n          el.classList[overflowing ? 'add' : 'remove'](\n            'ld-select__selection-list-item--overflowing'\n          )\n          if (overflowing) overflowingTotal++\n        })\n\n        const hideLastVisibleIfMoreIndicatorOverflowing = () => {\n          moreItem = this.selectionListRef.querySelector(\n            '.ld-select__selection-list-more'\n          )\n          moreItem.innerText = `+${overflowingTotal}`\n          if (moreItem.offsetTop < maxOffset) {\n            /* istanbul ignore next */\n            return\n          }\n\n          const notOverflowing = Array.from(\n            this.selectionListRef.querySelectorAll(\n              '.ld-select__selection-list-item:not(.ld-select__selection-list-item--overflowing)'\n            )\n          )\n          const [lastNotOverflowing] = notOverflowing.slice(-1)\n          if (lastNotOverflowing) {\n            lastNotOverflowing.classList.add(\n              'ld-select__selection-list-item--overflowing'\n            )\n            overflowingTotal++\n            moreItem.innerText = `+${overflowingTotal}`\n\n            requestAnimationFrame(() => {\n              hideLastVisibleIfMoreIndicatorOverflowing()\n            })\n          }\n        }\n        hideLastVisibleIfMoreIndicatorOverflowing()\n      }\n    })\n  }\n\n  private isLdOption = (\n    el: HTMLElement | Node | EventTarget\n  ): el is HTMLLdOptionElement | HTMLLdOptionInternalElement =>\n    ['LD-OPTION', 'LD-OPTION-INTERNAL'].includes((el as HTMLElement)?.tagName)\n\n  private updatePopperWidth = () => {\n    this.listboxRef.style.setProperty(\n      'width',\n      `${this.selectRef.getBoundingClientRect().width}px`\n    )\n  }\n\n  private updatePopperShadowHeight = () => {\n    const ldPopper = this.listboxRef\n    ldPopper.updateShadowHeight(\n      `calc(100% + ${this.triggerRef.getBoundingClientRect().height}px)`\n    )\n  }\n\n  private updatePopperTheme = () => {\n    const themeEl = this.el.closest('[class*=\"ld-theme-\"]')\n    if (!themeEl) return\n\n    setTimeout(() => {\n      // Array.from(themeEl.classList).find doesn't work in JSDom for some reason.\n      this.theme = themeEl.classList\n        .toString()\n        .split(' ')\n        .find((cl) => cl.startsWith('ld-theme-'))\n        ?.substring(9)\n    })\n  }\n\n  private updatePopper = () => {\n    if (!this.popper) this.initPopper()\n    this.popper.position()\n    this.updatePopperWidth()\n    this.updatePopperShadowHeight()\n    this.updatePopperTheme()\n  }\n\n  private initPopper = () => {\n    const customTetherOptions: Partial<Tether.ITetherOptions> =\n      typeof this.tetherOptions === 'string'\n        ? JSON.parse(this.tetherOptions)\n        : this.tetherOptions\n    const tetherOptions: Tether.ITetherOptions = {\n      classPrefix: 'ld-tether',\n      element: this.listboxRef,\n      target: this.selectRef,\n      attachment: 'top left',\n      targetAttachment: 'bottom left',\n      offset: this.mode ? '-4px 0' : '0 0',\n      constraints: [\n        {\n          to: 'window',\n          pin: true,\n        },\n      ],\n      ...customTetherOptions,\n    }\n\n    this.popper = new Tether(tetherOptions)\n\n    this.listboxRef.classList.add('ld-select__popper--initialized')\n  }\n\n  private initOptions = () => {\n    const initialized = this.initialized\n    const children = initialized\n      ? this.internalOptionsContainerRef.querySelectorAll('ld-option-internal')\n      : this.el.querySelectorAll('ld-option')\n\n    if (!children.length) {\n      throw new TypeError(\n        'ld-select requires at least one ld-option element as a child, but found none.'\n      )\n    }\n\n    const selectedChildren = Array.from<\n      HTMLLdOptionInternalElement | HTMLLdOptionElement\n    >(children).filter((child) => {\n      return child.selected\n    })\n\n    if (selectedChildren.length > 1 && !this.multiple) {\n      throw new TypeError(\n        'Multiple selected options are not allowed, if multiple option is not set.'\n      )\n    }\n\n    if (!initialized) {\n      let internalOptionsHTML = ''\n      children.forEach((ldOption: HTMLLdOptionElement) => {\n        const classStr = ldOption.classList.toString()\n        internalOptionsHTML += `<ld-option-internal${\n          classStr ? ' class=\"' + classStr + '\"' : ''\n        }${this.multiple ? ' mode=\"checkbox\"' : ''}${\n          this.size ? ' size=\"' + this.size + '\"' : ''\n        }${this.preventDeselection ? ' prevent-deselection' : ''}${\n          ldOption.selected ? ' selected' : ''\n        }${ldOption.hidden ? ' hidden' : ''}${\n          ldOption.value ? ' value=\"' + ldOption.value + '\"' : ''\n        }${\n          ldOption.disabled ? ' disabled' : ''\n        }>${ldOption.innerHTML.replaceAll(\n          /<ld-icon (.|\\n|\\r)*slot=\"icon\"(.|\\n|\\r)*>(.|\\n|\\r)*<\\/ld-icon>/g,\n          ''\n        )}</ld-option-internal>`\n      })\n      this.internalOptionsHTML = internalOptionsHTML\n    }\n    this.selected = selectedChildren.map((child) => {\n      return {\n        value: child.value,\n        text: child.textContent,\n      }\n    })\n\n    this.updateTriggerMoreIndicator(true)\n  }\n\n  private updateSelectedHiddenInputs = (selected: SelectOption[]) => {\n    const selectedValues = selected.map(({ value }) => value)\n    const inputs = this.el.querySelectorAll('input')\n\n    // For each existing input, remove it from DOM if not in selected.\n    // Remove each value from selectedValues if hidden input already exists.\n    inputs.forEach((hiddenInput) => {\n      const index = selectedValues.indexOf(hiddenInput.value)\n      if (index >= 0) {\n        selectedValues.splice(index, 1)\n      } else {\n        hiddenInput.remove()\n      }\n    })\n\n    // If nothing is selected we need only one hidden input without value.\n    if (selected.length === 0) {\n      this.appendHiddenInput()\n      return\n    }\n\n    // Else add hidden inputs for each value in selectedValues.\n    selectedValues.forEach(this.appendHiddenInput)\n  }\n\n  private appendHiddenInput = (value?: string) => {\n    const hiddenInput = document.createElement('input')\n\n    // Slot required to keep the hidden input outside the popper.\n    hiddenInput.setAttribute('slot', 'hidden')\n    hiddenInput.name = this.name\n    hiddenInput.type = 'hidden'\n\n    if (value !== undefined) {\n      hiddenInput.value = value\n    }\n\n    this.el.appendChild(hiddenInput)\n  }\n\n  @Watch('name')\n  @Watch('form')\n  updateHiddenInputs() {\n    const hiddenInputs = this.el.querySelectorAll('input')\n\n    const outerForm = this.el.closest('form')\n    if (!this.name || !(outerForm || this.form)) {\n      hiddenInputs.forEach((hiddenInput) => {\n        hiddenInput.remove()\n      })\n      return\n    }\n\n    if (!hiddenInputs.length) {\n      this.updateSelectedHiddenInputs(this.selected)\n      return\n    }\n\n    hiddenInputs.forEach((hiddenInput) => {\n      hiddenInput.name = this.name\n      if (this.form) {\n        hiddenInput.setAttribute('form', this.form)\n      }\n    })\n  }\n\n  private handleSlotChange = (mutationsList: MutationRecord[]) => {\n    if (!this.isObserverEnabled) return\n    if (!mutationsList.some((record) => this.isLdOption(record.target))) {\n      return\n    }\n\n    this.initialized = false\n\n    const oldValues = [...this.selected]\n    this.initOptions()\n\n    this.initialized = true\n    const newValues = [...this.selected]\n    this.emitEventsAndUpdateHidden(newValues, oldValues)\n  }\n\n  private initObserver = () => {\n    this.observer = new MutationObserver(this.handleSlotChange)\n    this.observer.observe(this.el, {\n      subtree: true,\n      childList: true,\n      attributes: true,\n    })\n  }\n\n  private getFilterInput = () =>\n    this.listboxRef.shadowRoot.querySelector<HTMLInputElement>(\n      '.ld-select-popper__filter-input'\n    )\n\n  private togglePopper = () => {\n    this.expanded = !this.expanded\n\n    if (this.expanded) {\n      this.popper.enable()\n    } else {\n      this.popper.disable()\n      this.focusInner()\n    }\n  }\n\n  private clearSelection = () => {\n    Array.from(this.listboxRef.querySelectorAll('ld-option-internal')).forEach(\n      (option) => {\n        option.selected = false\n      }\n    )\n    this.selected = []\n  }\n\n  @Listen('resize', { target: 'window', passive: true })\n  handleWindowResize() {\n    if (this.disabled || this.ariaDisabled) return // this is for a minor performance optimization only\n\n    this.updatePopperWidth()\n    this.updateTriggerMoreIndicator(true)\n    this.updatePopperShadowHeight()\n  }\n\n  @Listen('ldoptionselect', { target: 'window', passive: true })\n  handleSelect(ev: CustomEvent<boolean>) {\n    const target = ev.target as HTMLLdOptionInternalElement\n\n    // Ignore events which are not fired on current instance.\n    if (target.closest('[role=\"listbox\"]') !== this.listboxRef) return\n\n    if (!this.multiple) {\n      // Deselect currently selected option, if it's not the target option.\n      this.listboxRef\n        .querySelectorAll('ld-option-internal')\n        .forEach((option) => {\n          if (option !== target.closest('ld-option-internal')) {\n            option.selected = false\n          }\n        })\n      this.togglePopper()\n      if (this.filter) {\n        this.resetFilter()\n        this.focusInner()\n      }\n    }\n    this.initOptions()\n  }\n\n  private expandAndFocus = () => {\n    if (!this.popper) this.initPopper()\n    this.togglePopper()\n    setTimeout(() => {\n      // If selected in single select mode, focus selected.\n      let toFocus\n      if (!this.multiple) {\n        // Using find instead of ld-option-internal[selected] selector below\n        // in order to prevent \"TypeError: e.getAttributeNode is not a function\" in JSDom.\n        toFocus = Array.from(\n          this.listboxRef.querySelectorAll('ld-option-internal')\n        )\n          .find((ldOption) => ldOption.hasAttribute('selected'))\n          ?.shadowRoot.querySelector('[role=\"option\"]')\n      }\n      if (!toFocus) {\n        if (this.filter) {\n          toFocus = this.getFilterInput()\n        } else {\n          toFocus = this.triggerRef\n        }\n      }\n      toFocus.focus()\n    })\n  }\n\n  private handleHome = (ev) => {\n    ev.preventDefault()\n    this.focusInner()\n  }\n\n  private handleEnd = (ev) => {\n    // Move focus to the last option.\n    ev.preventDefault()\n    const options = Array.from(\n      this.listboxRef.querySelectorAll('ld-option-internal')\n    )\n    if (document.activeElement !== options[options.length - 1]) {\n      options[options.length - 1].focusOption()\n    }\n  }\n\n  private selectAndFocus = (\n    ev: KeyboardEvent,\n    ldOption: HTMLLdOptionInternalElement\n  ) => {\n    if (!ldOption) return\n\n    if (this.multiple && ev.shiftKey) {\n      if (\n        this.isLdOption(document.activeElement) &&\n        !document.activeElement.hasAttribute('selected')\n      ) {\n        document.activeElement.dispatchEvent(\n          new KeyboardEvent('keydown', { key: ' ' })\n        )\n      }\n      ldOption.focusOption()\n      if (!ldOption.hasAttribute('selected')) {\n        ldOption.dispatchEvent(new KeyboardEvent('keydown', { key: ' ' }))\n      }\n    } else {\n      ldOption.focusOption()\n    }\n  }\n\n  private typeAhead = (key: string) => {\n    // Type a character: focus moves to the next item with a name that starts with the typed character.\n    // Type multiple characters in rapid succession: focus moves to the next item with a name that starts\n    // with the string of characters typed.\n    if (['Shift', 'Meta'].includes(key)) return\n    clearTimeout(this.typeAheadTimeout)\n    this.typeAheadQuery = (this.typeAheadQuery || '') + key\n    this.typeAheadTimeout = setTimeout(() => {\n      this.typeAheadQuery = ''\n    }, 500)\n  }\n\n  private handleFilterChange = (ev: CustomEvent<string>) => {\n    // Hide options which do not match the filter query.\n    const options = this.initialized\n      ? this.internalOptionsContainerRef.querySelectorAll('ld-option-internal')\n      : this.el.querySelectorAll('ld-option')\n    const query = ev.detail.trim().toLowerCase()\n    let allFiltered = true\n    let filterMatchesOption = false\n    options.forEach((ldOption) => {\n      const optionTextLower = ldOption.textContent.toLowerCase()\n      ldOption.filtered = Boolean(query) && !optionTextLower.includes(query)\n      if (optionTextLower === query) {\n        filterMatchesOption = true\n      }\n      if (!ldOption.filtered) {\n        allFiltered = false\n      }\n    })\n    this.allOptionsFiltered = allFiltered\n    this.filterMatchesOption = filterMatchesOption\n\n    // Re-position popper after new height has been applied.\n    requestAnimationFrame(() => {\n      this.updatePopper()\n    })\n  }\n\n  private handleFilterCreate = () => {\n    // In single select mode, deselect currently selected option\n    if (!this.multiple) {\n      const options = this.el.querySelectorAll('ld-option')\n      options.forEach((ldOption) => {\n        ldOption.selected = false\n      })\n    }\n\n    this.ldoptioncreate.emit(this.getFilterInput().value)\n    this.resetFilter()\n  }\n\n  private canCreate = () => {\n    return Boolean(\n      this.creatable && !this.filterMatchesOption && this.getFilterInput().value\n    )\n  }\n\n  @Listen('keydown', { passive: false, target: 'window' })\n  handleKeyDown(ev: KeyboardEvent) {\n    if (this.disabled || this.ariaDisabled) return\n\n    // Ignore events if current instance has no focus.\n    if (\n      document.activeElement.closest('[role=\"listbox\"]') !== this.listboxRef &&\n      document.activeElement.closest('ld-select') !== this.el\n    ) {\n      return\n    }\n\n    const filterHasFocus =\n      this.filter &&\n      this.listboxRef?.shadowRoot.activeElement === this.getFilterInput()\n\n    // If filter has focus...\n    if (filterHasFocus) {\n      // ... and create mode is active\n      if (this.canCreate() && ev.key === 'Enter') {\n        this.handleFilterCreate()\n        return\n      }\n\n      // Ignore events if filter input has focus,\n      // except for navigation-specific keys.\n      if (\n        !['ArrowDown', 'ArrowUp', 'End', 'Escape', 'Home', 'Tab'].includes(\n          ev.key\n        )\n      ) {\n        return\n      }\n    }\n\n    // If the clear button is focused, ignore Enter and Space key events.\n    if (\n      this.el.shadowRoot.activeElement === this.btnClearRef &&\n      (ev.key === ' ' || ev.key === 'Enter')\n    ) {\n      return\n    }\n\n    switch (ev.key) {\n      case 'ArrowDown': {\n        // If not expanded, expand popper.\n        // If expanded, move focus to the next option.\n        // If shift is pressed, select the next option.\n        // Holding down the Shift key and then using the Down cursor keys\n        // increases the range of items selected (multiple mode only).\n        ev.preventDefault()\n        if (!this.expanded) {\n          this.expandAndFocus()\n          return\n        }\n\n        if (ev.metaKey) {\n          this.handleEnd(ev)\n          return\n        }\n\n        // Focus next visible option, if any,\n        // or the filter input, if applicable.\n        if (document.activeElement === this.el || filterHasFocus) {\n          if (this.filter && !filterHasFocus) {\n            this.getFilterInput().focus()\n          } else {\n            const nextLdOption = Array.from(\n              this.listboxRef.querySelectorAll('ld-option-internal')\n            ).find((ldOption) => !ldOption.filtered)\n            this.selectAndFocus(ev, nextLdOption)\n          }\n        } else {\n          let current = document.activeElement\n          let nextLdOption\n          while (nextLdOption === undefined) {\n            if (this.isLdOption(current.nextElementSibling)) {\n              if (\n                current.nextElementSibling.filtered ||\n                current.nextElementSibling.hidden\n              ) {\n                current = current.nextElementSibling\n              } else {\n                nextLdOption = current.nextElementSibling\n              }\n            } else {\n              nextLdOption = null\n            }\n          }\n          this.selectAndFocus(ev, nextLdOption)\n        }\n        break\n      }\n      case 'ArrowUp': {\n        // If not expanded, expand popper.\n        // If expanded, move focus to the previous option.\n        // If the first option is focused, focus the trigger button.\n        // Holding down the Shift key and then using the Up cursor keys\n        // increases the range of items selected (multiple mode only).\n        ev.preventDefault()\n        if (!this.expanded) {\n          this.expandAndFocus()\n          return\n        }\n\n        if (ev.metaKey || filterHasFocus) {\n          this.handleHome(ev)\n          return\n        }\n\n        // Focus previous visible option, if any.\n        if (this.isLdOption(document.activeElement)) {\n          let prevLdOption\n          let current = document.activeElement\n          while (prevLdOption === undefined) {\n            if (this.isLdOption(current.previousElementSibling)) {\n              if (\n                current.previousElementSibling.hidden ||\n                current.previousElementSibling.filtered\n              ) {\n                current = current.previousElementSibling\n              } else {\n                prevLdOption = current.previousElementSibling\n              }\n            } else {\n              prevLdOption = null\n            }\n          }\n          if (prevLdOption) {\n            this.selectAndFocus(ev, prevLdOption)\n          } else {\n            if (this.filter) {\n              this.getFilterInput().focus()\n            } else {\n              this.handleHome(ev)\n            }\n          }\n        }\n        break\n      }\n      case 'Home':\n        if (this.expanded) {\n          this.handleHome(ev)\n        }\n        break\n      case 'End':\n        if (this.expanded) {\n          this.handleEnd(ev)\n        }\n        break\n      case ' ': {\n        // If trigger has focus: Toggle popper.\n        ev.stopImmediatePropagation()\n        ev.preventDefault()\n        if (this.expanded) {\n          this.togglePopper()\n        } else {\n          this.expandAndFocus()\n        }\n        break\n      }\n      case 'Enter':\n        // If expanded and trigger button is focused: Toggle popper.\n        ev.preventDefault()\n        if (\n          this.expanded &&\n          this.el.shadowRoot.activeElement === this.triggerRef\n        ) {\n          this.togglePopper()\n        }\n        break\n      case 'Escape':\n        // If expanded: Close popper.\n        if (this.expanded) {\n          ev.preventDefault()\n          ev.stopImmediatePropagation()\n          this.togglePopper()\n        }\n        break\n      case 'Tab': // Also covers Shift+Tab\n        // If expanded and popper element has focus within: Prevent default.\n        if (\n          this.expanded &&\n          document.activeElement.closest('[role=\"listbox\"]') === this.listboxRef\n        ) {\n          ev.preventDefault()\n          ev.stopImmediatePropagation()\n        }\n        break\n      default:\n        if (this.expanded) {\n          ev.stopImmediatePropagation()\n          ev.preventDefault()\n          this.typeAhead(ev.key)\n        }\n    }\n  }\n\n  @Listen('click', {\n    target: 'window',\n  })\n  handleClickOutside(ev) {\n    // closest utility function must be used here for the component\n    // to work in Solid.js app, where ev.target can be an element\n    // within the shadow DOM of the component.\n    // Usage of ev.composedPath() is required for penetrating shadow DOM.\n    const target = 'composedPath' in ev ? ev.composedPath().at(0) : ev.target\n    if (\n      ev.isTrusted &&\n      closest('ld-select', target) !== this.el &&\n      closest('[role=\"listbox\"]', target) !== this.listboxRef\n    ) {\n      this.expanded = false\n      this.resetFilter()\n    }\n  }\n\n  // Mobile Safari in some cases does not react to click events on elements\n  // which are not interactive. But it does to touch events.\n  @Listen('touchend', {\n    target: 'window',\n    passive: true,\n  })\n  handleTouchOutside(ev) {\n    this.handleClickOutside(ev)\n  }\n\n  private resetFilter = () => {\n    this.allOptionsFiltered = false\n    this.filterMatchesOption = false\n\n    if (!this.filter) return\n    const filterInput = this.getFilterInput()\n    if (!filterInput) return\n\n    filterInput.value = ''\n    const options =\n      this.internalOptionsContainerRef.querySelectorAll('ld-option-internal')\n    options.forEach((ldOption) => {\n      ldOption.filtered = false\n    })\n\n    this.listboxRef.resetFilter()\n  }\n\n  private handleFocusEvent = (ev: FocusEvent) => {\n    // Emit event only, if focus is not within the select component.\n    if (\n      ev.relatedTarget === null ||\n      ev.relatedTarget === this.listboxRef ||\n      this.isLdOption(ev.relatedTarget) ||\n      closest('ld-select', ev.relatedTarget as HTMLElement) === this.el\n    ) {\n      ev.stopImmediatePropagation()\n    } else {\n      // Focus left the select component - make sure it is not expanded.\n      this.expanded = false\n      this.resetFilter()\n    }\n  }\n\n  private handleTriggerClick = (ev: Event) => {\n    ev.preventDefault()\n\n    if (this.disabled || this.ariaDisabled) return\n\n    if (!this.popper) this.initPopper()\n\n    this.togglePopper()\n\n    setTimeout(() => {\n      this.getFilterInput()?.focus()\n    })\n  }\n\n  private handleClearClick = (ev: MouseEvent) => {\n    ev.preventDefault()\n    ev.stopImmediatePropagation()\n\n    if (this.disabled || this.ariaDisabled) return\n\n    this.clearSelection()\n    this.focusInner()\n  }\n\n  private handleClearSingleClick = (ev: MouseEvent, optionValue) => {\n    ev.preventDefault()\n    ev.stopImmediatePropagation()\n\n    if (this.disabled || this.ariaDisabled) return\n\n    this.selected = this.selected.filter(\n      (selection) => selection.value !== optionValue\n    )\n\n    this.listboxRef\n      .querySelector(`ld-option-internal[value='${optionValue}']`)\n      .dispatchEvent(new KeyboardEvent('keydown', { key: ' ' }))\n  }\n\n  componentWillLoad() {\n    const outerForm = this.el.closest('form')\n\n    if (this.name && (outerForm || this.form)) {\n      this.renderHiddenInput = true\n    }\n\n    const customIcon = this.el.querySelector('ld-icon')\n    this.hasCustomIcon = !!customIcon\n\n    if (customIcon) {\n      customIcon.setAttribute('size', this.size)\n    }\n\n    if (this.el.getAttribute('aria-disabled') === 'true') {\n      this.ariaDisabled = true\n    }\n\n    this.initOptions()\n\n    if (this.renderHiddenInput) {\n      this.updateSelectedHiddenInputs(this.selected)\n    }\n\n    registerAutofocus(this.autofocus)\n  }\n\n  componentDidLoad() {\n    setTimeout(() => {\n      this.initObserver()\n      this.initialized = true\n    })\n  }\n\n  componentDidUpdate() {\n    if (this.expanded) {\n      this.updatePopper()\n    }\n  }\n\n  /* istanbul ignore next */\n  disconnectedCallback() {\n    clearTimeout(this.typeAheadTimeout)\n    this.popper?.destroy()\n    this.observer?.disconnect()\n    this.listboxRef?.remove()\n  }\n\n  render() {\n    // Endable detached mode if any display mode is set.\n    const detached = !!this.mode\n\n    // Implicitly enable inline mode if ghost mode is enabled.\n    const inline = this.mode === 'inline' || this.mode === 'ghost'\n\n    // Disallow ghost in combination with multiple select mode.\n    const ghost = !this.multiple && this.mode === 'ghost'\n\n    const cl = [\n      'ld-select',\n      this.disabled && 'ld-select--disabled',\n      this.size && `ld-select--${this.size}`,\n      this.invalid && 'ld-select--invalid',\n      this.expanded && 'ld-select--expanded',\n      detached && 'ld-select--detached',\n      inline && 'ld-select--inline',\n      ghost && 'ld-select--ghost',\n    ]\n\n    const triggerCl = [\n      'ld-select__btn-trigger',\n      this.invalid && 'ld-select__btn-trigger--invalid',\n      detached && 'ld-select__btn-trigger--detached',\n      inline && 'ld-select__btn-trigger--inline',\n      ghost && 'ld-select__btn-trigger--ghost',\n    ]\n\n    const triggerIconCl = [\n      'ld-select__icon',\n      this.expanded && 'ld-select__icon--rotated',\n    ]\n\n    const triggerText = this.multiple\n      ? this.placeholder\n      : this.selected[0]?.text || this.placeholder\n\n    return (\n      <Host>\n        <div\n          class={getClassNames(cl)}\n          aria-disabled={this.disabled || this.ariaDisabled}\n          part=\"root\"\n          onBlur={this.handleFocusEvent}\n          onFocusout={this.handleFocusEvent}\n          style={\n            this.expanded\n              ? {\n                  zIndex: '2147483647', // Highest possible z-index\n                }\n              : undefined\n          }\n        >\n          {this.renderHiddenInput && <slot name=\"hidden\" />}\n          <div class=\"ld-select__slot-container\" part=\"slot-container\">\n            <slot></slot>\n          </div>\n          <div\n            class=\"ld-select__select\"\n            part=\"select\"\n            ref={(el) => (this.selectRef = el)}\n          >\n            <div\n              class={getClassNames(triggerCl)}\n              role=\"button\"\n              part=\"btn-trigger focusable\"\n              tabindex={\n                this.disabled && !this.ariaDisabled\n                  ? undefined\n                  : this.ldTabindex\n              }\n              aria-disabled={\n                this.disabled || this.ariaDisabled ? 'true' : 'false'\n              }\n              aria-haspopup=\"listbox\"\n              aria-expanded={this.expanded ? 'true' : 'false'}\n              aria-label={triggerText}\n              onClick={this.handleTriggerClick}\n              ref={(el) => (this.triggerRef = el)}\n            >\n              {this.multiple && this.selected.length ? (\n                <div\n                  class=\"ld-select__selection-list-container\"\n                  part=\"selection-list-container\"\n                >\n                  <ul\n                    class=\"ld-select__selection-list\"\n                    part=\"selection-list\"\n                    aria-label=\"Selected options\"\n                    ref={(el) => (this.selectionListRef = el)}\n                    style={{\n                      maxHeight:\n                        this.maxRows && this.maxRows > 0\n                          ? `${this.maxRows * 1.75}rem`\n                          : undefined,\n                    }}\n                  >\n                    {this.selected.map((selection, index) => {\n                      return (\n                        <li\n                          key={index}\n                          class=\"ld-select__selection-list-item\"\n                          style={{ order: index + 1 + '' }}\n                          part=\"selection-list-item\"\n                        >\n                          <label class=\"ld-select__selection-label\">\n                            <span\n                              class=\"ld-select__selection-label-text\"\n                              title={selection.text}\n                              part=\"selection-label-text\"\n                            >\n                              {selection.text}\n                            </span>\n\n                            <button\n                              disabled={\n                                this.disabled || this.ariaDisabled\n                                  ? true\n                                  : undefined\n                              }\n                              class=\"ld-select__btn-clear-single\"\n                              part=\"btn-clear-single focusable\"\n                              onClick={(ev) => {\n                                this.handleClearSingleClick.call(\n                                  this,\n                                  ev,\n                                  selection.value\n                                )\n                              }}\n                            >\n                              {/* custom icon cross */}\n                              <svg\n                                class=\"ld-select__btn-clear-single-icon\"\n                                part=\"icon-clear-single\"\n                                fill=\"none\"\n                                viewBox=\"0 0 12 12\"\n                              >\n                                <title>Clear</title>\n                                <path\n                                  stroke=\"#fff\"\n                                  stroke-linecap=\"round\"\n                                  stroke-linejoin=\"round\"\n                                  stroke-width=\"2\"\n                                  d=\"M2 2l8 8M2 10l8-8\"\n                                />\n                              </svg>\n                            </button>\n\n                            <span\n                              class=\"ld-select__selection-label-bg\"\n                              part=\"selection-label-bg\"\n                            />\n                          </label>\n                        </li>\n                      )\n                    })}\n                  </ul>\n                </div>\n              ) : (\n                <span\n                  class=\"ld-select__btn-trigger-text-wrapper\"\n                  title={triggerText}\n                  part=\"trigger-text-wrapper\"\n                >\n                  <span class=\"ld-select__btn-trigger-text\" part=\"trigger-text\">\n                    {triggerText}\n                  </span>\n                </span>\n              )}\n\n              {this.selected?.length && this.multiple ? (\n                <button\n                  class=\"ld-select__btn-clear\"\n                  disabled={\n                    this.disabled || this.ariaDisabled ? true : undefined\n                  }\n                  onClick={this.handleClearClick}\n                  ref={(el) => (this.btnClearRef = el)}\n                  part=\"btn-clear focusable\"\n                >\n                  {/* custom icon cross */}\n                  <svg\n                    class=\"ld-select__btn-clear-icon\"\n                    fill=\"none\"\n                    viewBox=\"0 0 21 20\"\n                    part=\"icon-clear\"\n                  >\n                    <title>Clear all</title>\n                    <path\n                      fill=\"currentColor\"\n                      fill-rule=\"evenodd\"\n                      d=\"M10 20a10 10 0 100-20 10 10 0 000 20z\"\n                      clip-rule=\"evenodd\"\n                    />\n                    <path\n                      stroke=\"#fff\"\n                      stroke-linecap=\"round\"\n                      stroke-linejoin=\"round\"\n                      stroke-width=\"2\"\n                      d=\"M6.67 6.67l6.67 6.66M6.67 13.33l6.67-6.66\"\n                    />\n                  </svg>\n                </button>\n              ) : (\n                ''\n              )}\n\n              <slot name=\"icon\"></slot>\n              {!this.hasCustomIcon && (\n                /* custom icon arrow-down */\n                <svg\n                  class={getClassNames(triggerIconCl)}\n                  role={'presentation'}\n                  viewBox=\"0 0 16 16\"\n                  part=\"trigger-icon\"\n                >\n                  <path\n                    stroke=\"currentColor\"\n                    stroke-linecap=\"round\"\n                    stroke-linejoin=\"round\"\n                    stroke-width=\"3\"\n                    d=\"M3 6l5 4 5-4\"\n                  />\n                </svg>\n              )}\n            </div>\n          </div>\n          <ld-select-popper\n            allOptionsFiltered={this.allOptionsFiltered}\n            creatable={this.creatable}\n            createButtonLabel={this.createButtonLabel}\n            createInputLabel={this.createInputLabel}\n            detached={detached}\n            expanded={this.expanded}\n            filter={this.filter}\n            filterMatchesOption={this.filterMatchesOption}\n            filterPlaceholder={this.filterPlaceholder}\n            onBlur={this.handleFocusEvent}\n            onFocusout={this.handleFocusEvent}\n            onLdselectfilterchange={this.handleFilterChange}\n            onLdselectfiltercreate={this.handleFilterCreate}\n            popperClass={this.popperClass}\n            ref={(el) => (this.listboxRef = el)}\n            role=\"listbox\"\n            size={this.size}\n            theme={this.theme}\n          >\n            <div\n              ref={(el) => (this.internalOptionsContainerRef = el)}\n              innerHTML={this.internalOptionsHTML}\n              part=\"options-container\"\n            ></div>\n          </ld-select-popper>\n        </div>\n      </Host>\n    )\n  }\n}\n",":host {\n  /* layout */\n  --ld-select-popper-min-width: 12.8125rem;\n  --ld-select-popper-max-height: min(23.75rem, 75vh - 1.25rem);\n\n  /* colors */\n  --ld-select-popper-border-col: var(--ld-col-neutral-100);\n  min-width: var(--ld-select-popper-min-width);\n}\n\n.ld-select-popper {\n  min-width: 100%;\n\n  &:not(.ld-select-popper--expanded) {\n    display: none;\n  }\n\n  ::slotted(.ld-select__shadow) {\n    display: block;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    box-shadow: var(--ld-shadow-sticky);\n    border-radius: var(--ld-br-m);\n    pointer-events: none;\n    z-index: -1;\n  }\n}\n\n.ld-select-popper__scroll-container {\n  max-height: var(--ld-select-popper-max-height);\n  overflow-y: auto;\n  border-bottom-left-radius: var(--ld-br-m);\n  border-bottom-right-radius: var(--ld-br-m);\n  border-top: solid var(--ld-select-popper-border-col) var(--ld-sp-1);\n  overscroll-behavior: contain;\n\n  .ld-select-popper--detached:not(.ld-select-popper--filter) &,\n  .ld-select-popper--pinned:not(.ld-select-popper--filter) & {\n    border-top: 0;\n    border-radius: var(--ld-br-m);\n  }\n\n  .ld-select-popper--all-filtered & {\n    border-top: 0;\n  }\n}\n\n.ld-select-popper__shadow {\n  position: absolute;\n  width: 100%;\n  height: calc(100% + var(--ld-select-min-height-md));\n  box-shadow: var(--ld-shadow-sticky);\n  border-radius: var(--ld-br-m);\n  pointer-events: none;\n  z-index: -1;\n  bottom: 0;\n\n  .ld-select-popper--detached & {\n    height: 100% !important;\n  }\n}\n\n.ld-select-popper__filter-container {\n  align-items: center;\n  background-color: var(--ld-col-wht);\n  border-top: solid var(--ld-col-neutral-100) var(--ld-sp-1);\n  color: var(--ld-col-neutral-900);\n  display: grid;\n  font: var(--ld-typo-label-m);\n  grid-template-columns: 1fr auto;\n\n  .ld-select-popper--detached &,\n  .ld-select-popper--pinned & {\n    border-top: 0;\n    border-top-left-radius: var(--ld-br-m);\n    border-top-right-radius: var(--ld-br-m);\n  }\n\n  .ld-select-popper--all-filtered & {\n    border-bottom-left-radius: var(--ld-br-m);\n    border-bottom-right-radius: var(--ld-br-m);\n  }\n}\n\n.ld-select-popper__create-button {\n  font: var(--ld-typo-label-s);\n  line-height: var(--ld-select-trigger-line-height);\n  margin-right: var(--ld-sp-8);\n\n  &::part(button) {\n    --ld-button-padding-x-sm: var(--ld-sp-6);\n    --ld-button-padding-y-sm: var(--ld-sp-4);\n    min-height: 0;\n    min-width: 0;\n  }\n}\n\n.ld-select-popper__filter-input {\n  appearance: none;\n  background-color: transparent;\n  border: 0;\n  box-sizing: border-box;\n  color: inherit;\n  font: inherit;\n  height: 2.5rem;\n  line-height: var(--ld-select-trigger-line-height);\n  outline: none;\n  padding: var(--ld-sp-8) var(--ld-sp-12);\n  width: 100%;\n\n  &::placeholder {\n    color: var(--ld-col-neutral-600);\n  }\n\n  .ld-select-popper--detached &,\n  .ld-select-popper--pinned & {\n    border-top: 0;\n    border-top-left-radius: var(--ld-br-m);\n    border-top-right-radius: var(--ld-br-m);\n  }\n}\n","import {\n  Component,\n  Element,\n  Event,\n  EventEmitter,\n  h,\n  Host,\n  Method,\n  Prop,\n  State,\n  Watch,\n} from '@stencil/core'\nimport { getClassNames } from '../../../utils/getClassNames'\n\n/** @internal **/\n@Component({\n  tag: 'ld-select-popper',\n  styleUrl: 'ld-select-popper.shadow.css',\n  shadow: true,\n})\nexport class LdSelectPopper {\n  @Element() el: HTMLElement\n\n  /** Indicates that all options are filtered (used in creatable mode) */\n  @Prop() allOptionsFiltered: boolean\n\n  /** A watcher is applied to the CSS class in order to be able to react to tether changes. */\n  @Prop({ reflect: true }) class: string\n\n  /**\n   * Creatable mode can be enabled when the filter prop is set to true.\n   * This mode allows the user to create new options using the filter input field.\n   */\n  @Prop() creatable: boolean\n\n  /** The \"create\" input label (creatable mode). */\n  @Prop() createInputLabel: string\n\n  /** The \"create\" button label (creatable mode). */\n  @Prop() createButtonLabel: string\n\n  /** Popper is visually detached from the select trigger element (there's a gap between the two). */\n  @Prop() detached: boolean\n\n  /** Indicates if select element is expanded. */\n  @Prop() expanded = false\n\n  /** Set this property to `true` in order to enable an input field for filtering options. */\n  @Prop() filter: boolean\n\n  /** The filter input value matches an option (do not allow to create the option). */\n  @Prop() filterMatchesOption: boolean\n\n  /** The filter input placeholder. */\n  @Prop() filterPlaceholder: string\n\n  /** Attaches CSS class to the select popper element. */\n  @Prop() popperClass?: string\n\n  /** Size of the select trigger button (required for applying the correct shadow height). */\n  @Prop() size?: 'sm' | 'lg'\n\n  /** Since the select popper is located outside the select element, the theme needs to be applied as a prop. */\n  @Prop() theme: string\n\n  @State() isPinned = false\n  @State() shadowHeight = '100%'\n  @State() filterInputValue = ''\n  @State() canCreate = false\n\n  /**\n   * @internal\n   * Emitted on filter change with the filter input value.\n   */\n  @Event() ldselectfilterchange: EventEmitter<string>\n\n  /**\n   * @internal\n   * Emitted on create button click in filter input field.\n   */\n  @Event() ldselectfiltercreate: EventEmitter<string>\n\n  private handleFilterInput = (ev) => {\n    this.filterInputValue = ev.target.value\n    this.ldselectfilterchange.emit(ev.target.value)\n  }\n\n  private handleCreate = (ev) => {\n    ev.preventDefault()\n    this.ldselectfiltercreate.emit(this.filterInputValue)\n    this.filterInputValue = ''\n  }\n\n  @Watch('creatable')\n  @Watch('filterMatchesOption')\n  @Watch('filterInputValue')\n  updateCanCreate() {\n    this.canCreate = Boolean(\n      this.creatable && !this.filterMatchesOption && this.filterInputValue\n    )\n  }\n\n  @Watch('class')\n  updatePinnedState() {\n    this.isPinned = this.el.classList.contains('ld-tether-pinned')\n  }\n\n  @Watch('theme')\n  updatePopperTheme(newValue: string, oldValue: string) {\n    this.el.classList.remove(`ld-theme-${oldValue}`)\n    if (newValue) this.el.classList.add(`ld-theme-${newValue}`)\n  }\n\n  @Watch('expanded')\n  updateFilter(newExpanded: boolean) {\n    if (!newExpanded) {\n      this.resetFilter()\n    }\n  }\n\n  /** Updates shadow height */\n  @Method()\n  async updateShadowHeight(height: string) {\n    this.shadowHeight = height\n  }\n\n  /** Focuses the tab */\n  @Method()\n  async resetFilter() {\n    this.filterInputValue = ''\n  }\n\n  componentWillLoad() {\n    this.popperClass && this.el.classList.add(this.popperClass)\n  }\n\n  render() {\n    return (\n      <Host\n        style={{\n          zIndex: this.isPinned ? '2147483647' : '2147483646',\n          display: this.expanded ? 'block' : 'none',\n        }}\n      >\n        <div\n          class={getClassNames([\n            'ld-select-popper',\n            this.detached && 'ld-select-popper--detached',\n            this.expanded && 'ld-select-popper--expanded',\n            this.filter && 'ld-select-popper--filter',\n            this.allOptionsFiltered && 'ld-select-popper--all-filtered',\n            this.isPinned && 'ld-select-popper--pinned',\n            this.size && `ld-select-popper--${this.size}`,\n          ])}\n          part=\"popper\"\n        >\n          {this.filter && (\n            <div class=\"ld-select-popper__filter-container\">\n              <input\n                aria-haspopup={this.allOptionsFiltered ? undefined : 'listbox'}\n                aria-label={this.canCreate ? this.createInputLabel : undefined}\n                type=\"text\"\n                placeholder={this.filterPlaceholder}\n                class=\"ld-select-popper__filter-input\"\n                part=\"filter-input focusable\"\n                onInput={this.handleFilterInput}\n              />\n              {this.canCreate && (\n                <ld-button\n                  onClick={this.handleCreate}\n                  size=\"sm\"\n                  class=\"ld-select-popper__create-button\"\n                  aria-label={this.createButtonLabel}\n                >\n                  <ld-icon\n                    class=\"ld-select-popper__create-icon\"\n                    role=\"presentation\"\n                    size=\"sm\"\n                  >\n                    <svg viewBox=\"-1 -1 24 24\" fill=\"none\">\n                      <path\n                        d=\"M2.5 11h17M11 19.5v-17\"\n                        stroke=\"currentColor\"\n                        stroke-width=\"3\"\n                        stroke-linecap=\"round\"\n                        stroke-linejoin=\"round\"\n                      />\n                    </svg>\n                  </ld-icon>\n                </ld-button>\n              )}\n            </div>\n          )}\n          <div\n            class=\"ld-select-popper__scroll-container\"\n            part=\"popper-scroll-container\"\n          >\n            <slot></slot>\n            <div\n              class=\"ld-select-popper__shadow\"\n              style={{ height: this.isPinned ? '100%' : this.shadowHeight }}\n              part=\"shadow\"\n            ></div>\n          </div>\n        </div>\n      </Host>\n    )\n  }\n}\n"],"mappings":"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"}