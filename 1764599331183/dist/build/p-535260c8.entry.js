import{r as t,c as e,h as s,g as i,H as n}from"./p-3274e4e5.js";import{i as a}from"./p-f13d3119.js";import{i as h}from"./p-8dc70a87.js";import{c as d}from"./p-71026bf3.js";const o=":host{display:inline-flex}";const c=o;const r=class{constructor(s){t(this,s);this.ldcontextmenuopen=e(this,"ldcontextmenuopen",7);this.ldcontextmenuclose=e(this,"ldcontextmenuclose",7);this.resetFocus=async()=>{const[t]=this.triggerSlotRef.assignedElements();if(h(t)){await t.focusInner();return}if(a(t)){t.focus()}};this.focusFirstMenuitem=async t=>{const e=await t.getFirstMenuItem();if(!e){return}await e.focusInner()};this.handleKeyDown=async t=>{switch(t.key){case"Escape":t.preventDefault();await this.tooltipRef.hideTooltip();break;case"Tab":t.preventDefault()}};this.handleMenuOpen=async()=>{const t=await this.tooltipRef.getTooltip();const e=t.querySelector("ld-menu");if(!this.initialized){e.addEventListener("keydown",this.handleKeyDown);this.initialized=true}this.focusFirstMenuitem(e);this.ldcontextmenuopen.emit()};this.handleMenuClose=()=>{this.resetFocus();this.ldcontextmenuclose.emit()};this.position="bottom left";this.rightClick=false;this.size=undefined;this.tetherOptions=undefined;this.initialized=false}async showContextMenu(){await this.tooltipRef.showTooltip()}async hideContextMenu(){await this.tooltipRef.hideTooltip()}updateSize(){if(this.size){this.menuRef.setAttribute("size",this.size)}else{this.menuRef.removeAttribute("size")}}componentDidLoad(){const t=this.el.getAttribute("style");this.updateSize();if(t){this.menuRef.setAttribute("style",t);this.el.removeAttribute("style")}this.triggerSlotRef.assignedElements().forEach((t=>t.ariaHasPopup="menu"))}render(){return s("ld-tooltip",{key:"f98269a43734d7370ffdd5acea330ad5cc20e833",onLdtooltipclose:this.handleMenuClose,onLdtooltipopen:this.handleMenuOpen,ref:t=>this.tooltipRef=t,rightClick:this.rightClick,part:"tooltip",position:this.position,preventScreenreader:true,tag:"span",tetherOptions:this.tetherOptions,triggerType:"click",unstyled:true},s("slot",{key:"80f69608b16c360afe42b4678aba18e47b613c3f",name:"trigger",ref:t=>this.triggerSlotRef=t,slot:"trigger"}),s("ld-menu",{key:"6cca4532f9fd8a53f7d1c408d3c8d7c6ce50abf1",part:"menu",ref:t=>this.menuRef=t},s("slot",{key:"20c2cde45d2472c3bdee797d15efeb78120b501d"})))}get el(){return i(this)}static get watchers(){return{size:["updateSize"]}}};r.style=c;const l=":host{display:block}.ld-menuitem .ld-menuitem__button{display:grid;width:100%}";const f=l;const u=new Map([["danger","danger-ghost"],["highlight","ghost"],["neutral","neutral-ghost"]]);const b=class{constructor(s){t(this,s);this.ldclosetooltip=e(this,"ldclosetooltip",7);this.handleClick=t=>{if(this.preventClose)return;this.ldclosetooltip.emit(t)};this.disabled=undefined;this.href=undefined;this.ldTabindex=undefined;this.preventClose=undefined;this.mode="neutral";this.size=undefined;this.target=undefined;this.clonedAttributes=undefined}async focusInner(){var t;(t=this.buttonRef)===null||t===void 0?void 0:t.focusInner()}componentWillLoad(){this.attributesObserver=d.call(this,["ld-tabindex","mode","size"])}disconnectedCallback(){if(this.attributesObserver)this.attributesObserver.disconnect()}render(){return s(n,{key:"b7c7b3e90b3f9110d3c7a76dbfc6b9445974e357"},s("li",{key:"6372e2011256a9cb63172033578e4bddabd77d16",class:"ld-menuitem",part:"listitem",role:"menuitem"},s("ld-button",Object.assign({key:"33b44e0c93a591790b7fc40c9500721f534836c8"},this.clonedAttributes,{class:"ld-menuitem__button",disabled:this.disabled,href:this.href,iconOnly:false,justifyContent:"start",ldTabindex:this.ldTabindex,mode:u.get(this.mode),onClick:this.handleClick,part:"focusable button",ref:t=>this.buttonRef=t,size:this.size,target:this.target,type:"button"}),s("slot",{key:"070e6520d45e64fa5ebde534a5b9fea9f1f95475"}))))}get el(){return i(this)}};b.style=f;export{r as ld_context_menu,b as ld_menuitem};
//# sourceMappingURL=p-535260c8.entry.js.map