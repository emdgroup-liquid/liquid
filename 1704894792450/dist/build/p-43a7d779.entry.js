import{r as s,h as t,H as i,g as e}from"./p-21a69c18.js";import{T as n}from"./p-6f9b9619.js";import{a as r,b as o,c as h}from"./p-f13d3119.js";import"./p-8dc70a87.js";const a=":host{display:inline-flex}.ld-menu{background:var(--ld-col-wht);border-radius:var(--ld-br-l);box-shadow:var(--ld-shadow-stacked);box-sizing:border-box;list-style:none;margin:0;padding:var(--ld-sp-12)}";const l=s=>{if(!r(s)){return[]}if(o(s)){return[s]}const t=[];if(h(s)){s.assignedNodes().forEach((s=>t.push(...l(s))));return t}s.childNodes.forEach((s=>t.push(...l(s))));return t};const c=class{constructor(t){s(this,t);this.initMenuItems=(s,t=false)=>{if(!r(s)){return}if(o(s)){s.size=this.size;if(!t){return}s.ldTabindex=this.initialized?-1:0;if(!this.initialized){this.initialized=true}return}if(h(s)){s.assignedNodes().forEach((s=>this.initMenuItems(s)));return}s.childNodes.forEach((s=>this.initMenuItems(s)))};this.getAllMenuItems=()=>{const s=[];this.el.querySelectorAll("slot, ld-menuitem").forEach((t=>s.push(...l(t))));return s};this.focusFirst=s=>{const t=this.getAllMenuItems();const[i]=t;s.ldTabindex=-1;i.ldTabindex=0;i.focusInner()};this.focusLast=s=>{const t=this.getAllMenuItems();const i=t[t.length-1];s.ldTabindex=-1;i.ldTabindex=0;i.focusInner()};this.focusNext=s=>{const t=this.getAllMenuItems();const i=t.indexOf(s);const e=t.length>i+1?t[i+1]:t[0];s.ldTabindex=-1;e.ldTabindex=0;e.focusInner()};this.focusPrev=s=>{const t=this.getAllMenuItems();const i=t.indexOf(s);const e=i===0?t[t.length-1]:t[i-1];s.ldTabindex=-1;e.ldTabindex=0;e.focusInner()};this.handleKeyDown=s=>{const t=s.target;let i;switch(s.key){case"ArrowUp":s.preventDefault();if(s.metaKey){this.focusFirst(t)}else{this.focusPrev(t)}break;case"ArrowDown":s.preventDefault();if(s.metaKey){this.focusLast(t)}else{this.focusNext(t)}break;case"Home":s.preventDefault();this.focusFirst(t);break;case"End":s.preventDefault();this.focusLast(t);break;default:i=this.typeAheadHandler.typeAhead(s.key,t);if(i){t.ldTabindex=-1;i.ldTabindex=0}}};this.updateMenuItems=(s=false)=>{this.el.querySelectorAll("slot, ld-menuitem").forEach((t=>this.initMenuItems(t,s)))};this.size=undefined;this.initialized=false;this.typeAheadHandler=undefined}async getFirstMenuItem(){return this.getAllMenuItems()[0]}handleSizeChange(){this.updateMenuItems()}componentWillLoad(){this.updateMenuItems(true);this.typeAheadHandler=new n(this.getAllMenuItems())}disconnectedCallback(){var s;(s=this.typeAheadHandler)===null||s===void 0?void 0:s.clearTimeout()}render(){return t(i,{onKeyDown:this.handleKeyDown},t("ul",{class:"ld-menu",part:"list",role:"menu"},t("slot",null)))}get el(){return e(this)}static get watchers(){return{size:["handleSizeChange"]}}};c.style=a;export{c as ld_menu};
//# sourceMappingURL=p-43a7d779.entry.js.map