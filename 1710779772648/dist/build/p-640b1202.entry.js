import{r as s,h as t,H as e,g as i}from"./p-b82f54f4.js";import{T as n}from"./p-6f9b9619.js";import{a as r,b as a,c as o}from"./p-f13d3119.js";import"./p-8dc70a87.js";const h=":host{display:inline-flex}.ld-menu{background:var(--ld-col-wht);border-radius:var(--ld-br-l);box-shadow:var(--ld-shadow-stacked);box-sizing:border-box;list-style:none;margin:0;padding:var(--ld-sp-12)}";const c=h;const d=s=>{if(!r(s)){return[]}if(a(s)){return[s]}const t=[];if(o(s)){s.assignedNodes().forEach((s=>t.push(...d(s))));return t}s.childNodes.forEach((s=>t.push(...d(s))));return t};const l=class{constructor(t){s(this,t);this.initMenuItems=(s,t=false)=>{if(!r(s)){return}if(a(s)){s.size=this.size;if(!t){return}s.ldTabindex=this.initialized?-1:0;if(!this.initialized){this.initialized=true}return}if(o(s)){s.assignedNodes().forEach((s=>this.initMenuItems(s)));return}s.childNodes.forEach((s=>this.initMenuItems(s)))};this.getAllMenuItems=()=>{const s=[];this.el.querySelectorAll("slot, ld-menuitem").forEach((t=>s.push(...d(t))));return s};this.focusFirst=s=>{const t=this.getAllMenuItems();const[e]=t;s.ldTabindex=-1;e.ldTabindex=0;e.focusInner()};this.focusLast=s=>{const t=this.getAllMenuItems();const e=t[t.length-1];s.ldTabindex=-1;e.ldTabindex=0;e.focusInner()};this.focusNext=s=>{const t=this.getAllMenuItems();const e=t.indexOf(s);const i=t.length>e+1?t[e+1]:t[0];s.ldTabindex=-1;i.ldTabindex=0;i.focusInner()};this.focusPrev=s=>{const t=this.getAllMenuItems();const e=t.indexOf(s);const i=e===0?t[t.length-1]:t[e-1];s.ldTabindex=-1;i.ldTabindex=0;i.focusInner()};this.handleKeyDown=s=>{const t=s.target;let e;switch(s.key){case"ArrowUp":s.preventDefault();if(s.metaKey){this.focusFirst(t)}else{this.focusPrev(t)}break;case"ArrowDown":s.preventDefault();if(s.metaKey){this.focusLast(t)}else{this.focusNext(t)}break;case"Home":s.preventDefault();this.focusFirst(t);break;case"End":s.preventDefault();this.focusLast(t);break;default:e=this.typeAheadHandler.typeAhead(s.key,t);if(e){t.ldTabindex=-1;e.ldTabindex=0}}};this.updateMenuItems=(s=false)=>{this.el.querySelectorAll("slot, ld-menuitem").forEach((t=>this.initMenuItems(t,s)))};this.size=undefined;this.initialized=false;this.typeAheadHandler=undefined}async getFirstMenuItem(){return this.getAllMenuItems()[0]}handleSizeChange(){this.updateMenuItems()}componentWillLoad(){this.updateMenuItems(true);this.typeAheadHandler=new n(this.getAllMenuItems())}disconnectedCallback(){var s;(s=this.typeAheadHandler)===null||s===void 0?void 0:s.clearTimeout()}render(){return t(e,{key:"dfe183598887074c8f8bfd2928dabc9efda32c83",onKeyDown:this.handleKeyDown},t("ul",{key:"a566ab3df451d67eaedf53ccde787935ca38bd79",class:"ld-menu",part:"list",role:"menu"},t("slot",{key:"4b952aabe1044afab144cc5e89dbb35b86b617a8"})))}get el(){return i(this)}static get watchers(){return{size:["handleSizeChange"]}}};l.style=c;export{l as ld_menu};
//# sourceMappingURL=p-640b1202.entry.js.map