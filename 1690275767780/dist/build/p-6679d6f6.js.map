{"version":3,"names":["_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_assertThisInitialized","self","ReferenceError","isFunction","value","isNumber","isObject","isString","isUndefined","undefined","addClass","el","name","split","forEach","cls","trim","classList","add","getClass","key","classes","classPrefix","removeClass","remove","updateClasses","all","indexOf","contains","deferred","defer","fn","push","flush","pop","_scrollBarSize","extend","out","args","Array","apply","arguments","slice","obj","hasOwnProperty","call","getScrollBarSize","inner","document","createElement","style","width","height","outer","position","top","left","pointerEvents","visibility","overflow","appendChild","body","widthContained","offsetWidth","widthScroll","clientWidth","removeChild","uniqueId","id","zeroPosCache","zeroElements","Map","getBounds","doc","documentElement","ownerDocument","docEl","box","_getActualBoundingClientRect","origin","_getOrigin","scrollWidth","right","scrollHeight","bottom","clientTop","clientLeft","clientHeight","getScrollHandleBounds","target","bounds","targetScrollTop","scrollTop","targetIsBody","pageXOffset","pageYOffset","innerHeight","innerWidth","getComputedStyle","hasBottomScroll","overflowX","scrollBottom","parseFloat","borderTopWidth","borderBottomWidth","borderLeftWidth","fitAdj","Math","pow","max","scrollPercentage","getVisibleBounds","min","removeUtilElements","has","get","delete","node","boundingRect","getBoundingClientRect","rect","k","frameElement","defaultView","frameRect","err","setAttribute","set","getAttribute","Abutment","_ref","_this","this","_this$cache","cache","element","targetPos","getTargetBounds","abutted","side","targetPosSide","sides","_this$options","options","length","addTargetClasses","BOUNDS_FORMAT","getBoundingRect","tether","to","scrollParents","nodeType","size","pos","win","i","toUpperCase","substr","_addOutOfBoundsClass","oob","addClasses","outOfBoundsClass","oobClass","_calculateOOBAndPinnedLeft","pin","pinned","_calculateOOBAndPinnedTop","_flipXTogether","tAttachment","eAttachment","targetWidth","_flipYTogether","targetHeight","_getAllClasses","constraints","allClasses","constraint","pinnedClass","Constraint","targetAttachment","bodyElement","lastSize","_this$lastSize","targetSize","attachment","changeAttachX","changeAttachY","_attachment$split","map","updateAttachClasses","trigger","Shift","shift","shiftTop","shiftLeft","_shift","_ref2","Evented","_proto","on","event","handler","ctx","once","bindings","off","binding","index","splice","_this2","_len","_key","context","MIRROR_LR","center","MIRROR_TB","middle","OFFSET_MAP","addOffset","offsets","attachmentToOffset","autoToFixedAttachment","relativeToAttachment","offsetToPx","offset","parseTopLeft","_value$split","getScrollParents","computedStyle","parents","parent","parentNode","_style","overflowY","test","getOffsetParent","offsetParent","TetherBase","modules","isFullscreenElement","e","d","fe","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","within","a","b","diff","transformKey","transforms","tethers","now","performance","lastCall","lastDuration","pendingTimeout","tick","setTimeout","clearTimeout","window","addEventListener","TetherClass","_Evented","bind","history","setOptions","module","initialize","defaults","targetOffset","targetModifier","querySelector","Error","jquery","_addClasses","disable","enabled","enable","clearCache","_cache","getter","_this3","_this$options2","_this4","_this$options3","removeEventListener","destroy","_this5","_removeClasses","elementAttach","targetAttach","_this6","_this$options4","_addAttachClasses","flushChanges","_this7","elementPos","manualOffset","manualTargetOffset","ret","scrollbarSize","next","page","viewport","parentElement","optimizations","moveElement","offsetPosition","offsetParentStyle","offsetParentSize","offsetBorder","toLowerCase","scrollLeft","move","unshift","_this8","same","type","found","point","css","transcribe","_same","_pos","hasOptimizations","gpu","yPos","xPos","devicePixelRatio","round","allowPositionFixed","moved","offsetParentIsBody","currentNode","tagName","writeCSS","write","val","elVal","_this$options5","_this9","_this$options6","className","Tether","_this10","_this$options7","markers","dot","_this$markers$type$do"],"sources":["../node_modules/tether/dist/js/tether.esm.js"],"sourcesContent":["/*! tether 2.0.0 */\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n\n  _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n * @param {*} value The param to check if it is a function\n */\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\n/**\n * Checks if `value` is classified as a `Number` object.\n * @param {*} value The param to check if it is a number\n */\n\nfunction isNumber(value) {\n  return typeof value === 'number';\n}\n/**\n * Checks if `value` is classified as an `Object`.\n * @param {*} value The param to check if it is an object\n */\n\nfunction isObject(value) {\n  return typeof value === 'object';\n}\n/**\n * Checks if `value` is classified as a `String` object.\n * @param {*} value The param to check if it is a string\n */\n\nfunction isString(value) {\n  return typeof value === 'string';\n}\n/**\n * Checks if `value` is undefined.\n * @param {*} value The param to check if it is undefined\n */\n\nfunction isUndefined(value) {\n  return value === undefined;\n}\n\nfunction addClass(el, name) {\n  name.split(' ').forEach(function (cls) {\n    if (cls.trim()) {\n      el.classList.add(cls);\n    }\n  });\n}\n/**\n * Get class string based on previously determined classes\n * @param  {String} [key=''] - default value for the classes object\n * @param  {Object} classes\n * @param  {String} classPrefix\n */\n\nfunction getClass(key, classes, classPrefix) {\n  if (key === void 0) {\n    key = '';\n  }\n\n  if (!isUndefined(classes) && !isUndefined(classes[key])) {\n    if (classes[key] === false) {\n      return '';\n    }\n\n    return classes[key];\n  } else if (classPrefix) {\n    return classPrefix + \"-\" + key;\n  } else {\n    return key;\n  }\n}\nfunction removeClass(el, name) {\n  name.split(' ').forEach(function (cls) {\n    if (cls.trim()) {\n      el.classList.remove(cls);\n    }\n  });\n}\nfunction updateClasses(el, add, all) {\n  // Of the set of 'all' classes, we need the 'add' classes, and only the\n  // 'add' classes to be set.\n  all.forEach(function (cls) {\n    if (add.indexOf(cls) === -1 && el.classList.contains(cls)) {\n      removeClass(el, cls);\n    }\n  });\n  add.forEach(function (cls) {\n    if (!el.classList.contains(cls)) {\n      addClass(el, cls);\n    }\n  });\n}\n\nvar deferred = [];\nfunction defer(fn) {\n  deferred.push(fn);\n}\nfunction flush() {\n  var fn; // eslint-disable-next-line\n\n  while (fn = deferred.pop()) {\n    fn();\n  }\n}\n\nvar _scrollBarSize = null;\nfunction extend(out) {\n  if (out === void 0) {\n    out = {};\n  }\n\n  var args = [];\n  Array.prototype.push.apply(args, arguments);\n  args.slice(1).forEach(function (obj) {\n    if (obj) {\n      for (var key in obj) {\n        if ({}.hasOwnProperty.call(obj, key)) {\n          out[key] = obj[key];\n        }\n      }\n    }\n  });\n  return out;\n}\nfunction getScrollBarSize() {\n  if (_scrollBarSize) {\n    return _scrollBarSize;\n  }\n\n  var inner = document.createElement('div');\n  inner.style.width = '100%';\n  inner.style.height = '200px';\n  var outer = document.createElement('div');\n  extend(outer.style, {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    pointerEvents: 'none',\n    visibility: 'hidden',\n    width: '200px',\n    height: '150px',\n    overflow: 'hidden'\n  });\n  outer.appendChild(inner);\n  document.body.appendChild(outer);\n  var widthContained = inner.offsetWidth;\n  outer.style.overflow = 'scroll';\n  var widthScroll = inner.offsetWidth;\n\n  if (widthContained === widthScroll) {\n    widthScroll = outer.clientWidth;\n  }\n\n  document.body.removeChild(outer);\n  var width = widthContained - widthScroll;\n  _scrollBarSize = {\n    width: width,\n    height: width\n  };\n  return _scrollBarSize;\n}\nvar uniqueId = function () {\n  var id = 0;\n  return function () {\n    return ++id;\n  };\n}();\n\nvar zeroPosCache = {};\nvar zeroElements = new Map();\nfunction getBounds(body, el) {\n  var doc;\n\n  if (el === document) {\n    doc = document;\n    el = document.documentElement;\n  } else {\n    doc = el.ownerDocument;\n  }\n\n  var docEl = doc.documentElement;\n\n  var box = _getActualBoundingClientRect(el);\n\n  var origin = _getOrigin(body);\n\n  box.top -= origin.top;\n  box.left -= origin.left;\n\n  if (isUndefined(box.width)) {\n    box.width = document.body.scrollWidth - box.left - box.right;\n  }\n\n  if (isUndefined(box.height)) {\n    box.height = document.body.scrollHeight - box.top - box.bottom;\n  }\n\n  box.top = box.top - docEl.clientTop;\n  box.left = box.left - docEl.clientLeft;\n  box.right = doc.body.clientWidth - box.width - box.left;\n  box.bottom = doc.body.clientHeight - box.height - box.top;\n  return box;\n}\n/**\n * Gets bounds for when target modifiier is 'scroll-handle'\n * @param target\n * @return {{left: number, width: number, height: number}}\n */\n\nfunction getScrollHandleBounds(body, target) {\n  var bounds; // We have to do the check for the scrollTop and if target === document.body here and set to variables\n  // because we may reset target below.\n\n  var targetScrollTop = target.scrollTop;\n  var targetIsBody = target === document.body;\n\n  if (targetIsBody) {\n    target = document.documentElement;\n    bounds = {\n      left: pageXOffset,\n      top: pageYOffset,\n      height: innerHeight,\n      width: innerWidth\n    };\n  } else {\n    bounds = getBounds(body, target);\n  }\n\n  var style = getComputedStyle(target);\n  var hasBottomScroll = target.scrollWidth > target.clientWidth || [style.overflow, style.overflowX].indexOf('scroll') >= 0 || !targetIsBody;\n  var scrollBottom = 0;\n\n  if (hasBottomScroll) {\n    scrollBottom = 15;\n  }\n\n  var height = bounds.height - parseFloat(style.borderTopWidth) - parseFloat(style.borderBottomWidth) - scrollBottom;\n  var out = {\n    width: 15,\n    height: height * 0.975 * (height / target.scrollHeight),\n    left: bounds.left + bounds.width - parseFloat(style.borderLeftWidth) - 15\n  };\n  var fitAdj = 0;\n\n  if (height < 408 && targetIsBody) {\n    fitAdj = -0.00011 * Math.pow(height, 2) - 0.00727 * height + 22.58;\n  }\n\n  if (!targetIsBody) {\n    out.height = Math.max(out.height, 24);\n  }\n\n  var scrollPercentage = targetScrollTop / (target.scrollHeight - height);\n  out.top = scrollPercentage * (height - out.height - fitAdj) + bounds.top + parseFloat(style.borderTopWidth);\n\n  if (targetIsBody) {\n    out.height = Math.max(out.height, 24);\n  }\n\n  return out;\n}\n/**\n * Gets bounds for when target modifiier is 'visible\n * @param target\n * @return {{top: *, left: *, width: *, height: *}}\n */\n\nfunction getVisibleBounds(body, target) {\n  if (target === document.body) {\n    return {\n      top: pageYOffset,\n      left: pageXOffset,\n      height: innerHeight,\n      width: innerWidth\n    };\n  } else {\n    var bounds = getBounds(body, target);\n    var out = {\n      height: bounds.height,\n      width: bounds.width,\n      top: bounds.top,\n      left: bounds.left\n    };\n    out.height = Math.min(out.height, bounds.height - (pageYOffset - bounds.top));\n    out.height = Math.min(out.height, bounds.height - (bounds.top + bounds.height - (pageYOffset + innerHeight)));\n    out.height = Math.min(innerHeight, out.height);\n    out.height -= 2;\n    out.width = Math.min(out.width, bounds.width - (pageXOffset - bounds.left));\n    out.width = Math.min(out.width, bounds.width - (bounds.left + bounds.width - (pageXOffset + innerWidth)));\n    out.width = Math.min(innerWidth, out.width);\n    out.width -= 2;\n\n    if (out.top < pageYOffset) {\n      out.top = pageYOffset;\n    }\n\n    if (out.left < pageXOffset) {\n      out.left = pageXOffset;\n    }\n\n    return out;\n  }\n}\nfunction removeUtilElements(body) {\n  if (zeroElements.has(body)) {\n    body.removeChild(zeroElements.get(body));\n  }\n\n  zeroElements.delete(body);\n}\n/**\n * Same as native getBoundingClientRect, except it takes into account parent <frame> offsets\n * if the element lies within a nested document (<frame> or <iframe>-like).\n * @param node\n */\n\nfunction _getActualBoundingClientRect(node) {\n  var boundingRect = node.getBoundingClientRect(); // The original object returned by getBoundingClientRect is immutable, so we clone it\n  // We can't use extend because the properties are not considered part of the object by hasOwnProperty in IE9\n\n  var rect = {};\n\n  for (var k in boundingRect) {\n    rect[k] = boundingRect[k];\n  }\n\n  try {\n    if (node.ownerDocument !== document) {\n      var frameElement = node.ownerDocument.defaultView.frameElement;\n\n      if (frameElement) {\n        var frameRect = _getActualBoundingClientRect(frameElement);\n\n        rect.top += frameRect.top;\n        rect.bottom += frameRect.top;\n        rect.left += frameRect.left;\n        rect.right += frameRect.left;\n      }\n    }\n  } catch (err) {// Ignore \"Access is denied\" in IE11/Edge\n  }\n\n  return rect;\n}\n\nfunction _getOrigin(body) {\n  // getBoundingClientRect is unfortunately too accurate.  It introduces a pixel or two of\n  // jitter as the user scrolls that messes with our ability to detect if two positions\n  // are equivilant or not.  We place an element at the top left of the page that will\n  // get the same jitter, so we can cancel the two out.\n  var node = zeroElements.get(body);\n\n  if (!node || !body.contains(node)) {\n    node = document.createElement('div');\n    node.setAttribute('data-tether-id', uniqueId());\n    extend(node.style, {\n      top: 0,\n      left: 0,\n      position: 'absolute'\n    });\n    body.appendChild(node);\n    zeroElements.set(body, node);\n  }\n\n  var id = node.getAttribute('data-tether-id');\n\n  if (isUndefined(zeroPosCache[id])) {\n    zeroPosCache[id] = _getActualBoundingClientRect(node); // Clear the cache when this position call is done\n\n    defer(function () {\n      delete zeroPosCache[id];\n    });\n  }\n\n  return zeroPosCache[id];\n}\n\nvar Abutment = {\n  position: function position(_ref) {\n    var _this = this;\n\n    var top = _ref.top,\n        left = _ref.left;\n\n    var _this$cache = this.cache('element-bounds', function () {\n      return getBounds(_this.element);\n    }),\n        height = _this$cache.height,\n        width = _this$cache.width;\n\n    var targetPos = this.getTargetBounds();\n    var bottom = top + height;\n    var right = left + width;\n    var abutted = [];\n\n    if (top <= targetPos.bottom && bottom >= targetPos.top) {\n      ['left', 'right'].forEach(function (side) {\n        var targetPosSide = targetPos[side];\n\n        if (targetPosSide === left || targetPosSide === right) {\n          abutted.push(side);\n        }\n      });\n    }\n\n    if (left <= targetPos.right && right >= targetPos.left) {\n      ['top', 'bottom'].forEach(function (side) {\n        var targetPosSide = targetPos[side];\n\n        if (targetPosSide === top || targetPosSide === bottom) {\n          abutted.push(side);\n        }\n      });\n    }\n\n    var sides = ['left', 'top', 'right', 'bottom'];\n    var _this$options = this.options,\n        classes = _this$options.classes,\n        classPrefix = _this$options.classPrefix;\n    this.all.push(getClass('abutted', classes, classPrefix));\n    sides.forEach(function (side) {\n      _this.all.push(getClass('abutted', classes, classPrefix) + \"-\" + side);\n    });\n\n    if (abutted.length) {\n      this.add.push(getClass('abutted', classes, classPrefix));\n    }\n\n    abutted.forEach(function (side) {\n      _this.add.push(getClass('abutted', classes, classPrefix) + \"-\" + side);\n    });\n    defer(function () {\n      if (!(_this.options.addTargetClasses === false)) {\n        updateClasses(_this.target, _this.add, _this.all);\n      }\n\n      updateClasses(_this.element, _this.add, _this.all);\n    });\n    return true;\n  }\n};\n\nvar BOUNDS_FORMAT = ['left', 'top', 'right', 'bottom'];\n/**\n * Returns an array of bounds of the format [left, top, right, bottom]\n * @param tether\n * @param to\n * @return {*[]|HTMLElement|ActiveX.IXMLDOMElement}\n */\n\nfunction getBoundingRect(body, tether, to) {\n  // arg to is required\n  if (!to) {\n    return null;\n  }\n\n  if (to === 'scrollParent') {\n    to = tether.scrollParents[0];\n  } else if (to === 'window') {\n    to = [pageXOffset, pageYOffset, innerWidth + pageXOffset, innerHeight + pageYOffset];\n  }\n\n  if (to === document) {\n    to = to.documentElement;\n  }\n\n  if (!isUndefined(to.nodeType)) {\n    var node = to;\n    var size = getBounds(body, to);\n    var pos = size;\n    var style = getComputedStyle(to);\n    to = [pos.left, pos.top, size.width + pos.left, size.height + pos.top]; // Account any parent Frames scroll offset\n\n    if (node.ownerDocument !== document) {\n      var win = node.ownerDocument.defaultView;\n      to[0] += win.pageXOffset;\n      to[1] += win.pageYOffset;\n      to[2] += win.pageXOffset;\n      to[3] += win.pageYOffset;\n    }\n\n    BOUNDS_FORMAT.forEach(function (side, i) {\n      side = side[0].toUpperCase() + side.substr(1);\n\n      if (side === 'Top' || side === 'Left') {\n        to[i] += parseFloat(style[\"border\" + side + \"Width\"]);\n      } else {\n        to[i] -= parseFloat(style[\"border\" + side + \"Width\"]);\n      }\n    });\n  }\n\n  return to;\n}\n/**\n * Add out of bounds classes to the list of classes we add to tether\n * @param {string[]} oob An array of directions that are out of bounds\n * @param {string[]} addClasses The array of classes to add to Tether\n * @param {string[]} classes The array of class types for Tether\n * @param {string} classPrefix The prefix to add to the front of the class\n * @param {string} outOfBoundsClass The class to apply when out of bounds\n * @private\n */\n\n\nfunction _addOutOfBoundsClass(oob, addClasses, classes, classPrefix, outOfBoundsClass) {\n  if (oob.length) {\n    var oobClass;\n\n    if (!isUndefined(outOfBoundsClass)) {\n      oobClass = outOfBoundsClass;\n    } else {\n      oobClass = getClass('out-of-bounds', classes, classPrefix);\n    }\n\n    addClasses.push(oobClass);\n    oob.forEach(function (side) {\n      addClasses.push(oobClass + \"-\" + side);\n    });\n  }\n}\n/**\n * Calculates if out of bounds or pinned in the X direction.\n *\n * @param {number} left\n * @param {number[]} bounds Array of bounds of the format [left, top, right, bottom]\n * @param {number} width\n * @param pin\n * @param pinned\n * @param {string[]} oob\n * @return {number}\n * @private\n */\n\n\nfunction _calculateOOBAndPinnedLeft(left, bounds, width, pin, pinned, oob) {\n  if (left < bounds[0]) {\n    if (pin.indexOf('left') >= 0) {\n      left = bounds[0];\n      pinned.push('left');\n    } else {\n      oob.push('left');\n    }\n  }\n\n  if (left + width > bounds[2]) {\n    if (pin.indexOf('right') >= 0) {\n      left = bounds[2] - width;\n      pinned.push('right');\n    } else {\n      oob.push('right');\n    }\n  }\n\n  return left;\n}\n/**\n * Calculates if out of bounds or pinned in the Y direction.\n *\n * @param {number} top\n * @param {number[]} bounds Array of bounds of the format [left, top, right, bottom]\n * @param {number} height\n * @param pin\n * @param {string[]} pinned\n * @param {string[]} oob\n * @return {number}\n * @private\n */\n\n\nfunction _calculateOOBAndPinnedTop(top, bounds, height, pin, pinned, oob) {\n  if (top < bounds[1]) {\n    if (pin.indexOf('top') >= 0) {\n      top = bounds[1];\n      pinned.push('top');\n    } else {\n      oob.push('top');\n    }\n  }\n\n  if (top + height > bounds[3]) {\n    if (pin.indexOf('bottom') >= 0) {\n      top = bounds[3] - height;\n      pinned.push('bottom');\n    } else {\n      oob.push('bottom');\n    }\n  }\n\n  return top;\n}\n/**\n * Flip X \"together\"\n * @param {object} tAttachment The target attachment\n * @param {object} eAttachment The element attachment\n * @param {number[]} bounds Array of bounds of the format [left, top, right, bottom]\n * @param {number} width\n * @param targetWidth\n * @param {number} left\n * @private\n */\n\n\nfunction _flipXTogether(tAttachment, eAttachment, bounds, width, targetWidth, left) {\n  if (left < bounds[0] && tAttachment.left === 'left') {\n    if (eAttachment.left === 'right') {\n      left += targetWidth;\n      tAttachment.left = 'right';\n      left += width;\n      eAttachment.left = 'left';\n    } else if (eAttachment.left === 'left') {\n      left += targetWidth;\n      tAttachment.left = 'right';\n      left -= width;\n      eAttachment.left = 'right';\n    }\n  } else if (left + width > bounds[2] && tAttachment.left === 'right') {\n    if (eAttachment.left === 'left') {\n      left -= targetWidth;\n      tAttachment.left = 'left';\n      left -= width;\n      eAttachment.left = 'right';\n    } else if (eAttachment.left === 'right') {\n      left -= targetWidth;\n      tAttachment.left = 'left';\n      left += width;\n      eAttachment.left = 'left';\n    }\n  } else if (tAttachment.left === 'center') {\n    if (left + width > bounds[2] && eAttachment.left === 'left') {\n      left -= width;\n      eAttachment.left = 'right';\n    } else if (left < bounds[0] && eAttachment.left === 'right') {\n      left += width;\n      eAttachment.left = 'left';\n    }\n  }\n\n  return left;\n}\n/**\n * Flip Y \"together\"\n * @param {object} tAttachment The target attachment\n * @param {object} eAttachment The element attachment\n * @param {number[]} bounds Array of bounds of the format [left, top, right, bottom]\n * @param {number} height\n * @param targetHeight\n * @param {number} top\n * @private\n */\n\n\nfunction _flipYTogether(tAttachment, eAttachment, bounds, height, targetHeight, top) {\n  if (tAttachment.top === 'top') {\n    if (eAttachment.top === 'bottom' && top < bounds[1]) {\n      top += targetHeight;\n      tAttachment.top = 'bottom';\n      top += height;\n      eAttachment.top = 'top';\n    } else if (eAttachment.top === 'top' && top + height > bounds[3] && top - (height - targetHeight) >= bounds[1]) {\n      top -= height - targetHeight;\n      tAttachment.top = 'bottom';\n      eAttachment.top = 'bottom';\n    }\n  }\n\n  if (tAttachment.top === 'bottom') {\n    if (eAttachment.top === 'top' && top + height > bounds[3]) {\n      top -= targetHeight;\n      tAttachment.top = 'top';\n      top -= height;\n      eAttachment.top = 'bottom';\n    } else if (eAttachment.top === 'bottom' && top < bounds[1] && top + (height * 2 - targetHeight) <= bounds[3]) {\n      top += height - targetHeight;\n      tAttachment.top = 'top';\n      eAttachment.top = 'top';\n    }\n  }\n\n  if (tAttachment.top === 'middle') {\n    if (top + height > bounds[3] && eAttachment.top === 'top') {\n      top -= height;\n      eAttachment.top = 'bottom';\n    } else if (top < bounds[1] && eAttachment.top === 'bottom') {\n      top += height;\n      eAttachment.top = 'top';\n    }\n  }\n\n  return top;\n}\n/**\n * Get all the initial classes\n * @param classes\n * @param {string} classPrefix\n * @param constraints\n * @return {[*, *]}\n * @private\n */\n\n\nfunction _getAllClasses(classes, classPrefix, constraints) {\n  var allClasses = [getClass('pinned', classes, classPrefix), getClass('out-of-bounds', classes, classPrefix)];\n  constraints.forEach(function (constraint) {\n    var outOfBoundsClass = constraint.outOfBoundsClass,\n        pinnedClass = constraint.pinnedClass;\n\n    if (outOfBoundsClass) {\n      allClasses.push(outOfBoundsClass);\n    }\n\n    if (pinnedClass) {\n      allClasses.push(pinnedClass);\n    }\n  });\n  allClasses.forEach(function (cls) {\n    ['left', 'top', 'right', 'bottom'].forEach(function (side) {\n      allClasses.push(cls + \"-\" + side);\n    });\n  });\n  return allClasses;\n}\n\nvar Constraint = {\n  position: function position(_ref) {\n    var _this = this;\n\n    var top = _ref.top,\n        left = _ref.left,\n        targetAttachment = _ref.targetAttachment;\n\n    if (!this.options.constraints) {\n      return true;\n    }\n\n    var _this$cache = this.cache('element-bounds', function () {\n      return getBounds(_this.bodyElement, _this.element);\n    }),\n        height = _this$cache.height,\n        width = _this$cache.width;\n\n    if (width === 0 && height === 0 && !isUndefined(this.lastSize)) {\n      // Handle the item getting hidden as a result of our positioning without glitching\n      // the classes in and out\n      var _this$lastSize = this.lastSize;\n      width = _this$lastSize.width;\n      height = _this$lastSize.height;\n    }\n\n    var targetSize = this.cache('target-bounds', function () {\n      return _this.getTargetBounds();\n    });\n    var targetHeight = targetSize.height,\n        targetWidth = targetSize.width;\n    var _this$options = this.options,\n        classes = _this$options.classes,\n        classPrefix = _this$options.classPrefix;\n\n    var allClasses = _getAllClasses(classes, classPrefix, this.options.constraints);\n\n    var addClasses = [];\n    var tAttachment = extend({}, targetAttachment);\n    var eAttachment = extend({}, this.attachment);\n    this.options.constraints.forEach(function (constraint) {\n      var to = constraint.to,\n          attachment = constraint.attachment,\n          pin = constraint.pin;\n\n      if (isUndefined(attachment)) {\n        attachment = '';\n      }\n\n      var changeAttachX, changeAttachY;\n\n      if (attachment.indexOf(' ') >= 0) {\n        var _attachment$split = attachment.split(' ');\n\n        changeAttachY = _attachment$split[0];\n        changeAttachX = _attachment$split[1];\n      } else {\n        changeAttachX = changeAttachY = attachment;\n      }\n\n      var bounds = getBoundingRect(_this.bodyElement, _this, to);\n\n      if (changeAttachY === 'target' || changeAttachY === 'both') {\n        if (top < bounds[1] && tAttachment.top === 'top') {\n          top += targetHeight;\n          tAttachment.top = 'bottom';\n        }\n\n        if (top + height > bounds[3] && tAttachment.top === 'bottom') {\n          top -= targetHeight;\n          tAttachment.top = 'top';\n        }\n      }\n\n      if (changeAttachY === 'together') {\n        top = _flipYTogether(tAttachment, eAttachment, bounds, height, targetHeight, top);\n      }\n\n      if (changeAttachX === 'target' || changeAttachX === 'both') {\n        if (left < bounds[0] && tAttachment.left === 'left') {\n          left += targetWidth;\n          tAttachment.left = 'right';\n        }\n\n        if (left + width > bounds[2] && tAttachment.left === 'right') {\n          left -= targetWidth;\n          tAttachment.left = 'left';\n        }\n      }\n\n      if (changeAttachX === 'together') {\n        left = _flipXTogether(tAttachment, eAttachment, bounds, width, targetWidth, left);\n      }\n\n      if (changeAttachY === 'element' || changeAttachY === 'both') {\n        if (top < bounds[1] && eAttachment.top === 'bottom') {\n          top += height;\n          eAttachment.top = 'top';\n        }\n\n        if (top + height > bounds[3] && eAttachment.top === 'top') {\n          top -= height;\n          eAttachment.top = 'bottom';\n        }\n      }\n\n      if (changeAttachX === 'element' || changeAttachX === 'both') {\n        if (left < bounds[0]) {\n          if (eAttachment.left === 'right') {\n            left += width;\n            eAttachment.left = 'left';\n          } else if (eAttachment.left === 'center') {\n            left += width / 2;\n            eAttachment.left = 'left';\n          }\n        }\n\n        if (left + width > bounds[2]) {\n          if (eAttachment.left === 'left') {\n            left -= width;\n            eAttachment.left = 'right';\n          } else if (eAttachment.left === 'center') {\n            left -= width / 2;\n            eAttachment.left = 'right';\n          }\n        }\n      }\n\n      if (isString(pin)) {\n        pin = pin.split(',').map(function (p) {\n          return p.trim();\n        });\n      } else if (pin === true) {\n        pin = ['top', 'left', 'right', 'bottom'];\n      }\n\n      pin = pin || [];\n      var pinned = [];\n      var oob = [];\n      left = _calculateOOBAndPinnedLeft(left, bounds, width, pin, pinned, oob);\n      top = _calculateOOBAndPinnedTop(top, bounds, height, pin, pinned, oob);\n\n      if (pinned.length) {\n        var pinnedClass;\n\n        if (!isUndefined(_this.options.pinnedClass)) {\n          pinnedClass = _this.options.pinnedClass;\n        } else {\n          pinnedClass = getClass('pinned', classes, classPrefix);\n        }\n\n        addClasses.push(pinnedClass);\n        pinned.forEach(function (side) {\n          addClasses.push(pinnedClass + \"-\" + side);\n        });\n      }\n\n      _addOutOfBoundsClass(oob, addClasses, classes, classPrefix, _this.options.outOfBoundsClass);\n\n      if (pinned.indexOf('left') >= 0 || pinned.indexOf('right') >= 0) {\n        eAttachment.left = tAttachment.left = false;\n      }\n\n      if (pinned.indexOf('top') >= 0 || pinned.indexOf('bottom') >= 0) {\n        eAttachment.top = tAttachment.top = false;\n      }\n\n      if (tAttachment.top !== targetAttachment.top || tAttachment.left !== targetAttachment.left || eAttachment.top !== _this.attachment.top || eAttachment.left !== _this.attachment.left) {\n        _this.updateAttachClasses(eAttachment, tAttachment);\n\n        _this.trigger('update', {\n          attachment: eAttachment,\n          targetAttachment: tAttachment\n        });\n      }\n    });\n    defer(function () {\n      if (!(_this.options.addTargetClasses === false)) {\n        updateClasses(_this.target, addClasses, allClasses);\n      }\n\n      updateClasses(_this.element, addClasses, allClasses);\n    });\n    return {\n      top: top,\n      left: left\n    };\n  }\n};\n\nvar Shift = {\n  position: function position(_ref) {\n    var top = _ref.top,\n        left = _ref.left;\n\n    if (!this.options.shift) {\n      return;\n    }\n\n    var shift = this.options.shift;\n\n    if (isFunction(shift)) {\n      shift = shift.call(this, {\n        top: top,\n        left: left\n      });\n    }\n\n    var shiftTop, shiftLeft;\n\n    if (isString(shift)) {\n      shift = shift.split(' ');\n      shift[1] = shift[1] || shift[0];\n      var _shift = shift;\n      shiftTop = _shift[0];\n      shiftLeft = _shift[1];\n      shiftTop = parseFloat(shiftTop, 10);\n      shiftLeft = parseFloat(shiftLeft, 10);\n    } else {\n      var _ref2 = [shift.top, shift.left];\n      shiftTop = _ref2[0];\n      shiftLeft = _ref2[1];\n    }\n\n    top += shiftTop;\n    left += shiftLeft;\n    return {\n      top: top,\n      left: left\n    };\n  }\n};\n\nvar Evented = /*#__PURE__*/function () {\n  function Evented() {}\n\n  var _proto = Evented.prototype;\n\n  _proto.on = function on(event, handler, ctx, once) {\n    if (once === void 0) {\n      once = false;\n    }\n\n    if (isUndefined(this.bindings)) {\n      this.bindings = {};\n    }\n\n    if (isUndefined(this.bindings[event])) {\n      this.bindings[event] = [];\n    }\n\n    this.bindings[event].push({\n      handler: handler,\n      ctx: ctx,\n      once: once\n    });\n    return this;\n  };\n\n  _proto.once = function once(event, handler, ctx) {\n    return this.on(event, handler, ctx, true);\n  };\n\n  _proto.off = function off(event, handler) {\n    var _this = this;\n\n    if (isUndefined(this.bindings) || isUndefined(this.bindings[event])) {\n      return this;\n    }\n\n    if (isUndefined(handler)) {\n      delete this.bindings[event];\n    } else {\n      this.bindings[event].forEach(function (binding, index) {\n        if (binding.handler === handler) {\n          _this.bindings[event].splice(index, 1);\n        }\n      });\n    }\n\n    return this;\n  };\n\n  _proto.trigger = function trigger(event) {\n    var _this2 = this;\n\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    if (!isUndefined(this.bindings) && this.bindings[event]) {\n      this.bindings[event].forEach(function (binding, index) {\n        var ctx = binding.ctx,\n            handler = binding.handler,\n            once = binding.once;\n        var context = ctx || _this2;\n        handler.apply(context, args);\n\n        if (once) {\n          _this2.bindings[event].splice(index, 1);\n        }\n      });\n    }\n\n    return this;\n  };\n\n  return Evented;\n}();\n\nvar MIRROR_LR = {\n  center: 'center',\n  left: 'right',\n  right: 'left'\n};\nvar MIRROR_TB = {\n  middle: 'middle',\n  top: 'bottom',\n  bottom: 'top'\n};\nvar OFFSET_MAP = {\n  top: 0,\n  left: 0,\n  middle: '50%',\n  center: '50%',\n  bottom: '100%',\n  right: '100%'\n};\nfunction addOffset() {\n  var out = {\n    top: 0,\n    left: 0\n  };\n\n  for (var _len = arguments.length, offsets = new Array(_len), _key = 0; _key < _len; _key++) {\n    offsets[_key] = arguments[_key];\n  }\n\n  offsets.forEach(function (_ref) {\n    var top = _ref.top,\n        left = _ref.left;\n\n    if (isString(top)) {\n      top = parseFloat(top);\n    }\n\n    if (isString(left)) {\n      left = parseFloat(left);\n    }\n\n    out.top += top;\n    out.left += left;\n  });\n  return out;\n}\nfunction attachmentToOffset(attachment) {\n  var left = attachment.left,\n      top = attachment.top;\n\n  if (!isUndefined(OFFSET_MAP[attachment.left])) {\n    left = OFFSET_MAP[attachment.left];\n  }\n\n  if (!isUndefined(OFFSET_MAP[attachment.top])) {\n    top = OFFSET_MAP[attachment.top];\n  }\n\n  return {\n    left: left,\n    top: top\n  };\n}\nfunction autoToFixedAttachment(attachment, relativeToAttachment) {\n  var left = attachment.left,\n      top = attachment.top;\n\n  if (left === 'auto') {\n    left = MIRROR_LR[relativeToAttachment.left];\n  }\n\n  if (top === 'auto') {\n    top = MIRROR_TB[relativeToAttachment.top];\n  }\n\n  return {\n    left: left,\n    top: top\n  };\n}\nfunction offsetToPx(offset, size) {\n  if (isString(offset.left) && offset.left.indexOf('%') !== -1) {\n    offset.left = parseFloat(offset.left) / 100 * size.width;\n  }\n\n  if (isString(offset.top) && offset.top.indexOf('%') !== -1) {\n    offset.top = parseFloat(offset.top) / 100 * size.height;\n  }\n\n  return offset;\n}\nfunction parseTopLeft(value) {\n  var _value$split = value.split(' '),\n      top = _value$split[0],\n      left = _value$split[1];\n\n  return {\n    top: top,\n    left: left\n  };\n}\n\nfunction getScrollParents(el) {\n  // In firefox if the el is inside an iframe with display: none; window.getComputedStyle() will return null;\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=548397\n  var computedStyle = getComputedStyle(el) || {};\n  var position = computedStyle.position;\n  var parents = [];\n\n  if (position === 'fixed') {\n    return [el];\n  }\n\n  var parent = el;\n\n  while ((parent = parent.parentNode) && parent && parent.nodeType === 1) {\n    var style = void 0;\n\n    try {\n      style = getComputedStyle(parent);\n    } catch (err) {// Intentionally blank\n    }\n\n    if (isUndefined(style) || style === null) {\n      parents.push(parent);\n      return parents;\n    }\n\n    var _style = style,\n        overflow = _style.overflow,\n        overflowX = _style.overflowX,\n        overflowY = _style.overflowY;\n\n    if (/(auto|scroll|overlay)/.test(overflow + overflowY + overflowX)) {\n      if (position !== 'absolute' || ['relative', 'absolute', 'fixed'].indexOf(style.position) >= 0) {\n        parents.push(parent);\n      }\n    }\n  }\n\n  parents.push(el.ownerDocument.body); // If the node is within a frame, account for the parent window scroll\n\n  if (el.ownerDocument !== document) {\n    parents.push(el.ownerDocument.defaultView);\n  }\n\n  return parents;\n}\nfunction getOffsetParent(el) {\n  return el.offsetParent || document.documentElement;\n}\n\nvar TetherBase = {\n  modules: [Constraint, Abutment, Shift]\n};\n\nfunction isFullscreenElement(e) {\n  var d = e.ownerDocument;\n  var fe = d.fullscreenElement || d.webkitFullscreenElement || d.mozFullScreenElement || d.msFullscreenElement;\n  return fe === e;\n}\n\nfunction within(a, b, diff) {\n  if (diff === void 0) {\n    diff = 1;\n  }\n\n  return a + diff >= b && b >= a - diff;\n}\n\nvar transformKey = function () {\n  if (isUndefined(document)) {\n    return '';\n  }\n\n  var el = document.createElement('div');\n  var transforms = ['transform', 'WebkitTransform', 'OTransform', 'MozTransform', 'msTransform'];\n\n  for (var i = 0; i < transforms.length; ++i) {\n    var key = transforms[i];\n\n    if (el.style[key] !== undefined) {\n      return key;\n    }\n  }\n}();\n\nvar tethers = [];\n\nvar position = function position() {\n  tethers.forEach(function (tether) {\n    tether.position(false);\n  });\n  flush();\n};\n\nfunction now() {\n  return performance.now();\n}\n\n(function () {\n  var lastCall = null;\n  var lastDuration = null;\n  var pendingTimeout = null;\n\n  var tick = function tick() {\n    if (!isUndefined(lastDuration) && lastDuration > 16) {\n      // We voluntarily throttle ourselves if we can't manage 60fps\n      lastDuration = Math.min(lastDuration - 16, 250); // Just in case this is the last event, remember to position just once more\n\n      pendingTimeout = setTimeout(tick, 250);\n      return;\n    }\n\n    if (!isUndefined(lastCall) && now() - lastCall < 10) {\n      // Some browsers call events a little too frequently, refuse to run more than is reasonable\n      return;\n    }\n\n    if (pendingTimeout != null) {\n      clearTimeout(pendingTimeout);\n      pendingTimeout = null;\n    }\n\n    lastCall = now();\n    position();\n    lastDuration = now() - lastCall;\n  };\n\n  if (!isUndefined(window) && !isUndefined(window.addEventListener)) {\n    ['resize', 'scroll', 'touchmove'].forEach(function (event) {\n      window.addEventListener(event, tick);\n    });\n  }\n})();\n\nvar TetherClass = /*#__PURE__*/function (_Evented) {\n  _inheritsLoose(TetherClass, _Evented);\n\n  function TetherClass(options) {\n    var _this;\n\n    _this = _Evented.call(this) || this;\n    _this.position = _this.position.bind(_assertThisInitialized(_this));\n    tethers.push(_assertThisInitialized(_this));\n    _this.history = [];\n\n    _this.setOptions(options, false);\n\n    TetherBase.modules.forEach(function (module) {\n      if (!isUndefined(module.initialize)) {\n        module.initialize.call(_assertThisInitialized(_this));\n      }\n    });\n\n    _this.position();\n\n    return _this;\n  }\n\n  var _proto = TetherClass.prototype;\n\n  _proto.setOptions = function setOptions(options, pos) {\n    var _this2 = this;\n\n    if (pos === void 0) {\n      pos = true;\n    }\n\n    var defaults = {\n      offset: '0 0',\n      targetOffset: '0 0',\n      targetAttachment: 'auto auto',\n      classPrefix: 'tether',\n      bodyElement: document.body\n    };\n    this.options = extend(defaults, options);\n    var _this$options = this.options,\n        element = _this$options.element,\n        target = _this$options.target,\n        targetModifier = _this$options.targetModifier,\n        bodyElement = _this$options.bodyElement;\n    this.element = element;\n    this.target = target;\n    this.targetModifier = targetModifier;\n\n    if (typeof bodyElement === 'string') {\n      bodyElement = document.querySelector(bodyElement);\n    }\n\n    this.bodyElement = bodyElement;\n\n    if (this.target === 'viewport') {\n      this.target = document.body;\n      this.targetModifier = 'visible';\n    } else if (this.target === 'scroll-handle') {\n      this.target = document.body;\n      this.targetModifier = 'scroll-handle';\n    }\n\n    ['element', 'target'].forEach(function (key) {\n      if (isUndefined(_this2[key])) {\n        throw new Error('Tether Error: Both element and target must be defined');\n      }\n\n      if (!isUndefined(_this2[key].jquery)) {\n        _this2[key] = _this2[key][0];\n      } else if (isString(_this2[key])) {\n        _this2[key] = document.querySelector(_this2[key]);\n      }\n    });\n\n    this._addClasses();\n\n    if (!this.options.attachment) {\n      throw new Error('Tether Error: You must provide an attachment');\n    }\n\n    this.targetAttachment = parseTopLeft(this.options.targetAttachment);\n    this.attachment = parseTopLeft(this.options.attachment);\n    this.offset = parseTopLeft(this.options.offset);\n    this.targetOffset = parseTopLeft(this.options.targetOffset);\n\n    if (!isUndefined(this.scrollParents)) {\n      this.disable();\n    }\n\n    if (this.targetModifier === 'scroll-handle') {\n      this.scrollParents = [this.target];\n    } else {\n      this.scrollParents = getScrollParents(this.target);\n    }\n\n    if (!(this.options.enabled === false)) {\n      this.enable(pos);\n    }\n  };\n\n  _proto.getTargetBounds = function getTargetBounds() {\n    if (!isUndefined(this.targetModifier)) {\n      if (this.targetModifier === 'visible') {\n        return getVisibleBounds(this.bodyElement, this.target);\n      } else if (this.targetModifier === 'scroll-handle') {\n        return getScrollHandleBounds(this.bodyElement, this.target);\n      }\n    } else {\n      return getBounds(this.bodyElement, this.target);\n    }\n  };\n\n  _proto.clearCache = function clearCache() {\n    this._cache = {};\n  };\n\n  _proto.cache = function cache(k, getter) {\n    // More than one module will often need the same DOM info, so\n    // we keep a cache which is cleared on each position call\n    if (isUndefined(this._cache)) {\n      this._cache = {};\n    }\n\n    if (isUndefined(this._cache[k])) {\n      this._cache[k] = getter.call(this);\n    }\n\n    return this._cache[k];\n  };\n\n  _proto.enable = function enable(pos) {\n    var _this3 = this;\n\n    if (pos === void 0) {\n      pos = true;\n    }\n\n    var _this$options2 = this.options,\n        classes = _this$options2.classes,\n        classPrefix = _this$options2.classPrefix;\n\n    if (!(this.options.addTargetClasses === false)) {\n      addClass(this.target, getClass('enabled', classes, classPrefix));\n    }\n\n    addClass(this.element, getClass('enabled', classes, classPrefix));\n    this.enabled = true;\n    this.scrollParents.forEach(function (parent) {\n      if (parent !== _this3.target.ownerDocument) {\n        parent.addEventListener('scroll', _this3.position);\n      }\n    });\n\n    if (pos) {\n      this.position();\n    }\n  };\n\n  _proto.disable = function disable() {\n    var _this4 = this;\n\n    var _this$options3 = this.options,\n        classes = _this$options3.classes,\n        classPrefix = _this$options3.classPrefix;\n    removeClass(this.target, getClass('enabled', classes, classPrefix));\n    removeClass(this.element, getClass('enabled', classes, classPrefix));\n    this.enabled = false;\n\n    if (!isUndefined(this.scrollParents)) {\n      this.scrollParents.forEach(function (parent) {\n        if (parent && parent.removeEventListener) {\n          parent.removeEventListener('scroll', _this4.position);\n        }\n      });\n    }\n  };\n\n  _proto.destroy = function destroy() {\n    var _this5 = this;\n\n    this.disable();\n\n    this._removeClasses();\n\n    tethers.forEach(function (tether, i) {\n      if (tether === _this5) {\n        tethers.splice(i, 1);\n      }\n    }); // Remove any elements we were using for convenience from the DOM\n\n    if (tethers.length === 0) {\n      removeUtilElements(this.bodyElement);\n    }\n  };\n\n  _proto.updateAttachClasses = function updateAttachClasses(elementAttach, targetAttach) {\n    var _this6 = this;\n\n    elementAttach = elementAttach || this.attachment;\n    targetAttach = targetAttach || this.targetAttachment;\n    var sides = ['left', 'top', 'bottom', 'right', 'middle', 'center'];\n    var _this$options4 = this.options,\n        classes = _this$options4.classes,\n        classPrefix = _this$options4.classPrefix;\n\n    if (!isUndefined(this._addAttachClasses) && this._addAttachClasses.length) {\n      // updateAttachClasses can be called more than once in a position call, so\n      // we need to clean up after ourselves such that when the last defer gets\n      // ran it doesn't add any extra classes from previous calls.\n      this._addAttachClasses.splice(0, this._addAttachClasses.length);\n    }\n\n    if (isUndefined(this._addAttachClasses)) {\n      this._addAttachClasses = [];\n    }\n\n    this.add = this._addAttachClasses;\n\n    if (elementAttach.top) {\n      this.add.push(getClass('element-attached', classes, classPrefix) + \"-\" + elementAttach.top);\n    }\n\n    if (elementAttach.left) {\n      this.add.push(getClass('element-attached', classes, classPrefix) + \"-\" + elementAttach.left);\n    }\n\n    if (targetAttach.top) {\n      this.add.push(getClass('target-attached', classes, classPrefix) + \"-\" + targetAttach.top);\n    }\n\n    if (targetAttach.left) {\n      this.add.push(getClass('target-attached', classes, classPrefix) + \"-\" + targetAttach.left);\n    }\n\n    this.all = [];\n    sides.forEach(function (side) {\n      _this6.all.push(getClass('element-attached', classes, classPrefix) + \"-\" + side);\n\n      _this6.all.push(getClass('target-attached', classes, classPrefix) + \"-\" + side);\n    });\n    defer(function () {\n      if (isUndefined(_this6._addAttachClasses)) {\n        return;\n      }\n\n      updateClasses(_this6.element, _this6._addAttachClasses, _this6.all);\n\n      if (!(_this6.options.addTargetClasses === false)) {\n        updateClasses(_this6.target, _this6._addAttachClasses, _this6.all);\n      }\n\n      delete _this6._addAttachClasses;\n    });\n  };\n\n  _proto.position = function position(flushChanges) {\n    var _this7 = this;\n\n    if (flushChanges === void 0) {\n      flushChanges = true;\n    }\n\n    // flushChanges commits the changes immediately, leave true unless you are positioning multiple\n    // tethers (in which case call Tether.Utils.flush yourself when you're done)\n    if (!this.enabled) {\n      return;\n    }\n\n    this.clearCache(); // Turn 'auto' attachments into the appropriate corner or edge\n\n    var targetAttachment = autoToFixedAttachment(this.targetAttachment, this.attachment);\n    this.updateAttachClasses(this.attachment, targetAttachment);\n    var elementPos = this.cache('element-bounds', function () {\n      return getBounds(_this7.bodyElement, _this7.element);\n    });\n    var width = elementPos.width,\n        height = elementPos.height;\n\n    if (width === 0 && height === 0 && !isUndefined(this.lastSize)) {\n      // We cache the height and width to make it possible to position elements that are\n      // getting hidden.\n      var _this$lastSize = this.lastSize;\n      width = _this$lastSize.width;\n      height = _this$lastSize.height;\n    } else {\n      this.lastSize = {\n        width: width,\n        height: height\n      };\n    }\n\n    var targetPos = this.cache('target-bounds', function () {\n      return _this7.getTargetBounds();\n    });\n    var targetSize = targetPos; // Get an actual px offset from the attachment\n\n    var offset = offsetToPx(attachmentToOffset(this.attachment), {\n      width: width,\n      height: height\n    });\n    var targetOffset = offsetToPx(attachmentToOffset(targetAttachment), targetSize);\n    var manualOffset = offsetToPx(this.offset, {\n      width: width,\n      height: height\n    });\n    var manualTargetOffset = offsetToPx(this.targetOffset, targetSize); // Add the manually provided offset\n\n    offset = addOffset(offset, manualOffset);\n    targetOffset = addOffset(targetOffset, manualTargetOffset); // It's now our goal to make (element position + offset) == (target position + target offset)\n\n    var left = targetPos.left + targetOffset.left - offset.left;\n    var top = targetPos.top + targetOffset.top - offset.top;\n\n    for (var i = 0; i < TetherBase.modules.length; ++i) {\n      var module = TetherBase.modules[i];\n      var ret = module.position.call(this, {\n        left: left,\n        top: top,\n        targetAttachment: targetAttachment,\n        targetPos: targetPos,\n        elementPos: elementPos,\n        offset: offset,\n        targetOffset: targetOffset,\n        manualOffset: manualOffset,\n        manualTargetOffset: manualTargetOffset,\n        scrollbarSize: scrollbarSize,\n        attachment: this.attachment\n      });\n\n      if (ret === false) {\n        return false;\n      } else if (isUndefined(ret) || !isObject(ret)) {\n        continue;\n      } else {\n        top = ret.top;\n        left = ret.left;\n      }\n    } // We describe the position three different ways to give the optimizer\n    // a chance to decide the best possible way to position the element\n    // with the fewest repaints.\n\n\n    var next = {\n      // It's position relative to the page (absolute positioning when\n      // the element is a child of the body)\n      page: {\n        top: top,\n        left: left\n      },\n      // It's position relative to the viewport (fixed positioning)\n      viewport: {\n        top: top - pageYOffset,\n        bottom: pageYOffset - top - height + innerHeight,\n        left: left - pageXOffset,\n        right: pageXOffset - left - width + innerWidth\n      }\n    };\n    var doc = this.target.ownerDocument;\n    var win = doc.defaultView;\n    var scrollbarSize;\n\n    if (win.innerHeight > doc.documentElement.clientHeight) {\n      scrollbarSize = this.cache('scrollbar-size', getScrollBarSize);\n      next.viewport.bottom -= scrollbarSize.height;\n    }\n\n    if (win.innerWidth > doc.documentElement.clientWidth) {\n      scrollbarSize = this.cache('scrollbar-size', getScrollBarSize);\n      next.viewport.right -= scrollbarSize.width;\n    }\n\n    if (['', 'static'].indexOf(doc.body.style.position) === -1 || ['', 'static'].indexOf(doc.body.parentElement.style.position) === -1) {\n      // Absolute positioning in the body will be relative to the page, not the 'initial containing block'\n      next.page.bottom = doc.body.scrollHeight - top - height;\n      next.page.right = doc.body.scrollWidth - left - width;\n    }\n\n    if (!isUndefined(this.options.optimizations) && this.options.optimizations.moveElement !== false && isUndefined(this.targetModifier)) {\n      var offsetParent = this.cache('target-offsetparent', function () {\n        return getOffsetParent(_this7.target);\n      });\n      var offsetPosition = this.cache('target-offsetparent-bounds', function () {\n        return getBounds(_this7.bodyElement, offsetParent);\n      });\n      var offsetParentStyle = getComputedStyle(offsetParent);\n      var offsetParentSize = offsetPosition;\n      var offsetBorder = {};\n      ['Top', 'Left', 'Bottom', 'Right'].forEach(function (side) {\n        offsetBorder[side.toLowerCase()] = parseFloat(offsetParentStyle[\"border\" + side + \"Width\"]);\n      });\n      offsetPosition.right = doc.body.scrollWidth - offsetPosition.left - offsetParentSize.width + offsetBorder.right;\n      offsetPosition.bottom = doc.body.scrollHeight - offsetPosition.top - offsetParentSize.height + offsetBorder.bottom;\n\n      if (next.page.top >= offsetPosition.top + offsetBorder.top && next.page.bottom >= offsetPosition.bottom) {\n        if (next.page.left >= offsetPosition.left + offsetBorder.left && next.page.right >= offsetPosition.right) {\n          // We're within the visible part of the target's scroll parent\n          var scrollLeft = offsetParent.scrollLeft,\n              scrollTop = offsetParent.scrollTop; // It's position relative to the target's offset parent (absolute positioning when\n          // the element is moved to be a child of the target's offset parent).\n\n          next.offset = {\n            top: next.page.top - offsetPosition.top + scrollTop - offsetBorder.top,\n            left: next.page.left - offsetPosition.left + scrollLeft - offsetBorder.left\n          };\n        }\n      }\n    } // We could also travel up the DOM and try each containing context, rather than only\n    // looking at the body, but we're gonna get diminishing returns.\n\n\n    this.move(next);\n    this.history.unshift(next);\n\n    if (this.history.length > 3) {\n      this.history.pop();\n    }\n\n    if (flushChanges) {\n      flush();\n    }\n\n    return true;\n  } // THE ISSUE\n  ;\n\n  _proto.move = function move(pos) {\n    var _this8 = this;\n\n    if (isUndefined(this.element.parentNode)) {\n      return;\n    }\n\n    var same = {};\n\n    for (var type in pos) {\n      same[type] = {};\n\n      for (var key in pos[type]) {\n        var found = false;\n\n        for (var i = 0; i < this.history.length; ++i) {\n          var point = this.history[i];\n\n          if (!isUndefined(point[type]) && !within(point[type][key], pos[type][key])) {\n            found = true;\n            break;\n          }\n        }\n\n        if (!found) {\n          same[type][key] = true;\n        }\n      }\n    }\n\n    var css = {\n      top: '',\n      left: '',\n      right: '',\n      bottom: ''\n    };\n\n    var transcribe = function transcribe(_same, _pos) {\n      var hasOptimizations = !isUndefined(_this8.options.optimizations);\n      var gpu = hasOptimizations ? _this8.options.optimizations.gpu : null;\n\n      if (gpu !== false) {\n        var yPos, xPos;\n\n        if (_same.top) {\n          css.top = 0;\n          yPos = _pos.top;\n        } else {\n          css.bottom = 0;\n          yPos = -_pos.bottom;\n        }\n\n        if (_same.left) {\n          css.left = 0;\n          xPos = _pos.left;\n        } else {\n          css.right = 0;\n          xPos = -_pos.right;\n        }\n\n        if (isNumber(window.devicePixelRatio) && devicePixelRatio % 1 === 0) {\n          xPos = Math.round(xPos * devicePixelRatio) / devicePixelRatio;\n          yPos = Math.round(yPos * devicePixelRatio) / devicePixelRatio;\n        }\n\n        css[transformKey] = \"translateX(\" + xPos + \"px) translateY(\" + yPos + \"px)\";\n\n        if (transformKey !== 'msTransform') {\n          // The Z transform will keep this in the GPU (faster, and prevents artifacts),\n          // but IE9 doesn't support 3d transforms and will choke.\n          css[transformKey] += ' translateZ(0)';\n        }\n      } else {\n        if (_same.top) {\n          css.top = _pos.top + \"px\";\n        } else {\n          css.bottom = _pos.bottom + \"px\";\n        }\n\n        if (_same.left) {\n          css.left = _pos.left + \"px\";\n        } else {\n          css.right = _pos.right + \"px\";\n        }\n      }\n    };\n\n    var hasOptimizations = !isUndefined(this.options.optimizations);\n    var allowPositionFixed = true;\n\n    if (hasOptimizations && this.options.optimizations.allowPositionFixed === false) {\n      allowPositionFixed = false;\n    }\n\n    var moved = false;\n\n    if ((same.page.top || same.page.bottom) && (same.page.left || same.page.right)) {\n      css.position = 'absolute';\n      transcribe(same.page, pos.page);\n    } else if (allowPositionFixed && (same.viewport.top || same.viewport.bottom) && (same.viewport.left || same.viewport.right)) {\n      css.position = 'fixed';\n      transcribe(same.viewport, pos.viewport);\n    } else if (!isUndefined(same.offset) && same.offset.top && same.offset.left) {\n      css.position = 'absolute';\n      var offsetParent = this.cache('target-offsetparent', function () {\n        return getOffsetParent(_this8.target);\n      });\n\n      if (getOffsetParent(this.element) !== offsetParent) {\n        defer(function () {\n          _this8.element.parentNode.removeChild(_this8.element);\n\n          offsetParent.appendChild(_this8.element);\n        });\n      }\n\n      transcribe(same.offset, pos.offset);\n      moved = true;\n    } else {\n      css.position = 'absolute';\n      transcribe({\n        top: true,\n        left: true\n      }, pos.page);\n    }\n\n    if (!moved) {\n      if (this.options.bodyElement) {\n        if (this.element.parentNode !== this.options.bodyElement) {\n          this.options.bodyElement.appendChild(this.element);\n        }\n      } else {\n        var offsetParentIsBody = true;\n        var currentNode = this.element.parentNode;\n\n        while (currentNode && currentNode.nodeType === 1 && currentNode.tagName !== 'BODY' && !isFullscreenElement(currentNode)) {\n          if (getComputedStyle(currentNode).position !== 'static') {\n            offsetParentIsBody = false;\n            break;\n          }\n\n          currentNode = currentNode.parentNode;\n        }\n\n        if (!offsetParentIsBody) {\n          this.element.parentNode.removeChild(this.element);\n          this.element.ownerDocument.body.appendChild(this.element);\n        }\n      }\n    } // Any css change will trigger a repaint, so let's avoid one if nothing changed\n\n\n    var writeCSS = {};\n    var write = false;\n\n    for (var _key in css) {\n      var val = css[_key];\n      var elVal = this.element.style[_key];\n\n      if (elVal !== val) {\n        write = true;\n        writeCSS[_key] = val;\n      }\n    }\n\n    if (write) {\n      defer(function () {\n        extend(_this8.element.style, writeCSS);\n\n        _this8.trigger('repositioned');\n      });\n    }\n  };\n\n  _proto._addClasses = function _addClasses() {\n    var _this$options5 = this.options,\n        classes = _this$options5.classes,\n        classPrefix = _this$options5.classPrefix;\n    addClass(this.element, getClass('element', classes, classPrefix));\n\n    if (!(this.options.addTargetClasses === false)) {\n      addClass(this.target, getClass('target', classes, classPrefix));\n    }\n  };\n\n  _proto._removeClasses = function _removeClasses() {\n    var _this9 = this;\n\n    var _this$options6 = this.options,\n        classes = _this$options6.classes,\n        classPrefix = _this$options6.classPrefix;\n    removeClass(this.element, getClass('element', classes, classPrefix));\n\n    if (!(this.options.addTargetClasses === false)) {\n      removeClass(this.target, getClass('target', classes, classPrefix));\n    }\n\n    this.all.forEach(function (className) {\n      _this9.element.classList.remove(className);\n\n      _this9.target.classList.remove(className);\n    });\n  };\n\n  return TetherClass;\n}(Evented);\n\nTetherClass.modules = [];\nTetherBase.position = position;\nvar Tether = extend(TetherClass, TetherBase);\nTether.modules.push({\n  initialize: function initialize() {\n    var _this10 = this;\n\n    var _this$options7 = this.options,\n        classes = _this$options7.classes,\n        classPrefix = _this$options7.classPrefix;\n    this.markers = {};\n    ['target', 'element'].forEach(function (type) {\n      var el = document.createElement('div');\n      el.className = getClass(type + \"-marker\", classes, classPrefix);\n      var dot = document.createElement('div');\n      dot.className = getClass('marker-dot', classes, classPrefix);\n      el.appendChild(dot);\n\n      _this10[type].appendChild(el);\n\n      _this10.markers[type] = {\n        dot: dot,\n        el: el\n      };\n    });\n  },\n  position: function position(_ref) {\n    var manualOffset = _ref.manualOffset,\n        manualTargetOffset = _ref.manualTargetOffset;\n    var offsets = {\n      element: manualOffset,\n      target: manualTargetOffset\n    };\n\n    for (var type in offsets) {\n      var offset = offsets[type];\n\n      for (var side in offset) {\n        var _this$markers$type$do;\n\n        var val = offset[side];\n\n        if (!isString(val) || val.indexOf('%') === -1 && val.indexOf('px') === -1) {\n          val += 'px';\n        }\n\n        if (this.markers[type] && ((_this$markers$type$do = this.markers[type].dot) == null ? void 0 : _this$markers$type$do.style[side]) !== val) {\n          this.markers[type].dot.style[side] = val;\n        }\n      }\n    }\n\n    return true;\n  }\n});\n\nexport default Tether;\n//# sourceMappingURL=tether.esm.js.map\n"],"mappings":";AAEA,SAASA,EAAeC,EAAUC,GAChCD,EAASE,UAAYC,OAAOC,OAAOH,EAAWC,WAC9CF,EAASE,UAAUG,YAAcL,EAEjCM,EAAgBN,EAAUC,EAC5B,CAEA,SAASK,EAAgBC,EAAGC,GAC1BF,EAAkBH,OAAOM,gBAAkB,SAASH,EAAgBC,EAAGC,GACrED,EAAEG,UAAYF,EACd,OAAOD,CACX,EAEE,OAAOD,EAAgBC,EAAGC,EAC5B,CAEA,SAASG,EAAuBC,GAC9B,GAAIA,SAAc,EAAG,CACnB,MAAM,IAAIC,eAAe,4DAC7B,CAEE,OAAOD,CACT,CAMA,SAASE,EAAWC,GAClB,cAAcA,IAAU,UAC1B,CAMA,SAASC,EAASD,GAChB,cAAcA,IAAU,QAC1B,CAMA,SAASE,EAASF,GAChB,cAAcA,IAAU,QAC1B,CAMA,SAASG,EAASH,GAChB,cAAcA,IAAU,QAC1B,CAMA,SAASI,EAAYJ,GACnB,OAAOA,IAAUK,SACnB,CAEA,SAASC,EAASC,EAAIC,GACpBA,EAAKC,MAAM,KAAKC,SAAQ,SAAUC,GAChC,GAAIA,EAAIC,OAAQ,CACdL,EAAGM,UAAUC,IAAIH,EACvB,CACA,GACA,CAQA,SAASI,EAASC,EAAKC,EAASC,GAC9B,GAAIF,SAAa,EAAG,CAClBA,EAAM,EACV,CAEE,IAAKZ,EAAYa,KAAab,EAAYa,EAAQD,IAAO,CACvD,GAAIC,EAAQD,KAAS,MAAO,CAC1B,MAAO,EACb,CAEI,OAAOC,EAAQD,EACnB,MAAS,GAAIE,EAAa,CACtB,OAAOA,EAAc,IAAMF,CAC/B,KAAS,CACL,OAAOA,CACX,CACA,CACA,SAASG,EAAYZ,EAAIC,GACvBA,EAAKC,MAAM,KAAKC,SAAQ,SAAUC,GAChC,GAAIA,EAAIC,OAAQ,CACdL,EAAGM,UAAUO,OAAOT,EAC1B,CACA,GACA,CACA,SAASU,EAAcd,EAAIO,EAAKQ,GAG9BA,EAAIZ,SAAQ,SAAUC,GACpB,GAAIG,EAAIS,QAAQZ,MAAU,GAAKJ,EAAGM,UAAUW,SAASb,GAAM,CACzDQ,EAAYZ,EAAII,EACtB,CACA,IACEG,EAAIJ,SAAQ,SAAUC,GACpB,IAAKJ,EAAGM,UAAUW,SAASb,GAAM,CAC/BL,EAASC,EAAII,EACnB,CACA,GACA,CAEA,IAAIc,EAAW,GACf,SAASC,EAAMC,GACbF,EAASG,KAAKD,EAChB,CACA,SAASE,IACP,IAAIF,EAEJ,MAAOA,EAAKF,EAASK,MAAO,CAC1BH,GACJ,CACA,CAEA,IAAII,EAAiB,KACrB,SAASC,EAAOC,GACd,GAAIA,SAAa,EAAG,CAClBA,EAAM,EACV,CAEE,IAAIC,EAAO,GACXC,MAAMhD,UAAUyC,KAAKQ,MAAMF,EAAMG,WACjCH,EAAKI,MAAM,GAAG5B,SAAQ,SAAU6B,GAC9B,GAAIA,EAAK,CACP,IAAK,IAAIvB,KAAOuB,EAAK,CACnB,GAAI,GAAGC,eAAeC,KAAKF,EAAKvB,GAAM,CACpCiB,EAAIjB,GAAOuB,EAAIvB,EACzB,CACA,CACA,CACA,IACE,OAAOiB,CACT,CACA,SAASS,IACP,GAAIX,EAAgB,CAClB,OAAOA,CACX,CAEE,IAAIY,EAAQC,SAASC,cAAc,OACnCF,EAAMG,MAAMC,MAAQ,OACpBJ,EAAMG,MAAME,OAAS,QACrB,IAAIC,EAAQL,SAASC,cAAc,OACnCb,EAAOiB,EAAMH,MAAO,CAClBI,SAAU,WACVC,IAAK,EACLC,KAAM,EACNC,cAAe,OACfC,WAAY,SACZP,MAAO,QACPC,OAAQ,QACRO,SAAU,WAEZN,EAAMO,YAAYb,GAClBC,SAASa,KAAKD,YAAYP,GAC1B,IAAIS,EAAiBf,EAAMgB,YAC3BV,EAAMH,MAAMS,SAAW,SACvB,IAAIK,EAAcjB,EAAMgB,YAExB,GAAID,IAAmBE,EAAa,CAClCA,EAAcX,EAAMY,WACxB,CAEEjB,SAASa,KAAKK,YAAYb,GAC1B,IAAIF,EAAQW,EAAiBE,EAC7B7B,EAAiB,CACfgB,MAAOA,EACPC,OAAQD,GAEV,OAAOhB,CACT,CACA,IAAIgC,EAAW,WACb,IAAIC,EAAK,EACT,OAAO,WACL,QAASA,CACb,CACA,CALe,GAOf,IAAIC,EAAe,GACnB,IAAIC,EAAe,IAAIC,IACvB,SAASC,EAAUX,EAAMlD,GACvB,IAAI8D,EAEJ,GAAI9D,IAAOqC,SAAU,CACnByB,EAAMzB,SACNrC,EAAKqC,SAAS0B,eAClB,KAAS,CACLD,EAAM9D,EAAGgE,aACb,CAEE,IAAIC,EAAQH,EAAIC,gBAEhB,IAAIG,EAAMC,EAA6BnE,GAEvC,IAAIoE,EAASC,EAAWnB,GAExBgB,EAAItB,KAAOwB,EAAOxB,IAClBsB,EAAIrB,MAAQuB,EAAOvB,KAEnB,GAAIhD,EAAYqE,EAAI1B,OAAQ,CAC1B0B,EAAI1B,MAAQH,SAASa,KAAKoB,YAAcJ,EAAIrB,KAAOqB,EAAIK,KAC3D,CAEE,GAAI1E,EAAYqE,EAAIzB,QAAS,CAC3ByB,EAAIzB,OAASJ,SAASa,KAAKsB,aAAeN,EAAItB,IAAMsB,EAAIO,MAC5D,CAEEP,EAAItB,IAAMsB,EAAItB,IAAMqB,EAAMS,UAC1BR,EAAIrB,KAAOqB,EAAIrB,KAAOoB,EAAMU,WAC5BT,EAAIK,MAAQT,EAAIZ,KAAKI,YAAcY,EAAI1B,MAAQ0B,EAAIrB,KACnDqB,EAAIO,OAASX,EAAIZ,KAAK0B,aAAeV,EAAIzB,OAASyB,EAAItB,IACtD,OAAOsB,CACT,CAOA,SAASW,EAAsB3B,EAAM4B,GACnC,IAAIC,EAGJ,IAAIC,EAAkBF,EAAOG,UAC7B,IAAIC,EAAeJ,IAAWzC,SAASa,KAEvC,GAAIgC,EAAc,CAChBJ,EAASzC,SAAS0B,gBAClBgB,EAAS,CACPlC,KAAMsC,YACNvC,IAAKwC,YACL3C,OAAQ4C,YACR7C,MAAO8C,WAEb,KAAS,CACLP,EAASlB,EAAUX,EAAM4B,EAC7B,CAEE,IAAIvC,EAAQgD,iBAAiBT,GAC7B,IAAIU,EAAkBV,EAAOR,YAAcQ,EAAOxB,aAAe,CAACf,EAAMS,SAAUT,EAAMkD,WAAWzE,QAAQ,WAAa,IAAMkE,EAC9H,IAAIQ,EAAe,EAEnB,GAAIF,EAAiB,CACnBE,EAAe,EACnB,CAEE,IAAIjD,EAASsC,EAAOtC,OAASkD,WAAWpD,EAAMqD,gBAAkBD,WAAWpD,EAAMsD,mBAAqBH,EACtG,IAAIhE,EAAM,CACRc,MAAO,GACPC,OAAQA,EAAS,MAASA,EAASqC,EAAON,cAC1C3B,KAAMkC,EAAOlC,KAAOkC,EAAOvC,MAAQmD,WAAWpD,EAAMuD,iBAAmB,IAEzE,IAAIC,EAAS,EAEb,GAAItD,EAAS,KAAOyC,EAAc,CAChCa,GAAU,MAAUC,KAAKC,IAAIxD,EAAQ,GAAK,OAAUA,EAAS,KACjE,CAEE,IAAKyC,EAAc,CACjBxD,EAAIe,OAASuD,KAAKE,IAAIxE,EAAIe,OAAQ,GACtC,CAEE,IAAI0D,EAAmBnB,GAAmBF,EAAON,aAAe/B,GAChEf,EAAIkB,IAAMuD,GAAoB1D,EAASf,EAAIe,OAASsD,GAAUhB,EAAOnC,IAAM+C,WAAWpD,EAAMqD,gBAE5F,GAAIV,EAAc,CAChBxD,EAAIe,OAASuD,KAAKE,IAAIxE,EAAIe,OAAQ,GACtC,CAEE,OAAOf,CACT,CAOA,SAAS0E,EAAiBlD,EAAM4B,GAC9B,GAAIA,IAAWzC,SAASa,KAAM,CAC5B,MAAO,CACLN,IAAKwC,YACLvC,KAAMsC,YACN1C,OAAQ4C,YACR7C,MAAO8C,WAEb,KAAS,CACL,IAAIP,EAASlB,EAAUX,EAAM4B,GAC7B,IAAIpD,EAAM,CACRe,OAAQsC,EAAOtC,OACfD,MAAOuC,EAAOvC,MACdI,IAAKmC,EAAOnC,IACZC,KAAMkC,EAAOlC,MAEfnB,EAAIe,OAASuD,KAAKK,IAAI3E,EAAIe,OAAQsC,EAAOtC,QAAU2C,YAAcL,EAAOnC,MACxElB,EAAIe,OAASuD,KAAKK,IAAI3E,EAAIe,OAAQsC,EAAOtC,QAAUsC,EAAOnC,IAAMmC,EAAOtC,QAAU2C,YAAcC,eAC/F3D,EAAIe,OAASuD,KAAKK,IAAIhB,YAAa3D,EAAIe,QACvCf,EAAIe,QAAU,EACdf,EAAIc,MAAQwD,KAAKK,IAAI3E,EAAIc,MAAOuC,EAAOvC,OAAS2C,YAAcJ,EAAOlC,OACrEnB,EAAIc,MAAQwD,KAAKK,IAAI3E,EAAIc,MAAOuC,EAAOvC,OAASuC,EAAOlC,KAAOkC,EAAOvC,OAAS2C,YAAcG,cAC5F5D,EAAIc,MAAQwD,KAAKK,IAAIf,WAAY5D,EAAIc,OACrCd,EAAIc,OAAS,EAEb,GAAId,EAAIkB,IAAMwC,YAAa,CACzB1D,EAAIkB,IAAMwC,WAChB,CAEI,GAAI1D,EAAImB,KAAOsC,YAAa,CAC1BzD,EAAImB,KAAOsC,WACjB,CAEI,OAAOzD,CACX,CACA,CACA,SAAS4E,EAAmBpD,GAC1B,GAAIS,EAAa4C,IAAIrD,GAAO,CAC1BA,EAAKK,YAAYI,EAAa6C,IAAItD,GACtC,CAEES,EAAa8C,OAAOvD,EACtB,CAOA,SAASiB,EAA6BuC,GACpC,IAAIC,EAAeD,EAAKE,wBAGxB,IAAIC,EAAO,GAEX,IAAK,IAAIC,KAAKH,EAAc,CAC1BE,EAAKC,GAAKH,EAAaG,EAC3B,CAEE,IACE,GAAIJ,EAAK1C,gBAAkB3B,SAAU,CACnC,IAAI0E,EAAeL,EAAK1C,cAAcgD,YAAYD,aAElD,GAAIA,EAAc,CAChB,IAAIE,EAAY9C,EAA6B4C,GAE7CF,EAAKjE,KAAOqE,EAAUrE,IACtBiE,EAAKpC,QAAUwC,EAAUrE,IACzBiE,EAAKhE,MAAQoE,EAAUpE,KACvBgE,EAAKtC,OAAS0C,EAAUpE,IAChC,CACA,CACA,CAAI,MAAOqE,GACX,CAEE,OAAOL,CACT,CAEA,SAASxC,EAAWnB,GAKlB,IAAIwD,EAAO/C,EAAa6C,IAAItD,GAE5B,IAAKwD,IAASxD,EAAKjC,SAASyF,GAAO,CACjCA,EAAOrE,SAASC,cAAc,OAC9BoE,EAAKS,aAAa,iBAAkB3D,KACpC/B,EAAOiF,EAAKnE,MAAO,CACjBK,IAAK,EACLC,KAAM,EACNF,SAAU,aAEZO,EAAKD,YAAYyD,GACjB/C,EAAayD,IAAIlE,EAAMwD,EAC3B,CAEE,IAAIjD,EAAKiD,EAAKW,aAAa,kBAE3B,GAAIxH,EAAY6D,EAAaD,IAAM,CACjCC,EAAaD,GAAMU,EAA6BuC,GAEhDvF,GAAM,kBACGuC,EAAaD,EAC1B,GACA,CAEE,OAAOC,EAAaD,EACtB,CAEA,IAAI6D,EAAW,CACb3E,SAAU,SAASA,EAAS4E,GAC1B,IAAIC,EAAQC,KAEZ,IAAI7E,EAAM2E,EAAK3E,IACXC,EAAO0E,EAAK1E,KAEhB,IAAI6E,EAAcD,KAAKE,MAAM,kBAAkB,WAC7C,OAAO9D,EAAU2D,EAAMI,QAC7B,IACQnF,EAASiF,EAAYjF,OACrBD,EAAQkF,EAAYlF,MAExB,IAAIqF,EAAYJ,KAAKK,kBACrB,IAAIrD,EAAS7B,EAAMH,EACnB,IAAI8B,EAAQ1B,EAAOL,EACnB,IAAIuF,EAAU,GAEd,GAAInF,GAAOiF,EAAUpD,QAAUA,GAAUoD,EAAUjF,IAAK,CACtD,CAAC,OAAQ,SAASzC,SAAQ,SAAU6H,GAClC,IAAIC,EAAgBJ,EAAUG,GAE9B,GAAIC,IAAkBpF,GAAQoF,IAAkB1D,EAAO,CACrDwD,EAAQ1G,KAAK2G,EACvB,CACA,GACA,CAEI,GAAInF,GAAQgF,EAAUtD,OAASA,GAASsD,EAAUhF,KAAM,CACtD,CAAC,MAAO,UAAU1C,SAAQ,SAAU6H,GAClC,IAAIC,EAAgBJ,EAAUG,GAE9B,GAAIC,IAAkBrF,GAAOqF,IAAkBxD,EAAQ,CACrDsD,EAAQ1G,KAAK2G,EACvB,CACA,GACA,CAEI,IAAIE,EAAQ,CAAC,OAAQ,MAAO,QAAS,UACrC,IAAIC,EAAgBV,KAAKW,QACrB1H,EAAUyH,EAAczH,QACxBC,EAAcwH,EAAcxH,YAChC8G,KAAK1G,IAAIM,KAAKb,EAAS,UAAWE,EAASC,IAC3CuH,EAAM/H,SAAQ,SAAU6H,GACtBR,EAAMzG,IAAIM,KAAKb,EAAS,UAAWE,EAASC,GAAe,IAAMqH,EACvE,IAEI,GAAID,EAAQM,OAAQ,CAClBZ,KAAKlH,IAAIc,KAAKb,EAAS,UAAWE,EAASC,GACjD,CAEIoH,EAAQ5H,SAAQ,SAAU6H,GACxBR,EAAMjH,IAAIc,KAAKb,EAAS,UAAWE,EAASC,GAAe,IAAMqH,EACvE,IACI7G,GAAM,WACJ,KAAMqG,EAAMY,QAAQE,mBAAqB,OAAQ,CAC/CxH,EAAc0G,EAAM1C,OAAQ0C,EAAMjH,IAAKiH,EAAMzG,IACrD,CAEMD,EAAc0G,EAAMI,QAASJ,EAAMjH,IAAKiH,EAAMzG,IACpD,IACI,OAAO,IACX,GAGA,IAAIwH,EAAgB,CAAC,OAAQ,MAAO,QAAS,UAQ7C,SAASC,EAAgBtF,EAAMuF,EAAQC,GAErC,IAAKA,EAAI,CACP,OAAO,IACX,CAEE,GAAIA,IAAO,eAAgB,CACzBA,EAAKD,EAAOE,cAAc,EAC9B,MAAS,GAAID,IAAO,SAAU,CAC1BA,EAAK,CAACvD,YAAaC,YAAaE,WAAaH,YAAaE,YAAcD,YAC5E,CAEE,GAAIsD,IAAOrG,SAAU,CACnBqG,EAAKA,EAAG3E,eACZ,CAEE,IAAKlE,EAAY6I,EAAGE,UAAW,CAC7B,IAAIlC,EAAOgC,EACX,IAAIG,EAAOhF,EAAUX,EAAMwF,GAC3B,IAAII,EAAMD,EACV,IAAItG,EAAQgD,iBAAiBmD,GAC7BA,EAAK,CAACI,EAAIjG,KAAMiG,EAAIlG,IAAKiG,EAAKrG,MAAQsG,EAAIjG,KAAMgG,EAAKpG,OAASqG,EAAIlG,KAElE,GAAI8D,EAAK1C,gBAAkB3B,SAAU,CACnC,IAAI0G,EAAMrC,EAAK1C,cAAcgD,YAC7B0B,EAAG,IAAMK,EAAI5D,YACbuD,EAAG,IAAMK,EAAI3D,YACbsD,EAAG,IAAMK,EAAI5D,YACbuD,EAAG,IAAMK,EAAI3D,WACnB,CAEImD,EAAcpI,SAAQ,SAAU6H,EAAMgB,GACpChB,EAAOA,EAAK,GAAGiB,cAAgBjB,EAAKkB,OAAO,GAE3C,GAAIlB,IAAS,OAASA,IAAS,OAAQ,CACrCU,EAAGM,IAAMrD,WAAWpD,EAAM,SAAWyF,EAAO,SACpD,KAAa,CACLU,EAAGM,IAAMrD,WAAWpD,EAAM,SAAWyF,EAAO,SACpD,CACA,GACA,CAEE,OAAOU,CACT,CAYA,SAASS,EAAqBC,EAAKC,EAAY3I,EAASC,EAAa2I,GACnE,GAAIF,EAAIf,OAAQ,CACd,IAAIkB,EAEJ,IAAK1J,EAAYyJ,GAAmB,CAClCC,EAAWD,CACjB,KAAW,CACLC,EAAW/I,EAAS,gBAAiBE,EAASC,EACpD,CAEI0I,EAAWhI,KAAKkI,GAChBH,EAAIjJ,SAAQ,SAAU6H,GACpBqB,EAAWhI,KAAKkI,EAAW,IAAMvB,EACvC,GACA,CACA,CAeA,SAASwB,EAA2B3G,EAAMkC,EAAQvC,EAAOiH,EAAKC,EAAQN,GACpE,GAAIvG,EAAOkC,EAAO,GAAI,CACpB,GAAI0E,EAAIzI,QAAQ,SAAW,EAAG,CAC5B6B,EAAOkC,EAAO,GACd2E,EAAOrI,KAAK,OAClB,KAAW,CACL+H,EAAI/H,KAAK,OACf,CACA,CAEE,GAAIwB,EAAOL,EAAQuC,EAAO,GAAI,CAC5B,GAAI0E,EAAIzI,QAAQ,UAAY,EAAG,CAC7B6B,EAAOkC,EAAO,GAAKvC,EACnBkH,EAAOrI,KAAK,QAClB,KAAW,CACL+H,EAAI/H,KAAK,QACf,CACA,CAEE,OAAOwB,CACT,CAeA,SAAS8G,EAA0B/G,EAAKmC,EAAQtC,EAAQgH,EAAKC,EAAQN,GACnE,GAAIxG,EAAMmC,EAAO,GAAI,CACnB,GAAI0E,EAAIzI,QAAQ,QAAU,EAAG,CAC3B4B,EAAMmC,EAAO,GACb2E,EAAOrI,KAAK,MAClB,KAAW,CACL+H,EAAI/H,KAAK,MACf,CACA,CAEE,GAAIuB,EAAMH,EAASsC,EAAO,GAAI,CAC5B,GAAI0E,EAAIzI,QAAQ,WAAa,EAAG,CAC9B4B,EAAMmC,EAAO,GAAKtC,EAClBiH,EAAOrI,KAAK,SAClB,KAAW,CACL+H,EAAI/H,KAAK,SACf,CACA,CAEE,OAAOuB,CACT,CAaA,SAASgH,EAAeC,EAAaC,EAAa/E,EAAQvC,EAAOuH,EAAalH,GAC5E,GAAIA,EAAOkC,EAAO,IAAM8E,EAAYhH,OAAS,OAAQ,CACnD,GAAIiH,EAAYjH,OAAS,QAAS,CAChCA,GAAQkH,EACRF,EAAYhH,KAAO,QACnBA,GAAQL,EACRsH,EAAYjH,KAAO,MACzB,MAAW,GAAIiH,EAAYjH,OAAS,OAAQ,CACtCA,GAAQkH,EACRF,EAAYhH,KAAO,QACnBA,GAAQL,EACRsH,EAAYjH,KAAO,OACzB,CACA,MAAS,GAAIA,EAAOL,EAAQuC,EAAO,IAAM8E,EAAYhH,OAAS,QAAS,CACnE,GAAIiH,EAAYjH,OAAS,OAAQ,CAC/BA,GAAQkH,EACRF,EAAYhH,KAAO,OACnBA,GAAQL,EACRsH,EAAYjH,KAAO,OACzB,MAAW,GAAIiH,EAAYjH,OAAS,QAAS,CACvCA,GAAQkH,EACRF,EAAYhH,KAAO,OACnBA,GAAQL,EACRsH,EAAYjH,KAAO,MACzB,CACA,MAAS,GAAIgH,EAAYhH,OAAS,SAAU,CACxC,GAAIA,EAAOL,EAAQuC,EAAO,IAAM+E,EAAYjH,OAAS,OAAQ,CAC3DA,GAAQL,EACRsH,EAAYjH,KAAO,OACzB,MAAW,GAAIA,EAAOkC,EAAO,IAAM+E,EAAYjH,OAAS,QAAS,CAC3DA,GAAQL,EACRsH,EAAYjH,KAAO,MACzB,CACA,CAEE,OAAOA,CACT,CAaA,SAASmH,EAAeH,EAAaC,EAAa/E,EAAQtC,EAAQwH,EAAcrH,GAC9E,GAAIiH,EAAYjH,MAAQ,MAAO,CAC7B,GAAIkH,EAAYlH,MAAQ,UAAYA,EAAMmC,EAAO,GAAI,CACnDnC,GAAOqH,EACPJ,EAAYjH,IAAM,SAClBA,GAAOH,EACPqH,EAAYlH,IAAM,KACxB,MAAW,GAAIkH,EAAYlH,MAAQ,OAASA,EAAMH,EAASsC,EAAO,IAAMnC,GAAOH,EAASwH,IAAiBlF,EAAO,GAAI,CAC9GnC,GAAOH,EAASwH,EAChBJ,EAAYjH,IAAM,SAClBkH,EAAYlH,IAAM,QACxB,CACA,CAEE,GAAIiH,EAAYjH,MAAQ,SAAU,CAChC,GAAIkH,EAAYlH,MAAQ,OAASA,EAAMH,EAASsC,EAAO,GAAI,CACzDnC,GAAOqH,EACPJ,EAAYjH,IAAM,MAClBA,GAAOH,EACPqH,EAAYlH,IAAM,QACxB,MAAW,GAAIkH,EAAYlH,MAAQ,UAAYA,EAAMmC,EAAO,IAAMnC,GAAOH,EAAS,EAAIwH,IAAiBlF,EAAO,GAAI,CAC5GnC,GAAOH,EAASwH,EAChBJ,EAAYjH,IAAM,MAClBkH,EAAYlH,IAAM,KACxB,CACA,CAEE,GAAIiH,EAAYjH,MAAQ,SAAU,CAChC,GAAIA,EAAMH,EAASsC,EAAO,IAAM+E,EAAYlH,MAAQ,MAAO,CACzDA,GAAOH,EACPqH,EAAYlH,IAAM,QACxB,MAAW,GAAIA,EAAMmC,EAAO,IAAM+E,EAAYlH,MAAQ,SAAU,CAC1DA,GAAOH,EACPqH,EAAYlH,IAAM,KACxB,CACA,CAEE,OAAOA,CACT,CAWA,SAASsH,EAAexJ,EAASC,EAAawJ,GAC5C,IAAIC,EAAa,CAAC5J,EAAS,SAAUE,EAASC,GAAcH,EAAS,gBAAiBE,EAASC,IAC/FwJ,EAAYhK,SAAQ,SAAUkK,GAC5B,IAAIf,EAAmBe,EAAWf,iBAC9BgB,EAAcD,EAAWC,YAE7B,GAAIhB,EAAkB,CACpBc,EAAW/I,KAAKiI,EACtB,CAEI,GAAIgB,EAAa,CACfF,EAAW/I,KAAKiJ,EACtB,CACA,IACEF,EAAWjK,SAAQ,SAAUC,GAC3B,CAAC,OAAQ,MAAO,QAAS,UAAUD,SAAQ,SAAU6H,GACnDoC,EAAW/I,KAAKjB,EAAM,IAAM4H,EAClC,GACA,IACE,OAAOoC,CACT,CAEA,IAAIG,EAAa,CACf5H,SAAU,SAASA,EAAS4E,GAC1B,IAAIC,EAAQC,KAEZ,IAAI7E,EAAM2E,EAAK3E,IACXC,EAAO0E,EAAK1E,KACZ2H,EAAmBjD,EAAKiD,iBAE5B,IAAK/C,KAAKW,QAAQ+B,YAAa,CAC7B,OAAO,IACb,CAEI,IAAIzC,EAAcD,KAAKE,MAAM,kBAAkB,WAC7C,OAAO9D,EAAU2D,EAAMiD,YAAajD,EAAMI,QAChD,IACQnF,EAASiF,EAAYjF,OACrBD,EAAQkF,EAAYlF,MAExB,GAAIA,IAAU,GAAKC,IAAW,IAAM5C,EAAY4H,KAAKiD,UAAW,CAG9D,IAAIC,EAAiBlD,KAAKiD,SAC1BlI,EAAQmI,EAAenI,MACvBC,EAASkI,EAAelI,MAC9B,CAEI,IAAImI,EAAanD,KAAKE,MAAM,iBAAiB,WAC3C,OAAOH,EAAMM,iBACnB,IACI,IAAImC,EAAeW,EAAWnI,OAC1BsH,EAAca,EAAWpI,MAC7B,IAAI2F,EAAgBV,KAAKW,QACrB1H,EAAUyH,EAAczH,QACxBC,EAAcwH,EAAcxH,YAEhC,IAAIyJ,EAAaF,EAAexJ,EAASC,EAAa8G,KAAKW,QAAQ+B,aAEnE,IAAId,EAAa,GACjB,IAAIQ,EAAcpI,EAAO,GAAI+I,GAC7B,IAAIV,EAAcrI,EAAO,GAAIgG,KAAKoD,YAClCpD,KAAKW,QAAQ+B,YAAYhK,SAAQ,SAAUkK,GACzC,IAAI3B,EAAK2B,EAAW3B,GAChBmC,EAAaR,EAAWQ,WACxBpB,EAAMY,EAAWZ,IAErB,GAAI5J,EAAYgL,GAAa,CAC3BA,EAAa,EACrB,CAEM,IAAIC,EAAeC,EAEnB,GAAIF,EAAW7J,QAAQ,MAAQ,EAAG,CAChC,IAAIgK,EAAoBH,EAAW3K,MAAM,KAEzC6K,EAAgBC,EAAkB,GAClCF,EAAgBE,EAAkB,EAC1C,KAAa,CACLF,EAAgBC,EAAgBF,CACxC,CAEM,IAAI9F,EAASyD,EAAgBhB,EAAMiD,YAAajD,EAAOkB,GAEvD,GAAIqC,IAAkB,UAAYA,IAAkB,OAAQ,CAC1D,GAAInI,EAAMmC,EAAO,IAAM8E,EAAYjH,MAAQ,MAAO,CAChDA,GAAOqH,EACPJ,EAAYjH,IAAM,QAC5B,CAEQ,GAAIA,EAAMH,EAASsC,EAAO,IAAM8E,EAAYjH,MAAQ,SAAU,CAC5DA,GAAOqH,EACPJ,EAAYjH,IAAM,KAC5B,CACA,CAEM,GAAImI,IAAkB,WAAY,CAChCnI,EAAMoH,EAAeH,EAAaC,EAAa/E,EAAQtC,EAAQwH,EAAcrH,EACrF,CAEM,GAAIkI,IAAkB,UAAYA,IAAkB,OAAQ,CAC1D,GAAIjI,EAAOkC,EAAO,IAAM8E,EAAYhH,OAAS,OAAQ,CACnDA,GAAQkH,EACRF,EAAYhH,KAAO,OAC7B,CAEQ,GAAIA,EAAOL,EAAQuC,EAAO,IAAM8E,EAAYhH,OAAS,QAAS,CAC5DA,GAAQkH,EACRF,EAAYhH,KAAO,MAC7B,CACA,CAEM,GAAIiI,IAAkB,WAAY,CAChCjI,EAAO+G,EAAeC,EAAaC,EAAa/E,EAAQvC,EAAOuH,EAAalH,EACpF,CAEM,GAAIkI,IAAkB,WAAaA,IAAkB,OAAQ,CAC3D,GAAInI,EAAMmC,EAAO,IAAM+E,EAAYlH,MAAQ,SAAU,CACnDA,GAAOH,EACPqH,EAAYlH,IAAM,KAC5B,CAEQ,GAAIA,EAAMH,EAASsC,EAAO,IAAM+E,EAAYlH,MAAQ,MAAO,CACzDA,GAAOH,EACPqH,EAAYlH,IAAM,QAC5B,CACA,CAEM,GAAIkI,IAAkB,WAAaA,IAAkB,OAAQ,CAC3D,GAAIjI,EAAOkC,EAAO,GAAI,CACpB,GAAI+E,EAAYjH,OAAS,QAAS,CAChCA,GAAQL,EACRsH,EAAYjH,KAAO,MAC/B,MAAiB,GAAIiH,EAAYjH,OAAS,SAAU,CACxCA,GAAQL,EAAQ,EAChBsH,EAAYjH,KAAO,MAC/B,CACA,CAEQ,GAAIA,EAAOL,EAAQuC,EAAO,GAAI,CAC5B,GAAI+E,EAAYjH,OAAS,OAAQ,CAC/BA,GAAQL,EACRsH,EAAYjH,KAAO,OAC/B,MAAiB,GAAIiH,EAAYjH,OAAS,SAAU,CACxCA,GAAQL,EAAQ,EAChBsH,EAAYjH,KAAO,OAC/B,CACA,CACA,CAEM,GAAIjD,EAAS6J,GAAM,CACjBA,EAAMA,EAAIvJ,MAAM,KAAK+K,KAAI,SAAU/L,GACjC,OAAOA,EAAEmB,MACnB,GACA,MAAa,GAAIoJ,IAAQ,KAAM,CACvBA,EAAM,CAAC,MAAO,OAAQ,QAAS,SACvC,CAEMA,EAAMA,GAAO,GACb,IAAIC,EAAS,GACb,IAAIN,EAAM,GACVvG,EAAO2G,EAA2B3G,EAAMkC,EAAQvC,EAAOiH,EAAKC,EAAQN,GACpExG,EAAM+G,EAA0B/G,EAAKmC,EAAQtC,EAAQgH,EAAKC,EAAQN,GAElE,GAAIM,EAAOrB,OAAQ,CACjB,IAAIiC,EAEJ,IAAKzK,EAAY2H,EAAMY,QAAQkC,aAAc,CAC3CA,EAAc9C,EAAMY,QAAQkC,WACtC,KAAe,CACLA,EAAc9J,EAAS,SAAUE,EAASC,EACpD,CAEQ0I,EAAWhI,KAAKiJ,GAChBZ,EAAOvJ,SAAQ,SAAU6H,GACvBqB,EAAWhI,KAAKiJ,EAAc,IAAMtC,EAC9C,GACA,CAEMmB,EAAqBC,EAAKC,EAAY3I,EAASC,EAAa6G,EAAMY,QAAQkB,kBAE1E,GAAII,EAAO1I,QAAQ,SAAW,GAAK0I,EAAO1I,QAAQ,UAAY,EAAG,CAC/D8I,EAAYjH,KAAOgH,EAAYhH,KAAO,KAC9C,CAEM,GAAI6G,EAAO1I,QAAQ,QAAU,GAAK0I,EAAO1I,QAAQ,WAAa,EAAG,CAC/D8I,EAAYlH,IAAMiH,EAAYjH,IAAM,KAC5C,CAEM,GAAIiH,EAAYjH,MAAQ4H,EAAiB5H,KAAOiH,EAAYhH,OAAS2H,EAAiB3H,MAAQiH,EAAYlH,MAAQ4E,EAAMqD,WAAWjI,KAAOkH,EAAYjH,OAAS2E,EAAMqD,WAAWhI,KAAM,CACpL2E,EAAM0D,oBAAoBpB,EAAaD,GAEvCrC,EAAM2D,QAAQ,SAAU,CACtBN,WAAYf,EACZU,iBAAkBX,GAE5B,CACA,IACI1I,GAAM,WACJ,KAAMqG,EAAMY,QAAQE,mBAAqB,OAAQ,CAC/CxH,EAAc0G,EAAM1C,OAAQuE,EAAYe,EAChD,CAEMtJ,EAAc0G,EAAMI,QAASyB,EAAYe,EAC/C,IACI,MAAO,CACLxH,IAAKA,EACLC,KAAMA,EAEZ,GAGA,IAAIuI,EAAQ,CACVzI,SAAU,SAASA,EAAS4E,GAC1B,IAAI3E,EAAM2E,EAAK3E,IACXC,EAAO0E,EAAK1E,KAEhB,IAAK4E,KAAKW,QAAQiD,MAAO,CACvB,MACN,CAEI,IAAIA,EAAQ5D,KAAKW,QAAQiD,MAEzB,GAAI7L,EAAW6L,GAAQ,CACrBA,EAAQA,EAAMnJ,KAAKuF,KAAM,CACvB7E,IAAKA,EACLC,KAAMA,GAEd,CAEI,IAAIyI,EAAUC,EAEd,GAAI3L,EAASyL,GAAQ,CACnBA,EAAQA,EAAMnL,MAAM,KACpBmL,EAAM,GAAKA,EAAM,IAAMA,EAAM,GAC7B,IAAIG,EAASH,EACbC,EAAWE,EAAO,GAClBD,EAAYC,EAAO,GACnBF,EAAW3F,WAAW2F,EAAU,IAChCC,EAAY5F,WAAW4F,EAAW,GACxC,KAAW,CACL,IAAIE,EAAQ,CAACJ,EAAMzI,IAAKyI,EAAMxI,MAC9ByI,EAAWG,EAAM,GACjBF,EAAYE,EAAM,EACxB,CAEI7I,GAAO0I,EACPzI,GAAQ0I,EACR,MAAO,CACL3I,IAAKA,EACLC,KAAMA,EAEZ,GAGA,IAAI6I,EAAuB,WACzB,SAASA,IAAU,CAEnB,IAAIC,EAASD,EAAQ9M,UAErB+M,EAAOC,GAAK,SAASA,EAAGC,EAAOC,EAASC,EAAKC,GAC3C,GAAIA,SAAc,EAAG,CACnBA,EAAO,KACb,CAEI,GAAInM,EAAY4H,KAAKwE,UAAW,CAC9BxE,KAAKwE,SAAW,EACtB,CAEI,GAAIpM,EAAY4H,KAAKwE,SAASJ,IAAS,CACrCpE,KAAKwE,SAASJ,GAAS,EAC7B,CAEIpE,KAAKwE,SAASJ,GAAOxK,KAAK,CACxByK,QAASA,EACTC,IAAKA,EACLC,KAAMA,IAER,OAAOvE,IACX,EAEEkE,EAAOK,KAAO,SAASA,EAAKH,EAAOC,EAASC,GAC1C,OAAOtE,KAAKmE,GAAGC,EAAOC,EAASC,EAAK,KACxC,EAEEJ,EAAOO,IAAM,SAASA,EAAIL,EAAOC,GAC/B,IAAItE,EAAQC,KAEZ,GAAI5H,EAAY4H,KAAKwE,WAAapM,EAAY4H,KAAKwE,SAASJ,IAAS,CACnE,OAAOpE,IACb,CAEI,GAAI5H,EAAYiM,GAAU,QACjBrE,KAAKwE,SAASJ,EAC3B,KAAW,CACLpE,KAAKwE,SAASJ,GAAO1L,SAAQ,SAAUgM,EAASC,GAC9C,GAAID,EAAQL,UAAYA,EAAS,CAC/BtE,EAAMyE,SAASJ,GAAOQ,OAAOD,EAAO,EAC9C,CACA,GACA,CAEI,OAAO3E,IACX,EAEEkE,EAAOR,QAAU,SAASA,EAAQU,GAChC,IAAIS,EAAS7E,KAEb,IAAK,IAAI8E,EAAOzK,UAAUuG,OAAQ1G,EAAO,IAAIC,MAAM2K,EAAO,EAAIA,EAAO,EAAI,GAAIC,EAAO,EAAGA,EAAOD,EAAMC,IAAQ,CAC1G7K,EAAK6K,EAAO,GAAK1K,UAAU0K,EACjC,CAEI,IAAK3M,EAAY4H,KAAKwE,WAAaxE,KAAKwE,SAASJ,GAAQ,CACvDpE,KAAKwE,SAASJ,GAAO1L,SAAQ,SAAUgM,EAASC,GAC9C,IAAIL,EAAMI,EAAQJ,IACdD,EAAUK,EAAQL,QAClBE,EAAOG,EAAQH,KACnB,IAAIS,EAAUV,GAAOO,EACrBR,EAAQjK,MAAM4K,EAAS9K,GAEvB,GAAIqK,EAAM,CACRM,EAAOL,SAASJ,GAAOQ,OAAOD,EAAO,EAC/C,CACA,GACA,CAEI,OAAO3E,IACX,EAEE,OAAOiE,CACT,CA3E2B,GA6E3B,IAAIgB,EAAY,CACdC,OAAQ,SACR9J,KAAM,QACN0B,MAAO,QAET,IAAIqI,EAAY,CACdC,OAAQ,SACRjK,IAAK,SACL6B,OAAQ,OAEV,IAAIqI,EAAa,CACflK,IAAK,EACLC,KAAM,EACNgK,OAAQ,MACRF,OAAQ,MACRlI,OAAQ,OACRF,MAAO,QAET,SAASwI,IACP,IAAIrL,EAAM,CACRkB,IAAK,EACLC,KAAM,GAGR,IAAK,IAAI0J,EAAOzK,UAAUuG,OAAQ2E,EAAU,IAAIpL,MAAM2K,GAAOC,EAAO,EAAGA,EAAOD,EAAMC,IAAQ,CAC1FQ,EAAQR,GAAQ1K,UAAU0K,EAC9B,CAEEQ,EAAQ7M,SAAQ,SAAUoH,GACxB,IAAI3E,EAAM2E,EAAK3E,IACXC,EAAO0E,EAAK1E,KAEhB,GAAIjD,EAASgD,GAAM,CACjBA,EAAM+C,WAAW/C,EACvB,CAEI,GAAIhD,EAASiD,GAAO,CAClBA,EAAO8C,WAAW9C,EACxB,CAEInB,EAAIkB,KAAOA,EACXlB,EAAImB,MAAQA,CAChB,IACE,OAAOnB,CACT,CACA,SAASuL,EAAmBpC,GAC1B,IAAIhI,EAAOgI,EAAWhI,KAClBD,EAAMiI,EAAWjI,IAErB,IAAK/C,EAAYiN,EAAWjC,EAAWhI,OAAQ,CAC7CA,EAAOiK,EAAWjC,EAAWhI,KACjC,CAEE,IAAKhD,EAAYiN,EAAWjC,EAAWjI,MAAO,CAC5CA,EAAMkK,EAAWjC,EAAWjI,IAChC,CAEE,MAAO,CACLC,KAAMA,EACND,IAAKA,EAET,CACA,SAASsK,EAAsBrC,EAAYsC,GACzC,IAAItK,EAAOgI,EAAWhI,KAClBD,EAAMiI,EAAWjI,IAErB,GAAIC,IAAS,OAAQ,CACnBA,EAAO6J,EAAUS,EAAqBtK,KAC1C,CAEE,GAAID,IAAQ,OAAQ,CAClBA,EAAMgK,EAAUO,EAAqBvK,IACzC,CAEE,MAAO,CACLC,KAAMA,EACND,IAAKA,EAET,CACA,SAASwK,EAAWC,EAAQxE,GAC1B,GAAIjJ,EAASyN,EAAOxK,OAASwK,EAAOxK,KAAK7B,QAAQ,QAAU,EAAG,CAC5DqM,EAAOxK,KAAO8C,WAAW0H,EAAOxK,MAAQ,IAAMgG,EAAKrG,KACvD,CAEE,GAAI5C,EAASyN,EAAOzK,MAAQyK,EAAOzK,IAAI5B,QAAQ,QAAU,EAAG,CAC1DqM,EAAOzK,IAAM+C,WAAW0H,EAAOzK,KAAO,IAAMiG,EAAKpG,MACrD,CAEE,OAAO4K,CACT,CACA,SAASC,EAAa7N,GACpB,IAAI8N,EAAe9N,EAAMS,MAAM,KAC3B0C,EAAM2K,EAAa,GACnB1K,EAAO0K,EAAa,GAExB,MAAO,CACL3K,IAAKA,EACLC,KAAMA,EAEV,CAEA,SAAS2K,EAAiBxN,GAGxB,IAAIyN,EAAgBlI,iBAAiBvF,IAAO,GAC5C,IAAI2C,EAAW8K,EAAc9K,SAC7B,IAAI+K,EAAU,GAEd,GAAI/K,IAAa,QAAS,CACxB,MAAO,CAAC3C,EACZ,CAEE,IAAI2N,EAAS3N,EAEb,OAAQ2N,EAASA,EAAOC,aAAeD,GAAUA,EAAO/E,WAAa,EAAG,CACtE,IAAIrG,OAAa,EAEjB,IACEA,EAAQgD,iBAAiBoI,EAC/B,CAAM,MAAOzG,GACb,CAEI,GAAIrH,EAAY0C,IAAUA,IAAU,KAAM,CACxCmL,EAAQrM,KAAKsM,GACb,OAAOD,CACb,CAEI,IAAIG,EAAStL,EACTS,EAAW6K,EAAO7K,SAClByC,EAAYoI,EAAOpI,UACnBqI,EAAYD,EAAOC,UAEvB,GAAI,wBAAwBC,KAAK/K,EAAW8K,EAAYrI,GAAY,CAClE,GAAI9C,IAAa,YAAc,CAAC,WAAY,WAAY,SAAS3B,QAAQuB,EAAMI,WAAa,EAAG,CAC7F+K,EAAQrM,KAAKsM,EACrB,CACA,CACA,CAEED,EAAQrM,KAAKrB,EAAGgE,cAAcd,MAE9B,GAAIlD,EAAGgE,gBAAkB3B,SAAU,CACjCqL,EAAQrM,KAAKrB,EAAGgE,cAAcgD,YAClC,CAEE,OAAO0G,CACT,CACA,SAASM,EAAgBhO,GACvB,OAAOA,EAAGiO,cAAgB5L,SAAS0B,eACrC,CAEA,IAAImK,EAAa,CACfC,QAAS,CAAC5D,EAAYjD,EAAU8D,IAGlC,SAASgD,EAAoBC,GAC3B,IAAIC,EAAID,EAAErK,cACV,IAAIuK,EAAKD,EAAEE,mBAAqBF,EAAEG,yBAA2BH,EAAEI,sBAAwBJ,EAAEK,oBACzF,OAAOJ,IAAOF,CAChB,CAEA,SAASO,EAAOC,EAAGC,EAAGC,GACpB,GAAIA,SAAc,EAAG,CACnBA,EAAO,CACX,CAEE,OAAOF,EAAIE,GAAQD,GAAKA,GAAKD,EAAIE,CACnC,CAEA,IAAIC,EAAe,WACjB,GAAInP,EAAYwC,UAAW,CACzB,MAAO,EACX,CAEE,IAAIrC,EAAKqC,SAASC,cAAc,OAChC,IAAI2M,EAAa,CAAC,YAAa,kBAAmB,aAAc,eAAgB,eAEhF,IAAK,IAAIjG,EAAI,EAAGA,EAAIiG,EAAW5G,SAAUW,EAAG,CAC1C,IAAIvI,EAAMwO,EAAWjG,GAErB,GAAIhJ,EAAGuC,MAAM9B,KAASX,UAAW,CAC/B,OAAOW,CACb,CACA,CACA,CAfmB,GAiBnB,IAAIyO,EAAU,GAEd,IAAIvM,GAAW,SAASA,IACtBuM,EAAQ/O,SAAQ,SAAUsI,GACxBA,EAAO9F,SAAS,MACpB,IACErB,GACF,EAEA,SAAS6N,KACP,OAAOC,YAAYD,KACrB,EAEA,WACE,IAAIE,EAAW,KACf,IAAIC,EAAe,KACnB,IAAIC,EAAiB,KAErB,IAAIC,EAAO,SAASA,IAClB,IAAK3P,EAAYyP,IAAiBA,EAAe,GAAI,CAEnDA,EAAetJ,KAAKK,IAAIiJ,EAAe,GAAI,KAE3CC,EAAiBE,WAAWD,EAAM,KAClC,MACN,CAEI,IAAK3P,EAAYwP,IAAaF,KAAQE,EAAW,GAAI,CAEnD,MACN,CAEI,GAAIE,GAAkB,KAAM,CAC1BG,aAAaH,GACbA,EAAiB,IACvB,CAEIF,EAAWF,KACXxM,KACA2M,EAAeH,KAAQE,CAC3B,EAEE,IAAKxP,EAAY8P,UAAY9P,EAAY8P,OAAOC,kBAAmB,CACjE,CAAC,SAAU,SAAU,aAAazP,SAAQ,SAAU0L,GAClD8D,OAAOC,iBAAiB/D,EAAO2D,EACrC,GACA,CACC,EAlCD,GAoCA,IAAIK,GAA2B,SAAUC,GACvCrR,EAAeoR,EAAaC,GAE5B,SAASD,EAAYzH,GACnB,IAAIZ,EAEJA,EAAQsI,EAAS5N,KAAKuF,OAASA,KAC/BD,EAAM7E,SAAW6E,EAAM7E,SAASoN,KAAK1Q,EAAuBmI,IAC5D0H,EAAQ7N,KAAKhC,EAAuBmI,IACpCA,EAAMwI,QAAU,GAEhBxI,EAAMyI,WAAW7H,EAAS,OAE1B8F,EAAWC,QAAQhO,SAAQ,SAAU+P,GACnC,IAAKrQ,EAAYqQ,EAAOC,YAAa,CACnCD,EAAOC,WAAWjO,KAAK7C,EAAuBmI,GACtD,CACA,IAEIA,EAAM7E,WAEN,OAAO6E,CACX,CAEE,IAAImE,EAASkE,EAAYjR,UAEzB+M,EAAOsE,WAAa,SAASA,EAAW7H,EAASU,GAC/C,IAAIwD,EAAS7E,KAEb,GAAIqB,SAAa,EAAG,CAClBA,EAAM,IACZ,CAEI,IAAIsH,EAAW,CACb/C,OAAQ,MACRgD,aAAc,MACd7F,iBAAkB,YAClB7J,YAAa,SACb8J,YAAapI,SAASa,MAExBuE,KAAKW,QAAU3G,EAAO2O,EAAUhI,GAChC,IAAID,EAAgBV,KAAKW,QACrBR,EAAUO,EAAcP,QACxB9C,EAASqD,EAAcrD,OACvBwL,EAAiBnI,EAAcmI,eAC/B7F,EAActC,EAAcsC,YAChChD,KAAKG,QAAUA,EACfH,KAAK3C,OAASA,EACd2C,KAAK6I,eAAiBA,EAEtB,UAAW7F,IAAgB,SAAU,CACnCA,EAAcpI,SAASkO,cAAc9F,EAC3C,CAEIhD,KAAKgD,YAAcA,EAEnB,GAAIhD,KAAK3C,SAAW,WAAY,CAC9B2C,KAAK3C,OAASzC,SAASa,KACvBuE,KAAK6I,eAAiB,SAC5B,MAAW,GAAI7I,KAAK3C,SAAW,gBAAiB,CAC1C2C,KAAK3C,OAASzC,SAASa,KACvBuE,KAAK6I,eAAiB,eAC5B,CAEI,CAAC,UAAW,UAAUnQ,SAAQ,SAAUM,GACtC,GAAIZ,EAAYyM,EAAO7L,IAAO,CAC5B,MAAM,IAAI+P,MAAM,wDACxB,CAEM,IAAK3Q,EAAYyM,EAAO7L,GAAKgQ,QAAS,CACpCnE,EAAO7L,GAAO6L,EAAO7L,GAAK,EAClC,MAAa,GAAIb,EAAS0M,EAAO7L,IAAO,CAChC6L,EAAO7L,GAAO4B,SAASkO,cAAcjE,EAAO7L,GACpD,CACA,IAEIgH,KAAKiJ,cAEL,IAAKjJ,KAAKW,QAAQyC,WAAY,CAC5B,MAAM,IAAI2F,MAAM,+CACtB,CAEI/I,KAAK+C,iBAAmB8C,EAAa7F,KAAKW,QAAQoC,kBAClD/C,KAAKoD,WAAayC,EAAa7F,KAAKW,QAAQyC,YAC5CpD,KAAK4F,OAASC,EAAa7F,KAAKW,QAAQiF,QACxC5F,KAAK4I,aAAe/C,EAAa7F,KAAKW,QAAQiI,cAE9C,IAAKxQ,EAAY4H,KAAKkB,eAAgB,CACpClB,KAAKkJ,SACX,CAEI,GAAIlJ,KAAK6I,iBAAmB,gBAAiB,CAC3C7I,KAAKkB,cAAgB,CAAClB,KAAK3C,OACjC,KAAW,CACL2C,KAAKkB,cAAgB6E,EAAiB/F,KAAK3C,OACjD,CAEI,KAAM2C,KAAKW,QAAQwI,UAAY,OAAQ,CACrCnJ,KAAKoJ,OAAO/H,EAClB,CACA,EAEE6C,EAAO7D,gBAAkB,SAASA,IAChC,IAAKjI,EAAY4H,KAAK6I,gBAAiB,CACrC,GAAI7I,KAAK6I,iBAAmB,UAAW,CACrC,OAAOlK,EAAiBqB,KAAKgD,YAAahD,KAAK3C,OACvD,MAAa,GAAI2C,KAAK6I,iBAAmB,gBAAiB,CAClD,OAAOzL,EAAsB4C,KAAKgD,YAAahD,KAAK3C,OAC5D,CACA,KAAW,CACL,OAAOjB,EAAU4D,KAAKgD,YAAahD,KAAK3C,OAC9C,CACA,EAEE6G,EAAOmF,WAAa,SAASA,IAC3BrJ,KAAKsJ,OAAS,EAClB,EAEEpF,EAAOhE,MAAQ,SAASA,EAAMb,EAAGkK,GAG/B,GAAInR,EAAY4H,KAAKsJ,QAAS,CAC5BtJ,KAAKsJ,OAAS,EACpB,CAEI,GAAIlR,EAAY4H,KAAKsJ,OAAOjK,IAAK,CAC/BW,KAAKsJ,OAAOjK,GAAKkK,EAAO9O,KAAKuF,KACnC,CAEI,OAAOA,KAAKsJ,OAAOjK,EACvB,EAEE6E,EAAOkF,OAAS,SAASA,EAAO/H,GAC9B,IAAImI,EAASxJ,KAEb,GAAIqB,SAAa,EAAG,CAClBA,EAAM,IACZ,CAEI,IAAIoI,EAAiBzJ,KAAKW,QACtB1H,EAAUwQ,EAAexQ,QACzBC,EAAcuQ,EAAevQ,YAEjC,KAAM8G,KAAKW,QAAQE,mBAAqB,OAAQ,CAC9CvI,EAAS0H,KAAK3C,OAAQtE,EAAS,UAAWE,EAASC,GACzD,CAEIZ,EAAS0H,KAAKG,QAASpH,EAAS,UAAWE,EAASC,IACpD8G,KAAKmJ,QAAU,KACfnJ,KAAKkB,cAAcxI,SAAQ,SAAUwN,GACnC,GAAIA,IAAWsD,EAAOnM,OAAOd,cAAe,CAC1C2J,EAAOiC,iBAAiB,SAAUqB,EAAOtO,SACjD,CACA,IAEI,GAAImG,EAAK,CACPrB,KAAK9E,UACX,CACA,EAEEgJ,EAAOgF,QAAU,SAASA,IACxB,IAAIQ,EAAS1J,KAEb,IAAI2J,EAAiB3J,KAAKW,QACtB1H,EAAU0Q,EAAe1Q,QACzBC,EAAcyQ,EAAezQ,YACjCC,EAAY6G,KAAK3C,OAAQtE,EAAS,UAAWE,EAASC,IACtDC,EAAY6G,KAAKG,QAASpH,EAAS,UAAWE,EAASC,IACvD8G,KAAKmJ,QAAU,MAEf,IAAK/Q,EAAY4H,KAAKkB,eAAgB,CACpClB,KAAKkB,cAAcxI,SAAQ,SAAUwN,GACnC,GAAIA,GAAUA,EAAO0D,oBAAqB,CACxC1D,EAAO0D,oBAAoB,SAAUF,EAAOxO,SACtD,CACA,GACA,CACA,EAEEgJ,EAAO2F,QAAU,SAASA,IACxB,IAAIC,EAAS9J,KAEbA,KAAKkJ,UAELlJ,KAAK+J,iBAELtC,EAAQ/O,SAAQ,SAAUsI,EAAQO,GAChC,GAAIP,IAAW8I,EAAQ,CACrBrC,EAAQ7C,OAAOrD,EAAG,EAC1B,CACA,IAEI,GAAIkG,EAAQ7G,SAAW,EAAG,CACxB/B,EAAmBmB,KAAKgD,YAC9B,CACA,EAEEkB,EAAOT,oBAAsB,SAASA,EAAoBuG,EAAeC,GACvE,IAAIC,EAASlK,KAEbgK,EAAgBA,GAAiBhK,KAAKoD,WACtC6G,EAAeA,GAAgBjK,KAAK+C,iBACpC,IAAItC,EAAQ,CAAC,OAAQ,MAAO,SAAU,QAAS,SAAU,UACzD,IAAI0J,EAAiBnK,KAAKW,QACtB1H,EAAUkR,EAAelR,QACzBC,EAAciR,EAAejR,YAEjC,IAAKd,EAAY4H,KAAKoK,oBAAsBpK,KAAKoK,kBAAkBxJ,OAAQ,CAIzEZ,KAAKoK,kBAAkBxF,OAAO,EAAG5E,KAAKoK,kBAAkBxJ,OAC9D,CAEI,GAAIxI,EAAY4H,KAAKoK,mBAAoB,CACvCpK,KAAKoK,kBAAoB,EAC/B,CAEIpK,KAAKlH,IAAMkH,KAAKoK,kBAEhB,GAAIJ,EAAc7O,IAAK,CACrB6E,KAAKlH,IAAIc,KAAKb,EAAS,mBAAoBE,EAASC,GAAe,IAAM8Q,EAAc7O,IAC7F,CAEI,GAAI6O,EAAc5O,KAAM,CACtB4E,KAAKlH,IAAIc,KAAKb,EAAS,mBAAoBE,EAASC,GAAe,IAAM8Q,EAAc5O,KAC7F,CAEI,GAAI6O,EAAa9O,IAAK,CACpB6E,KAAKlH,IAAIc,KAAKb,EAAS,kBAAmBE,EAASC,GAAe,IAAM+Q,EAAa9O,IAC3F,CAEI,GAAI8O,EAAa7O,KAAM,CACrB4E,KAAKlH,IAAIc,KAAKb,EAAS,kBAAmBE,EAASC,GAAe,IAAM+Q,EAAa7O,KAC3F,CAEI4E,KAAK1G,IAAM,GACXmH,EAAM/H,SAAQ,SAAU6H,GACtB2J,EAAO5Q,IAAIM,KAAKb,EAAS,mBAAoBE,EAASC,GAAe,IAAMqH,GAE3E2J,EAAO5Q,IAAIM,KAAKb,EAAS,kBAAmBE,EAASC,GAAe,IAAMqH,EAChF,IACI7G,GAAM,WACJ,GAAItB,EAAY8R,EAAOE,mBAAoB,CACzC,MACR,CAEM/Q,EAAc6Q,EAAO/J,QAAS+J,EAAOE,kBAAmBF,EAAO5Q,KAE/D,KAAM4Q,EAAOvJ,QAAQE,mBAAqB,OAAQ,CAChDxH,EAAc6Q,EAAO7M,OAAQ6M,EAAOE,kBAAmBF,EAAO5Q,IACtE,QAEa4Q,EAAOE,iBACpB,GACA,EAEElG,EAAOhJ,SAAW,SAASA,EAASmP,GAClC,IAAIC,EAAStK,KAEb,GAAIqK,SAAsB,EAAG,CAC3BA,EAAe,IACrB,CAII,IAAKrK,KAAKmJ,QAAS,CACjB,MACN,CAEInJ,KAAKqJ,aAEL,IAAItG,EAAmB0C,EAAsBzF,KAAK+C,iBAAkB/C,KAAKoD,YACzEpD,KAAKyD,oBAAoBzD,KAAKoD,WAAYL,GAC1C,IAAIwH,EAAavK,KAAKE,MAAM,kBAAkB,WAC5C,OAAO9D,EAAUkO,EAAOtH,YAAasH,EAAOnK,QAClD,IACI,IAAIpF,EAAQwP,EAAWxP,MACnBC,EAASuP,EAAWvP,OAExB,GAAID,IAAU,GAAKC,IAAW,IAAM5C,EAAY4H,KAAKiD,UAAW,CAG9D,IAAIC,EAAiBlD,KAAKiD,SAC1BlI,EAAQmI,EAAenI,MACvBC,EAASkI,EAAelI,MAC9B,KAAW,CACLgF,KAAKiD,SAAW,CACdlI,MAAOA,EACPC,OAAQA,EAEhB,CAEI,IAAIoF,EAAYJ,KAAKE,MAAM,iBAAiB,WAC1C,OAAOoK,EAAOjK,iBACpB,IACI,IAAI8C,EAAa/C,EAEjB,IAAIwF,EAASD,EAAWH,EAAmBxF,KAAKoD,YAAa,CAC3DrI,MAAOA,EACPC,OAAQA,IAEV,IAAI4N,EAAejD,EAAWH,EAAmBzC,GAAmBI,GACpE,IAAIqH,EAAe7E,EAAW3F,KAAK4F,OAAQ,CACzC7K,MAAOA,EACPC,OAAQA,IAEV,IAAIyP,EAAqB9E,EAAW3F,KAAK4I,aAAczF,GAEvDyC,EAASN,EAAUM,EAAQ4E,GAC3B5B,EAAetD,EAAUsD,EAAc6B,GAEvC,IAAIrP,EAAOgF,EAAUhF,KAAOwN,EAAaxN,KAAOwK,EAAOxK,KACvD,IAAID,EAAMiF,EAAUjF,IAAMyN,EAAazN,IAAMyK,EAAOzK,IAEpD,IAAK,IAAIoG,EAAI,EAAGA,EAAIkF,EAAWC,QAAQ9F,SAAUW,EAAG,CAClD,IAAIkH,EAAShC,EAAWC,QAAQnF,GAChC,IAAImJ,EAAMjC,EAAOvN,SAAST,KAAKuF,KAAM,CACnC5E,KAAMA,EACND,IAAKA,EACL4H,iBAAkBA,EAClB3C,UAAWA,EACXmK,WAAYA,EACZ3E,OAAQA,EACRgD,aAAcA,EACd4B,aAAcA,EACdC,mBAAoBA,EACpBE,cAAeA,EACfvH,WAAYpD,KAAKoD,aAGnB,GAAIsH,IAAQ,MAAO,CACjB,OAAO,KACf,MAAa,GAAItS,EAAYsS,KAASxS,EAASwS,GAAM,CAC7C,QACR,KAAa,CACLvP,EAAMuP,EAAIvP,IACVC,EAAOsP,EAAItP,IACnB,CACA,CAKI,IAAIwP,EAAO,CAGTC,KAAM,CACJ1P,IAAKA,EACLC,KAAMA,GAGR0P,SAAU,CACR3P,IAAKA,EAAMwC,YACXX,OAAQW,YAAcxC,EAAMH,EAAS4C,YACrCxC,KAAMA,EAAOsC,YACbZ,MAAOY,YAActC,EAAOL,EAAQ8C,aAGxC,IAAIxB,EAAM2D,KAAK3C,OAAOd,cACtB,IAAI+E,EAAMjF,EAAIkD,YACd,IAAIoL,EAEJ,GAAIrJ,EAAI1D,YAAcvB,EAAIC,gBAAgBa,aAAc,CACtDwN,EAAgB3K,KAAKE,MAAM,iBAAkBxF,GAC7CkQ,EAAKE,SAAS9N,QAAU2N,EAAc3P,MAC5C,CAEI,GAAIsG,EAAIzD,WAAaxB,EAAIC,gBAAgBT,YAAa,CACpD8O,EAAgB3K,KAAKE,MAAM,iBAAkBxF,GAC7CkQ,EAAKE,SAAShO,OAAS6N,EAAc5P,KAC3C,CAEI,GAAI,CAAC,GAAI,UAAUxB,QAAQ8C,EAAIZ,KAAKX,MAAMI,aAAe,GAAK,CAAC,GAAI,UAAU3B,QAAQ8C,EAAIZ,KAAKsP,cAAcjQ,MAAMI,aAAe,EAAG,CAElI0P,EAAKC,KAAK7N,OAASX,EAAIZ,KAAKsB,aAAe5B,EAAMH,EACjD4P,EAAKC,KAAK/N,MAAQT,EAAIZ,KAAKoB,YAAczB,EAAOL,CACtD,CAEI,IAAK3C,EAAY4H,KAAKW,QAAQqK,gBAAkBhL,KAAKW,QAAQqK,cAAcC,cAAgB,OAAS7S,EAAY4H,KAAK6I,gBAAiB,CACpI,IAAIrC,EAAexG,KAAKE,MAAM,uBAAuB,WACnD,OAAOqG,EAAgB+D,EAAOjN,OACtC,IACM,IAAI6N,EAAiBlL,KAAKE,MAAM,8BAA8B,WAC5D,OAAO9D,EAAUkO,EAAOtH,YAAawD,EAC7C,IACM,IAAI2E,EAAoBrN,iBAAiB0I,GACzC,IAAI4E,EAAmBF,EACvB,IAAIG,EAAe,GACnB,CAAC,MAAO,OAAQ,SAAU,SAAS3S,SAAQ,SAAU6H,GACnD8K,EAAa9K,EAAK+K,eAAiBpN,WAAWiN,EAAkB,SAAW5K,EAAO,SAC1F,IACM2K,EAAepO,MAAQT,EAAIZ,KAAKoB,YAAcqO,EAAe9P,KAAOgQ,EAAiBrQ,MAAQsQ,EAAavO,MAC1GoO,EAAelO,OAASX,EAAIZ,KAAKsB,aAAemO,EAAe/P,IAAMiQ,EAAiBpQ,OAASqQ,EAAarO,OAE5G,GAAI4N,EAAKC,KAAK1P,KAAO+P,EAAe/P,IAAMkQ,EAAalQ,KAAOyP,EAAKC,KAAK7N,QAAUkO,EAAelO,OAAQ,CACvG,GAAI4N,EAAKC,KAAKzP,MAAQ8P,EAAe9P,KAAOiQ,EAAajQ,MAAQwP,EAAKC,KAAK/N,OAASoO,EAAepO,MAAO,CAExG,IAAIyO,EAAa/E,EAAa+E,WAC1B/N,EAAYgJ,EAAahJ,UAG7BoN,EAAKhF,OAAS,CACZzK,IAAKyP,EAAKC,KAAK1P,IAAM+P,EAAe/P,IAAMqC,EAAY6N,EAAalQ,IACnEC,KAAMwP,EAAKC,KAAKzP,KAAO8P,EAAe9P,KAAOmQ,EAAaF,EAAajQ,KAEnF,CACA,CACA,CAII4E,KAAKwL,KAAKZ,GACV5K,KAAKuI,QAAQkD,QAAQb,GAErB,GAAI5K,KAAKuI,QAAQ3H,OAAS,EAAG,CAC3BZ,KAAKuI,QAAQzO,KACnB,CAEI,GAAIuQ,EAAc,CAChBxQ,GACN,CAEI,OAAO,IACX,EAGEqK,EAAOsH,KAAO,SAASA,EAAKnK,GAC1B,IAAIqK,EAAS1L,KAEb,GAAI5H,EAAY4H,KAAKG,QAAQgG,YAAa,CACxC,MACN,CAEI,IAAIwF,EAAO,GAEX,IAAK,IAAIC,KAAQvK,EAAK,CACpBsK,EAAKC,GAAQ,GAEb,IAAK,IAAI5S,KAAOqI,EAAIuK,GAAO,CACzB,IAAIC,EAAQ,MAEZ,IAAK,IAAItK,EAAI,EAAGA,EAAIvB,KAAKuI,QAAQ3H,SAAUW,EAAG,CAC5C,IAAIuK,EAAQ9L,KAAKuI,QAAQhH,GAEzB,IAAKnJ,EAAY0T,EAAMF,MAAWzE,EAAO2E,EAAMF,GAAM5S,GAAMqI,EAAIuK,GAAM5S,IAAO,CAC1E6S,EAAQ,KACR,KACZ,CACA,CAEQ,IAAKA,EAAO,CACVF,EAAKC,GAAM5S,GAAO,IAC5B,CACA,CACA,CAEI,IAAI+S,EAAM,CACR5Q,IAAK,GACLC,KAAM,GACN0B,MAAO,GACPE,OAAQ,IAGV,IAAIgP,EAAa,SAASA,EAAWC,EAAOC,GAC1C,IAAIC,GAAoB/T,EAAYsT,EAAO/K,QAAQqK,eACnD,IAAIoB,EAAMD,EAAmBT,EAAO/K,QAAQqK,cAAcoB,IAAM,KAEhE,GAAIA,IAAQ,MAAO,CACjB,IAAIC,EAAMC,EAEV,GAAIL,EAAM9Q,IAAK,CACb4Q,EAAI5Q,IAAM,EACVkR,EAAOH,EAAK/Q,GACtB,KAAe,CACL4Q,EAAI/O,OAAS,EACbqP,GAAQH,EAAKlP,MACvB,CAEQ,GAAIiP,EAAM7Q,KAAM,CACd2Q,EAAI3Q,KAAO,EACXkR,EAAOJ,EAAK9Q,IACtB,KAAe,CACL2Q,EAAIjP,MAAQ,EACZwP,GAAQJ,EAAKpP,KACvB,CAEQ,GAAI7E,EAASiQ,OAAOqE,mBAAqBA,iBAAmB,IAAM,EAAG,CACnED,EAAO/N,KAAKiO,MAAMF,EAAOC,kBAAoBA,iBAC7CF,EAAO9N,KAAKiO,MAAMH,EAAOE,kBAAoBA,gBACvD,CAEQR,EAAIxE,GAAgB,cAAgB+E,EAAO,kBAAoBD,EAAO,MAEtE,GAAI9E,IAAiB,cAAe,CAGlCwE,EAAIxE,IAAiB,gBAC/B,CACA,KAAa,CACL,GAAI0E,EAAM9Q,IAAK,CACb4Q,EAAI5Q,IAAM+Q,EAAK/Q,IAAM,IAC/B,KAAe,CACL4Q,EAAI/O,OAASkP,EAAKlP,OAAS,IACrC,CAEQ,GAAIiP,EAAM7Q,KAAM,CACd2Q,EAAI3Q,KAAO8Q,EAAK9Q,KAAO,IACjC,KAAe,CACL2Q,EAAIjP,MAAQoP,EAAKpP,MAAQ,IACnC,CACA,CACA,EAEI,IAAIqP,GAAoB/T,EAAY4H,KAAKW,QAAQqK,eACjD,IAAIyB,EAAqB,KAEzB,GAAIN,GAAoBnM,KAAKW,QAAQqK,cAAcyB,qBAAuB,MAAO,CAC/EA,EAAqB,KAC3B,CAEI,IAAIC,EAAQ,MAEZ,IAAKf,EAAKd,KAAK1P,KAAOwQ,EAAKd,KAAK7N,UAAY2O,EAAKd,KAAKzP,MAAQuQ,EAAKd,KAAK/N,OAAQ,CAC9EiP,EAAI7Q,SAAW,WACf8Q,EAAWL,EAAKd,KAAMxJ,EAAIwJ,KAChC,MAAW,GAAI4B,IAAuBd,EAAKb,SAAS3P,KAAOwQ,EAAKb,SAAS9N,UAAY2O,EAAKb,SAAS1P,MAAQuQ,EAAKb,SAAShO,OAAQ,CAC3HiP,EAAI7Q,SAAW,QACf8Q,EAAWL,EAAKb,SAAUzJ,EAAIyJ,SACpC,MAAW,IAAK1S,EAAYuT,EAAK/F,SAAW+F,EAAK/F,OAAOzK,KAAOwQ,EAAK/F,OAAOxK,KAAM,CAC3E2Q,EAAI7Q,SAAW,WACf,IAAIsL,EAAexG,KAAKE,MAAM,uBAAuB,WACnD,OAAOqG,EAAgBmF,EAAOrO,OACtC,IAEM,GAAIkJ,EAAgBvG,KAAKG,WAAaqG,EAAc,CAClD9M,GAAM,WACJgS,EAAOvL,QAAQgG,WAAWrK,YAAY4P,EAAOvL,SAE7CqG,EAAahL,YAAYkQ,EAAOvL,QAC1C,GACA,CAEM6L,EAAWL,EAAK/F,OAAQvE,EAAIuE,QAC5B8G,EAAQ,IACd,KAAW,CACLX,EAAI7Q,SAAW,WACf8Q,EAAW,CACT7Q,IAAK,KACLC,KAAM,MACLiG,EAAIwJ,KACb,CAEI,IAAK6B,EAAO,CACV,GAAI1M,KAAKW,QAAQqC,YAAa,CAC5B,GAAIhD,KAAKG,QAAQgG,aAAenG,KAAKW,QAAQqC,YAAa,CACxDhD,KAAKW,QAAQqC,YAAYxH,YAAYwE,KAAKG,QACpD,CACA,KAAa,CACL,IAAIwM,EAAqB,KACzB,IAAIC,EAAc5M,KAAKG,QAAQgG,WAE/B,MAAOyG,GAAeA,EAAYzL,WAAa,GAAKyL,EAAYC,UAAY,SAAWlG,EAAoBiG,GAAc,CACvH,GAAI9O,iBAAiB8O,GAAa1R,WAAa,SAAU,CACvDyR,EAAqB,MACrB,KACZ,CAEUC,EAAcA,EAAYzG,UACpC,CAEQ,IAAKwG,EAAoB,CACvB3M,KAAKG,QAAQgG,WAAWrK,YAAYkE,KAAKG,SACzCH,KAAKG,QAAQ5D,cAAcd,KAAKD,YAAYwE,KAAKG,QAC3D,CACA,CACA,CAGI,IAAI2M,EAAW,GACf,IAAIC,EAAQ,MAEZ,IAAK,IAAIhI,KAAQgH,EAAK,CACpB,IAAIiB,EAAMjB,EAAIhH,GACd,IAAIkI,EAAQjN,KAAKG,QAAQrF,MAAMiK,GAE/B,GAAIkI,IAAUD,EAAK,CACjBD,EAAQ,KACRD,EAAS/H,GAAQiI,CACzB,CACA,CAEI,GAAID,EAAO,CACTrT,GAAM,WACJM,EAAO0R,EAAOvL,QAAQrF,MAAOgS,GAE7BpB,EAAOhI,QAAQ,eACvB,GACA,CACA,EAEEQ,EAAO+E,YAAc,SAASA,IAC5B,IAAIiE,EAAiBlN,KAAKW,QACtB1H,EAAUiU,EAAejU,QACzBC,EAAcgU,EAAehU,YACjCZ,EAAS0H,KAAKG,QAASpH,EAAS,UAAWE,EAASC,IAEpD,KAAM8G,KAAKW,QAAQE,mBAAqB,OAAQ,CAC9CvI,EAAS0H,KAAK3C,OAAQtE,EAAS,SAAUE,EAASC,GACxD,CACA,EAEEgL,EAAO6F,eAAiB,SAASA,IAC/B,IAAIoD,EAASnN,KAEb,IAAIoN,EAAiBpN,KAAKW,QACtB1H,EAAUmU,EAAenU,QACzBC,EAAckU,EAAelU,YACjCC,EAAY6G,KAAKG,QAASpH,EAAS,UAAWE,EAASC,IAEvD,KAAM8G,KAAKW,QAAQE,mBAAqB,OAAQ,CAC9C1H,EAAY6G,KAAK3C,OAAQtE,EAAS,SAAUE,EAASC,GAC3D,CAEI8G,KAAK1G,IAAIZ,SAAQ,SAAU2U,GACzBF,EAAOhN,QAAQtH,UAAUO,OAAOiU,GAEhCF,EAAO9P,OAAOxE,UAAUO,OAAOiU,EACrC,GACA,EAEE,OAAOjF,CACT,CAxnB+B,CAwnB7BnE,GAEFmE,GAAY1B,QAAU,GACtBD,EAAWvL,SAAWA,GACnB,IAACoS,GAAStT,EAAOoO,GAAa3B,GACjC6G,GAAO5G,QAAQ9M,KAAK,CAClB8O,WAAY,SAASA,IACnB,IAAI6E,EAAUvN,KAEd,IAAIwN,EAAiBxN,KAAKW,QACtB1H,EAAUuU,EAAevU,QACzBC,EAAcsU,EAAetU,YACjC8G,KAAKyN,QAAU,GACf,CAAC,SAAU,WAAW/U,SAAQ,SAAUkT,GACtC,IAAIrT,EAAKqC,SAASC,cAAc,OAChCtC,EAAG8U,UAAYtU,EAAS6S,EAAO,UAAW3S,EAASC,GACnD,IAAIwU,EAAM9S,SAASC,cAAc,OACjC6S,EAAIL,UAAYtU,EAAS,aAAcE,EAASC,GAChDX,EAAGiD,YAAYkS,GAEfH,EAAQ3B,GAAMpQ,YAAYjD,GAE1BgV,EAAQE,QAAQ7B,GAAQ,CACtB8B,IAAKA,EACLnV,GAAIA,EAEZ,GACA,EACE2C,SAAU,SAASA,EAAS4E,GAC1B,IAAI0K,EAAe1K,EAAK0K,aACpBC,EAAqB3K,EAAK2K,mBAC9B,IAAIlF,EAAU,CACZpF,QAASqK,EACTnN,OAAQoN,GAGV,IAAK,IAAImB,KAAQrG,EAAS,CACxB,IAAIK,EAASL,EAAQqG,GAErB,IAAK,IAAIrL,KAAQqF,EAAQ,CACvB,IAAI+H,EAEJ,IAAIX,EAAMpH,EAAOrF,GAEjB,IAAKpI,EAAS6U,IAAQA,EAAIzT,QAAQ,QAAU,GAAKyT,EAAIzT,QAAQ,SAAW,EAAG,CACzEyT,GAAO,IACjB,CAEQ,GAAIhN,KAAKyN,QAAQ7B,MAAW+B,EAAwB3N,KAAKyN,QAAQ7B,GAAM8B,MAAQ,UAAY,EAAIC,EAAsB7S,MAAMyF,MAAWyM,EAAK,CACzIhN,KAAKyN,QAAQ7B,GAAM8B,IAAI5S,MAAMyF,GAAQyM,CAC/C,CACA,CACA,CAEI,OAAO,IACX,W"}