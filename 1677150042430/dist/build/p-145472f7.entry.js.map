{"version":3,"names":["ldSliderShadowCss","findClosest","items","currValue","length","reduce","prevItem","item","Math","abs","findNext","filter","findPrev","sliderCount","LdSlider","this","idPrefix","handleTrackClick","ev","composedPath","el","afterStyles","getComputedStyle","paddingLeft","Number","parseInt","marginLeft","trackWidth","width","clickPosition","offsetX","newValue","round","max","min","values","index","indexOf","correctedValue","getCorrectedValue","splice","value","join","handleInput","target","ariaDisabled","String","handleKeyDown","prevValue","stops","snapOffset","key","steps","undefined","preventDefault","snap","nextValue","swappable","stepToSnapTo","find","step","validateValue","correctValues","correctedValues","map","every","updateValues","autoCorrectValues","split","async","_a","firstSliderRef","focus","preventScroll","updateState","valueLabel","Array","floor","fill","valueLabels","handleValueChange","success","ldchange","emit","componentWillLoad","render","cssValues","prev","curr","h","Host","class","getClassNames","hideValueLabels","size","onClick","role","style","Object","assign","negative","_","Fragment","id","part","labelFrom","labelTo","labelValue","disabled","unit","onInput","onKeyDown","ref","zIndex","tabindex","ldTabindex","type","hideValues","htmlFor","indicators","hideStopLabels"],"sources":["../src/liquid/components/ld-slider/ld-slider.shadow.css?tag=ld-slider&encapsulation=shadow","../src/liquid/components/ld-slider/ld-slider.tsx"],"sourcesContent":["@define-mixin ld-slider-track {\n  width: 100%;\n  height: 100%;\n  background: none;\n}\n@define-mixin ld-slider-thumb {\n  background: var(--ld-slider-thumb-col);\n  border-radius: var(--ld-br-full);\n  border: none;\n  box-shadow: var(--ld-slider-thumb-box-shadow);\n  box-sizing: border-box;\n  height: var(--ld-slider-thumb-size);\n  pointer-events: auto;\n  width: var(--ld-slider-thumb-size);\n  will-change: transform;\n}\n\n:host {\n  /* thumbs shadow/outline */\n  --ld-slider-disabled-thumb-box-shadow: 0 0 0 transparent;\n  --ld-slider-thumb-box-shadow: var(--ld-slider-thumb-box-shadow-default);\n  --ld-slider-thumb-box-shadow-default: var(--ld-shadow-stacked);\n  --ld-slider-thumb-box-shadow-active: var(--ld-slider-thumb-box-shadow-default),\n    0 0 0 var(--ld-sp-6) var(--ld-thm-primary-alpha-lowest);\n  --ld-slider-thumb-box-shadow-hover: var(--ld-slider-thumb-box-shadow-default),\n    0 0 0 var(--ld-sp-4) var(--ld-thm-primary-alpha-lowest);\n\n  /* thumb size */\n  --ld-slider-thumb-size: var(--ld-slider-thumb-size-md);\n  --ld-slider-thumb-size-sm: var(--ld-sp-24);\n  --ld-slider-thumb-size-md: var(--ld-sp-32);\n  --ld-slider-thumb-size-lg: var(--ld-sp-40);\n\n  /* positioning */\n  --ld-slider-diff: calc(var(--max) - var(--min));\n  --ld-slider-indicator-size: var(--ld-sp-6);\n  --ld-slider-track-margin: calc(\n    (var(--ld-slider-thumb-size) - var(--ld-slider-indicator-size)) / 2 -\n      0.0625rem\n  );\n  --ld-slider-radius: calc(var(--ld-slider-thumb-size) / 2);\n  --ld-slider-useful-width: calc(\n    var(--ld-slider-width) - var(--ld-slider-thumb-size)\n  );\n\n  /* colors */\n  --ld-slider-thumb-col: var(--ld-col-wht);\n  --ld-slider-disabled-thumb-col: var(--ld-col-neutral-200);\n  --ld-slider-selected-col: var(--ld-slider-selected-col-default);\n  --ld-slider-selected-col-default: var(--ld-thm-primary);\n  --ld-slider-disabled-selected-col: var(--ld-col-neutral-200);\n\n  /* animations */\n  --ld-slider-animation-duration: 0s;\n\n  @media (prefers-reduced-motion: no-preference) {\n    --ld-slider-animation-duration: 0.15s;\n  }\n\n  display: grid;\n  font: var(--ld-typo-body-xs);\n  grid-template-rows: max-content var(--ld-slider-thumb-size) max-content;\n  pointer-events: none;\n  position: relative;\n  min-width: var(--ld-slider-width);\n  width: var(--ld-slider-width);\n  z-index: 0;\n\n  &::after,\n  &::before {\n    grid-column: 1;\n    grid-row: 2;\n    border-radius: var(--ld-slider-radius);\n    background: var(--ld-col-neutral-100);\n    content: '';\n    align-self: center;\n    height: var(--ld-sp-8);\n    margin: 0 var(--ld-slider-track-margin);\n    will-change: transform;\n  }\n\n  &::after {\n    background: var(--ld-slider-selected-col);\n    cursor: pointer;\n    mask: var(--fill);\n    mask-composite: exclude;\n    pointer-events: auto;\n  }\n\n  &([disabled]),\n  &([aria-disabled=true]) {\n    --ld-slider-selected-col: var(--ld-slider-disabled-selected-col);\n    --ld-slider-thumb-box-shadow-default: var(\n      --ld-slider-disabled-thumb-box-shadow\n    );\n    --ld-slider-thumb-col: var(--ld-slider-disabled-thumb-col);\n\n    &::after {\n      pointer-events: none;\n    }\n\n    .ld-slider__input {\n      opacity: 1; /* iOS Safari fix */\n\n      &::-webkit-slider-thumb {\n        pointer-events: none;\n        transform: scale(calc(2 / 3));\n      }\n      &::-moz-range-thumb {\n        pointer-events: none;\n        transform: scale(calc(2 / 3));\n      }\n\n      &:focus + .ld-slider__output--permanent::after {\n        color: var(--ld-slider-selected-col-default);\n      }\n\n      &:focus:not(:focus-visible) + .ld-slider__output--permanent::after {\n        color: inherit;\n      }\n    }\n  }\n\n  &(.ld-slider--padded) {\n    padding-bottom: var(--ld-sp-6);\n  }\n\n  &(.ld-slider--sm) {\n    --ld-slider-thumb-size: var(--ld-slider-thumb-size-sm);\n  }\n\n  &(.ld-slider--lg) {\n    --ld-slider-thumb-size: var(--ld-slider-thumb-size-lg);\n  }\n\n  & * {\n    --ld-slider-highlighted: 0;\n    margin: 0;\n    font: inherit;\n  }\n\n  .ld-slider__input {\n    &::-webkit-slider-runnable-track,\n    &::-webkit-slider-thumb,\n    & {\n      -webkit-appearance: none;\n    }\n\n    background: none;\n    /* stylelint-disable-next-line plugin/no-unsupported-browser-features */\n    cursor: grab;\n    grid-column: 1;\n    grid-row: 2;\n    left: 0;\n    top: 0;\n    z-index: calc(3 + var(--ld-slider-highlighted));\n\n    &::-webkit-slider-runnable-track {\n      @mixin ld-slider-track;\n    }\n    &::-moz-range-track {\n      @mixin ld-slider-track;\n      z-index: 2;\n    }\n\n    &::-webkit-slider-thumb {\n      @mixin ld-slider-thumb;\n    }\n    &::-moz-range-thumb {\n      @mixin ld-slider-thumb;\n    }\n\n    &:active,\n    &:focus-visible {\n      outline: none;\n\n      & + output {\n        --ld-slider-highlighted: 1;\n      }\n    }\n\n    &:focus,\n    &:hover {\n      --ld-slider-thumb-box-shadow: var(--ld-slider-thumb-box-shadow-hover);\n    }\n\n    &:active {\n      --ld-slider-thumb-box-shadow: var(--ld-slider-thumb-box-shadow-active);\n      /* stylelint-disable-next-line plugin/no-unsupported-browser-features */\n      cursor: grabbing;\n      outline: none;\n      z-index: 4;\n    }\n\n    &:not(:active, :focus-visible, :hover) {\n      --ld-slider-thumb-box-shadow: var(--ld-slider-thumb-box-shadow-default);\n    }\n  }\n\n  .ld-slider__indicator,\n  .ld-slider__value-label,\n  .ld-slider__output {\n    grid-column: 1;\n    left: calc(\n      (var(--now) - var(--min)) / var(--ld-slider-diff) *\n        var(--ld-slider-useful-width) + var(--ld-slider-radius)\n    );\n    max-width: max-content;\n    position: relative;\n  }\n\n  .ld-slider__indicator {\n    aspect-ratio: 1;\n    backdrop-filter: brightness(0.6) invert(1) hue-rotate(180deg);\n    border-radius: var(--ld-br-full);\n    grid-row: 2;\n    height: var(--ld-slider-indicator-size);\n    opacity: 0.5;\n    top: var(--ld-slider-radius);\n    transform: translate(-50%, -50%);\n    z-index: 1;\n  }\n\n  .ld-slider__value-label {\n    grid-row: 3;\n    transform: translate(-50%);\n\n    &--first {\n      left: var(--ld-slider-track-margin);\n      transform: none;\n    }\n\n    &--last {\n      left: auto;\n      position: absolute;\n      right: var(--ld-slider-track-margin);\n      transform: none;\n    }\n  }\n\n  .ld-slider__output {\n    font-weight: 700;\n    grid-row: 1;\n    opacity: var(--ld-slider-highlighted);\n    transform: translate(-50%) scale(max(0.8, var(--ld-slider-highlighted)));\n    transition: opacity var(--ld-slider-animation-duration) ease-out,\n      transform var(--ld-slider-animation-duration) ease-out;\n    color: var(--ld-col-wht);\n    content: counter(now) var(--unit);\n    counter-reset: now var(--now);\n    margin-bottom: var(--ld-sp-16);\n\n    &::before {\n      background: var(--ld-slider-selected-col);\n      border-radius: var(--ld-br-m);\n      content: '';\n      inset: 0;\n      position: absolute;\n      z-index: -1;\n    }\n\n    &::after {\n      content: counter(now) var(--unit);\n      counter-reset: now var(--now);\n      display: block;\n      padding: 0 var(--ld-sp-6);\n    }\n\n    &--permanent {\n      color: var(--ld-slider-selected-col);\n      opacity: 1;\n      transform: translate(\n        -50%,\n        calc((var(--ld-slider-highlighted) - 1) * var(--ld-sp-12) * -1)\n      );\n      transition: transform var(--ld-slider-animation-duration) ease-out;\n\n      &::before {\n        opacity: var(--ld-slider-highlighted);\n        transition: opacity var(--ld-slider-animation-duration) ease-out;\n      }\n\n      &::after {\n        filter: invert(var(--ld-slider-highlighted))\n          grayscale(var(--ld-slider-highlighted))\n          contrast(max(1, calc(4 * var(--ld-slider-highlighted))));\n      }\n    }\n  }\n}\n","import {\n  Component,\n  Element,\n  Event,\n  EventEmitter,\n  Fragment,\n  Host,\n  h,\n  Prop,\n  State,\n  Watch,\n  Method,\n} from '@stencil/core'\nimport { getClassNames } from '../../utils/getClassNames'\n\nconst findClosest = (items: number[], currValue: number) =>\n  items.length\n    ? items.reduce((prevItem, item) =>\n        Math.abs(item - currValue) < Math.abs(prevItem - currValue)\n          ? item\n          : prevItem\n      )\n    : currValue\n\nconst findNext = (items: number[], currValue: number) =>\n  findClosest(\n    items.filter((item) => item > currValue),\n    currValue\n  )\n\nconst findPrev = (items: number[], currValue: number) =>\n  findClosest(\n    items.filter((item) => item < currValue),\n    currValue\n  )\n\nlet sliderCount = 0\n\n/**\n * @virtualProp ref - reference to component\n * @virtualProp {string | number} key - for tracking the node's identity when working with lists\n * @part indicator - Stop/step indicator div elements\n * @part input - `input` elements\n * @part label - `ld-sr-only` elements labelling an input\n * @part output - `output` elements\n * @part value-label - `div` element containing the max/min/stops values + unit\n */\n@Component({\n  tag: 'ld-slider',\n  styleUrl: 'ld-slider.shadow.css',\n  shadow: true,\n})\nexport class LdSlider implements InnerFocusable {\n  @Element() el: HTMLLdSliderElement\n  private firstSliderRef?: HTMLInputElement\n  private idPrefix = `ld-slider-${++sliderCount}`\n\n  /** Alternative disabled state that keeps element focusable */\n  @Prop() ariaDisabled: string\n  /** Disabled state of the slider */\n  @Prop() disabled? = false\n  /** Prevents rendering of the stop labels below the slider */\n  @Prop() hideStopLabels? = false\n  /** Prevents rendering of the value labels below the slider */\n  @Prop() hideValueLabels? = false\n  /** Makes the current values only visible on interaction */\n  @Prop() hideValues? = false\n  /** Specifies the legal number intervals */\n  @Prop() indicators? = false\n  /** \"From\" value label (when exactly 2 values are given) */\n  @Prop() labelFrom? = 'From'\n  /** \"To\" value label (when exactly 2 values are given) */\n  @Prop() labelTo? = 'To'\n  /** \"Value\" label (when exactly 2 values are given) */\n  @Prop() labelValue? = 'Value'\n  /** Specifies the maximum value allowed */\n  @Prop() max? = 100\n  /** Specifies the minimum value allowed */\n  @Prop() min? = 0\n  /** Swap which areas are being marked as selected and deselected */\n  @Prop() negative? = false\n  /** Size of the thumb(s). */\n  @Prop() size?: 'sm' | 'lg'\n  /** Offset inside which a thumb snaps to a stop point */\n  @Prop() snapOffset?: number\n  /** Specifies the legal number intervals */\n  @Prop() step?: number\n  /** Adds custom stop points to the slider (instead of steps) */\n  @Prop() stops?: string\n  /** Allows swapping of thumbs */\n  @Prop() swappable? = false\n  /** Tab index of the input(s). */\n  @Prop() ldTabindex?: number\n  /** Adds custom stop points to the slider (instead of steps) */\n  @Prop() unit?: string\n  /** Specifies the default value */\n  @Prop({ mutable: true, reflect: true }) value?: string | number = this.min\n  /** Width of the slider */\n  @Prop() width? = '100%'\n\n  @State() valueLabels: number[] = []\n  @State() steps: number[] = []\n  @State() values: number[] = []\n\n  @Event() ldchange: EventEmitter<typeof this.values>\n\n  /** Focuses the toggle */\n  @Method()\n  async focusInner() {\n    this.firstSliderRef?.focus({ preventScroll: true })\n  }\n\n  handleTrackClick = (ev: PointerEvent) => {\n    if (ev.composedPath()[0] !== this.el) {\n      return\n    }\n\n    const afterStyles = getComputedStyle(this.el, 'after')\n    const paddingLeft =\n      Number.parseInt(getComputedStyle(this.el).paddingLeft) || 0\n    const marginLeft = Number.parseInt(afterStyles.marginLeft) || 0\n    const trackWidth = Number.parseInt(afterStyles.width)\n    const clickPosition = ev.offsetX - paddingLeft - marginLeft\n    const newValue =\n      Math.round((clickPosition / trackWidth) * (this.max - this.min)) +\n      this.min\n    const values = [...this.values]\n    const index = values.indexOf(findClosest(values, newValue))\n    const correctedValue = this.getCorrectedValue(newValue, index, values)\n\n    values.splice(index, 1, correctedValue)\n    this.value = values.join(',')\n  }\n\n  handleInput = (ev: Event, index: number) => {\n    const target = ev.target as HTMLInputElement\n\n    if (this.ariaDisabled === 'true') {\n      target.value = String(this.values[index])\n      return\n    }\n\n    const currValue = Number.parseInt(target.value, 10)\n    const values = [...this.values]\n    const correctedValue = this.getCorrectedValue(\n      currValue,\n      index,\n      values,\n      true\n    )\n\n    values[index] = correctedValue\n\n    if (correctedValue !== currValue) {\n      target.value = String(correctedValue)\n    }\n\n    const newValue = values.join(',')\n\n    if (this.value !== newValue) {\n      this.value = values.join(',')\n    }\n  }\n\n  handleKeyDown = (ev: KeyboardEvent, index: number) => {\n    const target = ev.target as HTMLInputElement\n\n    if (this.ariaDisabled === 'true') {\n      target.value = String(this.values[index])\n      return\n    }\n\n    const prevValue = Number.parseInt(target.value, 10)\n    const values = [...this.values]\n    let currValue: number\n\n    if (this.stops && !this.snapOffset) {\n      switch (ev.key) {\n        case 'ArrowDown':\n        case 'ArrowLeft':\n          currValue = findPrev(this.steps, prevValue)\n          break\n        case 'ArrowRight':\n        case 'ArrowUp':\n          currValue = findNext(this.steps, prevValue)\n      }\n    } else if (this.snapOffset) {\n      switch (ev.key) {\n        case 'ArrowDown':\n        case 'ArrowLeft':\n          currValue = prevValue - 1\n          break\n        case 'ArrowRight':\n        case 'ArrowUp':\n          currValue = prevValue + 1\n      }\n    }\n\n    if (currValue === undefined) {\n      return\n    }\n\n    ev.preventDefault()\n    const correctedValue = this.getCorrectedValue(currValue, index, values)\n\n    if (correctedValue === prevValue) {\n      return\n    }\n\n    values[index] = correctedValue\n    target.value = String(correctedValue)\n\n    const newValue = values.join(',')\n\n    if (this.value !== newValue) {\n      this.value = values.join(',')\n    }\n  }\n\n  getCorrectedValue = (\n    currValue: number,\n    index: number,\n    values: number[],\n    snap = false\n  ) => {\n    const prevValue = values[index - 1]\n    const nextValue = values[index + 1]\n\n    if (currValue < this.min) {\n      return this.min\n    }\n\n    if (currValue > this.max) {\n      return this.max\n    }\n\n    if (!this.swappable && prevValue > currValue) {\n      return prevValue\n    }\n\n    if (!this.swappable && nextValue < currValue) {\n      return nextValue\n    }\n\n    if (snap && this.snapOffset !== undefined) {\n      const stepToSnapTo = this.steps.find(\n        (step) =>\n          currValue <= step + this.snapOffset &&\n          currValue >= step - this.snapOffset\n      )\n\n      return stepToSnapTo ?? currValue\n    }\n\n    if (this.steps.length && this.snapOffset === undefined) {\n      return findClosest(this.steps, currValue)\n    }\n\n    return currValue\n  }\n\n  validateValue = (currValue: number, index: number, values: number[]) =>\n    currValue === this.getCorrectedValue(currValue, index, values)\n\n  @Watch('max')\n  @Watch('min')\n  @Watch('step')\n  @Watch('stops')\n  updateState() {\n    this.steps = this.stops\n      ? [\n          this.min,\n          ...this.stops\n            .split(',')\n            .map((valueLabel) => Number.parseInt(valueLabel, 10)),\n          this.max,\n        ]\n      : this.step\n      ? Array(Math.floor((this.max - this.min) / this.step) + 1)\n          .fill(this.min)\n          .map((min, index) => min + index * this.step)\n      : []\n\n    this.valueLabels = this.stops ? [...this.steps] : [this.min, this.max]\n  }\n\n  @Watch('value')\n  handleValueChange() {\n    const success = this.updateValues()\n\n    if (success) {\n      this.ldchange.emit(this.values)\n    }\n  }\n\n  correctValues = (values: number[]) => {\n    const correctedValues = values.map(this.getCorrectedValue)\n\n    if (!correctedValues.every(this.validateValue)) {\n      return this.correctValues(correctedValues)\n    }\n\n    return correctedValues\n  }\n\n  updateValues = (autoCorrectValues = false) => {\n    const values = String(this.value)\n      .split(',')\n      .map((value) => Number.parseInt(value, 10))\n\n    if (!values.every(this.validateValue)) {\n      if (autoCorrectValues) {\n        this.value = this.correctValues(values).join(',')\n      }\n      return false\n    }\n\n    this.values = values\n    return true\n  }\n\n  componentWillLoad() {\n    this.updateState()\n    this.updateValues(true)\n  }\n\n  render() {\n    const cssValues = this.values.reduce<Record<string, number>>(\n      (prev, curr, index) => {\n        prev[`--value${index}`] = curr\n        return prev\n      },\n      {}\n    )\n\n    return (\n      <Host\n        class={getClassNames([\n          'ld-slider',\n          this.hideValueLabels && 'ld-slider--padded',\n          this.size && `ld-slider--${this.size}`,\n        ])}\n        onClick={this.handleTrackClick}\n        role=\"group\"\n        style={{\n          ...cssValues,\n          '--ld-slider-width': this.width,\n          '--min': String(this.min),\n          '--max': String(this.max),\n          '--fill':\n            (this.negative\n              ? `\nlinear-gradient(\n  90deg,\n  red 100%,\n  transparent 0\n),`\n              : '') +\n            this.values\n              .map(\n                (_, index) => `\nlinear-gradient(\n  90deg,\n  red\n    calc(\n      var(--ld-slider-radius) - var(--ld-slider-track-margin) +\n        (var(--value${index}) - var(--min)) / var(--ld-slider-diff) *\n        (var(--ld-slider-useful-width)${\n          this.width === '100%' ? ' + 2 * var(--ld-slider-track-margin)' : ''\n        })\n    ),\n  transparent 0\n)`\n              )\n              .join(','),\n        }}\n      >\n        {this.values.map((value, index) => (\n          <>\n            <ld-sr-only\n              id={`${this.idPrefix}-label-${index}`}\n              key={`label-${index}`}\n              part=\"label\"\n            >\n              {this.values.length === 2\n                ? index === 0\n                  ? this.labelFrom\n                  : this.labelTo\n                : `${this.labelValue} ${index + 1}`}\n            </ld-sr-only>\n            <input\n              aria-disabled={\n                this.disabled || this.ariaDisabled === 'true'\n                  ? 'true'\n                  : undefined\n              }\n              aria-labelledby={`${this.idPrefix}-label-${index}`}\n              aria-valuetext={this.unit ? value + this.unit : undefined}\n              class=\"ld-slider__input\"\n              disabled={this.disabled}\n              id={`${this.idPrefix}-value-${index}`}\n              key={`input-${index}`}\n              max={this.max}\n              min={this.min}\n              onInput={(ev) => this.handleInput(ev, index)}\n              onKeyDown={(ev) => this.handleKeyDown(ev, index)}\n              part=\"input focusable\"\n              ref={\n                index === 0\n                  ? (ref) => {\n                      this.firstSliderRef = ref\n                    }\n                  : undefined\n              }\n              step={this.snapOffset !== undefined ? undefined : this.step}\n              style={\n                // prevents that thumb is not movable, when swappable prop is not set\n                value === this.max && this.values[index - 1] === this.max\n                  ? {\n                      zIndex: '2',\n                    }\n                  : undefined\n              }\n              tabindex={this.ldTabindex}\n              type=\"range\"\n              value={value}\n            />\n            <output\n              class={getClassNames([\n                'ld-slider__output',\n                !this.hideValues && 'ld-slider__output--permanent',\n              ])}\n              htmlFor={`${this.idPrefix}-value-${index}`}\n              key={`output-${index}`}\n              part=\"output\"\n              style={{\n                '--now': `var(--value${index})`,\n                '--unit': `\"${this.unit ?? ''}\"`,\n              }}\n            />\n          </>\n        ))}\n        {this.indicators &&\n          this.steps.map((step) => (\n            <div\n              class=\"ld-slider__indicator\"\n              key={`indicator-${step}`}\n              part=\"indicator\"\n              style={{ '--now': String(step) }}\n            />\n          ))}\n        {!this.hideValueLabels &&\n          this.valueLabels.map(\n            (valueLabel, index) =>\n              (index === 0 ||\n                index === this.valueLabels.length - 1 ||\n                !this.hideStopLabels) && (\n                <div\n                  class={getClassNames([\n                    'ld-slider__value-label',\n                    index === 0 && 'ld-slider__value-label--first',\n                    index === this.valueLabels.length - 1 &&\n                      'ld-slider__value-label--last',\n                  ])}\n                  key={`value-label-${valueLabel}`}\n                  part=\"value-label\"\n                  style={{ '--now': String(valueLabel) }}\n                >\n                  {valueLabel}\n                  {this.unit}\n                </div>\n              )\n          )}\n      </Host>\n    )\n  }\n}\n"],"mappings":"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"}