:host {
  background-color: var(--ld-col-wht);
  display: block;
  border-radius: var(--ld-accordion-border-radius);
}

.ld-accordion-toggle__button,
.ld-accordion-toggle__label,
.ld-accordion-toggle__trigger {
  margin: 0;
  border: 0;
  box-sizing: border-box;
  text-align: left;
  touch-action: manipulation;
  user-select: none;
  width: 100%;
  -webkit-touch-callout: none;
}

.ld-accordion-toggle__button {
  background-color: var(--ld-accordion-bg-col);
  align-items: center;
  border-radius: inherit;
  color: var(--ld-accordion-col);
  display: grid;
  font: var(--ld-typo-body-m);
  grid-template-columns: 1fr var(--ld-accordion-toggle-size);
  padding: 0;
  position: relative;

  &[aria-disabled] {
    color: var(--ld-accordion-col-disabled);
  }

  &:not([aria-disabled]) {
    cursor: pointer;

    &:where(:focus:focus-visible) {
      background-color: var(--ld-accordion-bg-col-focus);
      color: var(--ld-accordion-col-focus);
    }
    @media (hover: hover) {
      &:where(:hover) {
        background-color: var(--ld-accordion-bg-col-hover);
        color: var(--ld-accordion-col-hover);
      }
    }
    &:where(:active),
    &:where(:active:focus-visible) {
      background-color: var(--ld-accordion-bg-col-active);
      color: var(--ld-accordion-col-active);
    }

    .ld-accordion-toggle__trigger {
      color: var(--ld-accordion-trigger-icon-col);
    }

    &:focus:focus-visible,
    &:hover,
    &:active,
    &:active:focus-visible {
      .ld-accordion-toggle__trigger {
        color: inherit;
      }
    }
  }
}

.ld-accordion-toggle__label,
.ld-accordion-toggle__trigger {
  font: inherit;
  background-color: transparent;

  &:not([aria-disabled]) {
    cursor: pointer;
  }
}

.ld-accordion-toggle__label {
  position: relative;
  padding: var(--ld-accordion-padding-y) var(--ld-accordion-padding-x);
}

.ld-accordion-toggle__trigger {
  position: relative;
  width: var(--ld-accordion-toggle-size);
  height: var(--ld-accordion-toggle-size);
  display: grid;
  place-items: center;
  overflow: hidden; /* resolves focus outline issue on safari */
}

.ld-accordion-toggle__label-content,
.ld-accordion-toggle__trigger-content {
  position: relative;
  display: grid;
}

:host(.ld-accordion-toggle--expanded) {
  border-bottom-left-radius: 0;
  border-bottom-right-radius: 0;

  .ld-accordion-toggle__trigger-icon {
    transform: scaleY(-1);
  }
}

:host(.ld-accordion-toggle--split) {
  .ld-accordion-toggle__label,
  .ld-accordion-toggle__trigger {
    &::before {
      content: '';
      position: absolute;
      inset: var(--ld-sp-4);
      border-radius: var(--ld-br-s);
    }

    &[aria-disabled] {
      color: var(--ld-accordion-col-disabled);
    }
  }

  .ld-accordion-toggle__button:not([aria-disabled]) {
    background-color: var(--ld-accordion-bg-col);

    .ld-accordion-toggle__label:not([aria-disabled]) {
      color: var(--ld-accordion-col);
    }
    .ld-accordion-toggle__trigger:not([aria-disabled]) {
      color: var(--ld-thm-primary);
    }

    .ld-accordion-toggle__label:not([aria-disabled]),
    .ld-accordion-toggle__trigger:not([aria-disabled]) {
      &:where(:focus:focus-visible) {
        color: var(--ld-accordion-col-focus);
        &::before {
          background-color: var(--ld-accordion-bg-col-focus);
        }
      }
      @media (hover: hover) {
        &:where(:hover) {
          color: var(--ld-accordion-col-hover);
          &::before {
            background-color: var(--ld-accordion-bg-col-hover);
          }
        }
      }
      &:where(:active),
      &:where(:active:focus-visible) {
        color: var(--ld-accordion-col-active);
        &::before {
          background-color: var(--ld-accordion-bg-col-active);
        }
      }
    }
  }
}

.ld-accordion-toggle__content {
  display: contents;
}
