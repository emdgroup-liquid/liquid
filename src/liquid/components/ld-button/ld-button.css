:host > :where(.ld-button) {
  width: 100%;
}

.ld-button {
  --ld-button-icon-size-sm: 1rem;
  --ld-button-icon-size-md: 1.25rem;
  --ld-button-icon-size-lg: 1.5rem;
  --ld-button-icon-margin-x-sm: -0.125rem;
  --ld-button-icon-margin-x-md: -0.25rem;
  --ld-button-icon-margin-x-lg: -0.5rem;
  --ld-button-padding-x-sm: 0.625rem;
  --ld-button-padding-y-sm: 0.5rem;
  --ld-button-padding-x-md: 0.875rem;
  --ld-button-padding-y-md: 0.625rem;
  --ld-button-padding-x-lg: 1.3125rem;
  --ld-button-padding-y-lg: 0.75rem;
  --ld-button-gap-sm: 0.625rem;
  --ld-button-gap-md: 0.875rem;
  --ld-button-gap-lg: 1.1875rem;
  background-color: var(--ld-button-bg-color);
  box-sizing: border-box;
  position: relative;
  font: var(--ld-typo-body-m);
  border: 0;
  padding: var(--ld-button-padding-y-md) var(--ld-button-padding-x-md);
  border-radius: var(--ld-button-border-top-left-radius, var(--ld-br-m))
    var(--ld-button-border-top-right-radius, var(--ld-br-m))
    var(--ld-button-border-bottom-right-radius, var(--ld-br-m))
    var(--ld-button-border-bottom-left-radius, var(--ld-br-m));
  min-height: 2.5rem;
  min-width: 2.5rem;
  text-decoration: none;
  user-select: none;
  touch-action: manipulation;
  color: var(--ld-button-text-color, var(--ld-col-wht));
  display: grid;
  grid-auto-flow: column;
  gap: var(--ld-button-gap-md);
  align-items: center;
  text-align: center;
  justify-content: center;
  font-weight: 700;
  line-height: 1;
  -webkit-touch-callout: none;

  &:where(:disabled),
  &:where([aria-disabled='true']) {
    opacity: 0.2;
  }

  &:where(:not(:disabled):not([aria-disabled='true'])) {
    cursor: pointer;

    &:where(:focus:focus-visible) {
      background-color: var(--ld-button-bg-color-focus);
      color: var(--ld-button-text-color-focus);
    }
    @media (hover: hover) {
      &:where(:hover) {
        background-color: var(--ld-button-bg-color-hover);
        color: var(--ld-button-text-color-hover, var(--ld-col-wht));
      }
    }
    &:where(:active),
    &:where(:active:focus-visible) {
      background-color: var(--ld-button-bg-color-active);
      color: var(--ld-button-text-color-active, var(--ld-col-wht));
    }
  }

  /* TODO: check if this is necessary or can be removed / moved to ld-icon.css */
  ::slotted(ld-icon),
  :where(ld-icon) {
    line-height: 0;
  }

  ::slotted(ld-icon),
  ::slotted(.ld-icon),
  > ld-icon,
  > .ld-icon {
    margin: auto var(--ld-button-icon-margin-x-md);
  }

  &:where(.ld-button--sm) {
    min-height: 2rem;
    min-width: 2rem;
    padding: var(--ld-button-padding-y-sm) var(--ld-button-padding-x-sm);
    font: var(--ld-typo-body-s);
    font-weight: 700;
    line-height: 1;
    gap: var(--ld-button-gap-sm);

    ::slotted(ld-icon),
    ::slotted(.ld-icon),
    > ld-icon,
    > .ld-icon {
      margin: auto var(--ld-button-icon-margin-x-sm);
    }
  }

  &:where(.ld-button--lg) {
    min-height: 3.125rem;
    min-width: 3.125rem;
    padding: var(--ld-button-padding-y-lg) var(--ld-button-padding-x-lg);
    font: var(--ld-typo-body-l);
    font-weight: 700;
    line-height: 1;
    gap: var(--ld-button-gap-lg);

    ::slotted(ld-icon),
    ::slotted(.ld-icon),
    > ld-icon,
    > .ld-icon {
      margin: auto var(--ld-button-icon-margin-x-lg);
    }
  }

  &:where(.ld-button--align-text-right) {
    text-align: right;
  }

  &:where(.ld-button--align-text-left) {
    text-align: left;
  }

  &:where(.ld-button--justify-start) {
    justify-content: flex-start;
  }

  &:where(.ld-button--justify-end) {
    justify-content: flex-end;
  }

  &:where(.ld-button--justify-between) {
    justify-content: space-between;
  }

  &[aria-busy='true'] {
    cursor: progress;
  }
}

@keyframes ld-button-progress-pending {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}

.ld-button__progress {
  border-bottom-left-radius: var(
    --ld-button-border-bottom-left-radius,
    var(--ld-br-full)
  );
  border-bottom-right-radius: var(
    --ld-button-border-bottom-right-radius,
    var(--ld-br-full)
  );
  --ld-button-progress: 0;
  position: absolute;
  background-color: inherit;
  inset: auto 0 0;
  height: var(--ld-br-m);
  overflow: hidden;
  transform: translateZ(0); /* fixes overflow issue in Safari */

  &::before,
  &::after {
    content: '';
    position: absolute;
    inset: 0;
  }

  &::before {
    background-color: var(--ld-button-progress-bg-color, inherit);
    filter: brightness(0.8);
  }

  &::after {
    background-color: var(--ld-button-progress-color);
    transition: transform 0.2s ease;
    transform: translateX(-100%)
      translateX(calc(var(--ld-button-progress) * 100%));
  }

  &--pending {
    &::after {
      animation: ld-button-progress-pending 1s linear infinite;
    }
  }
}

.ld-button--highlight {
  background-color: var(--ld-col-vy-default);
  color: var(--ld-col-vy6);

  &:where(:not(:disabled):not([aria-disabled='true'])) {
    &:where(:focus:focus-visible) {
      background-color: var(--ld-col-vy-focus);
    }
    @media (hover: hover) {
      &:where(:hover) {
        background-color: var(--ld-col-vy-hover);
      }
    }
    &:where(:active),
    &:where(:active:focus-visible) {
      background-color: var(--ld-col-vy-active);
      color: var(--ld-col-vy4);
    }
  }

  .ld-button__progress::after {
    background-color: var(--ld-col-vy6);
  }
}

.ld-button--danger {
  background-color: var(--ld-col-rr-default);
  color: var(--ld-col-wht);

  &:where(:not(:disabled):not([aria-disabled='true'])) {
    &:where(:focus:focus-visible) {
      background-color: var(--ld-col-rr-focus);
    }
    @media (hover: hover) {
      &:where(:hover) {
        background-color: var(--ld-col-rr-hover);
        color: var(--ld-col-wht);
      }
    }
    &:where(:active),
    &:where(:active:focus-visible) {
      background-color: var(--ld-col-rr-active);
      color: var(--ld-col-wht);
    }
  }

  .ld-button__progress::after {
    background-color: var(--ld-col-rr6);
  }
}

.ld-button--secondary,
.ld-button--ghost {
  background-color: var(--ld-button-ghost-bg-color, transparent);
  color: var(--ld-button-ghost-text-color);

  &:where(:not(:disabled):not([aria-disabled='true'])) {
    &:where(:focus:focus-visible) {
      background-color: var(--ld-button-ghost-bg-color-focus, transparent);
      color: var(--ld-button-ghost-text-color-focus);
    }
    @media (hover: hover) {
      &:where(:hover) {
        background-color: var(--ld-button-ghost-bg-color-hover);
        color: var(--ld-button-ghost-text-color-hover);
      }
    }
    &:where(:active),
    &:where(:active:focus-visible) {
      background-color: var(--ld-button-ghost-bg-color-active);
      color: var(--ld-button-ghost-text-color-active);
    }
  }

  .ld-button__progress::before {
    background-color: var(--ld-button-ghost-progress-bg-color);
  }
  .ld-button__progress::after {
    background-color: var(--ld-button-ghost-progress-color);
  }
}

.ld-button--secondary {
  box-shadow: inset 0px 0px 0px 2px var(--ld-button-secondary-shadow-color);

  &:where(:not(:disabled):not([aria-disabled='true'])) {
    &:where(:focus:focus-visible) {
      box-shadow: inset 0px 0px 0px 2px
        var(--ld-button-secondary-shadow-color-focus);
    }
    @media (hover: hover) {
      &:where(:hover) {
        box-shadow: inset 0px 0px 0px 2px
          var(--ld-button-secondary-shadow-color-hover);
      }
    }
    &:active,
    &:active:focus-visible {
      box-shadow: inset 0px 0px 0px 2px
        var(--ld-button-secondary-shadow-color-active);
    }
  }
}

.ld-button--on-brand-color {
  --ld-col-ob-wht-active: rgba(255, 255, 255, 0.5);
  --ld-col-ob-wht-hover: rgba(255, 255, 255, 0.7);
  --ld-col-ob-wht-focus: rgba(255, 255, 255, 0.9);
  background-color: var(--ld-col-wht);
  color: var(--ld-button-text-brand-color);

  &:where(&:not(:disabled):not([aria-disabled='true'])) {
    &:where(:focus:focus-visible) {
      background-color: var(--ld-col-ob-wht-focus);
      color: var(--ld-button-text-brand-color-focus);
    }
    @media (hover: hover) {
      &:where(:hover) {
        background-color: var(--ld-col-ob-wht-hover);
      }
    }
    &:where(:active),
    &:where(:active:focus-visible) {
      background-color: var(--ld-col-ob-wht-active);
    }
  }
}

.ld-button--secondary-on-brand-color {
  --ld-col-sob-wht-active: rgba(255, 255, 255, 0.8);
  --ld-col-sob-wht-active-bg: rgba(255, 255, 255, 0.1);
  --ld-col-sob-wht-hover-bg: rgba(255, 255, 255, 0.2);
  --ld-col-sob-wht-focus: rgba(255, 255, 255, 0.7);
  background-color: transparent;
  color: var(--ld-col-wht);
  box-shadow: inset 0px 0px 0px 2px var(--ld-col-wht);

  &:where(&:not(:disabled):not([aria-disabled='true'])) {
    &:where(:focus:focus-visible) {
      color: var(--ld-col-sob-wht-focus);
      box-shadow: inset 0px 0px 0px 2px var(--ld-col-sob-wht-focus);
    }
    @media (hover: hover) {
      &:where(:hover) {
        background-color: var(--ld-col-sob-wht-hover-bg);
      }
    }
    &:where(:active),
    &:where(:active:focus-visible) {
      background-color: var(--ld-col-sob-wht-active-bg);
      color: var(--ld-col-sob-wht-active);
      box-shadow: inset 0px 0px 0px 2px var(--ld-col-sob-wht-active);
    }
  }
}
